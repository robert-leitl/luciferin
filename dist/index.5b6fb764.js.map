{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-8bbc95322b127736.js","node_modules/tweakpane/dist/tweakpane.js","node_modules/@swc/helpers/src/_class_extract_field_descriptor.js","node_modules/@swc/helpers/src/_class_private_field_get.js","node_modules/@swc/helpers/src/_class_apply_descriptor_get.js","node_modules/@swc/helpers/src/_check_private_redeclaration.js","node_modules/@swc/helpers/src/_class_private_field_init.js","node_modules/@swc/helpers/src/_class_private_field_set.js","node_modules/@swc/helpers/src/_class_apply_descriptor_set.js","node_modules/@swc/helpers/src/_class_private_method_get.js","node_modules/@swc/helpers/src/_class_private_method_init.js","node_modules/@swc/helpers/src/_define_property.js","node_modules/@tweakpane/plugin-essentials/dist/tweakpane-plugin-essentials.js","node_modules/gl-matrix/esm/common.js","node_modules/gl-matrix/esm/mat4.js","node_modules/gl-matrix/esm/mat3.js","node_modules/gl-matrix/esm/vec3.js","node_modules/gl-matrix/esm/vec4.js","node_modules/gl-matrix/esm/quat.js","node_modules/gl-matrix/esm/vec2.js","src/utils/orbit-control.js","src/utils/webgl-utils.js","src/particles.js","src/shader/compute.vert","src/shader/compute.frag","src/utils/rounded-box-geometry.js","src/luciferin.js","src/shader/color.vert","src/shader/color.frag","src/shader/particle.vert","src/shader/particle.frag","node_modules/@parcel/runtime-js/lib/runtime-5e7b3f30867f63fc.js","src/app.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"e5iw0\\\":\\\"index.5b6fb764.js\\\",\\\"4MRyY\\\":\\\"studio024.20e5a2d1.jpg\\\"}\"));","/*! Tweakpane 3.0.8 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$p = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return new Function('return this')();\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser ? canvasElement.getContext('2d') : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$o = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$o());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$o('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$o(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$o(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$o('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            const onExpand = () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            };\n            bindValueMap(this, 'expanded', onExpand);\n            bindValueMap(this, 'temporaryExpanded', onExpand);\n        }\n        cleanUpTransition() {\n            this.set('shouldFixHeight', false);\n            this.set('expandedHeight', null);\n            this.set('completed', true);\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.cleanUpTransition();\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params || {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(blade) {\n            var _a;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = blade !== null && blade !== void 0 ? blade : null;\n            (_a = this.blade_) === null || _a === void 0 ? void 0 : _a.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            if (bc.parent) {\n                bc.parent.remove(bc);\n            }\n            bc['parent_'] = this;\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            bc['parent_'] = null;\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack(config.root ? undefined : config.blade);\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            this.className_ = ClassName(config.viewName || 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.rackController.rack.emitter.on('add', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.rackController.rack.emitter.on('remove', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$n = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$n('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$m = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$m(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const itemsElem = doc.createElement('div');\n            itemsElem.classList.add(className$k('i'));\n            this.element.appendChild(itemsElem);\n            this.itemsElement = itemsElem;\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const empty = createValue(true);\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onPageSelectedChange_ = this.onPageSelectedChange_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.empty_ = empty;\n            this.applyPages_();\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index !== null && opt_index !== void 0 ? opt_index : this.pageSet_.items.length);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        applyPages_() {\n            this.keepSelection_();\n            this.empty_.rawValue = this.pageSet_.items.length === 0;\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            pc.props.value('selected').emitter.on('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            this.rackController.rack.remove(pc.contentController);\n            pc.props\n                .value('selected')\n                .emitter.off('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        keepSelection_() {\n            if (this.pageSet_.items.length === 0) {\n                return;\n            }\n            const firstSelIndex = this.pageSet_.items.findIndex((pc) => pc.props.get('selected'));\n            if (firstSelIndex < 0) {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === 0);\n                });\n            }\n            else {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === firstSelIndex);\n                });\n            }\n        }\n        onPageSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.pageSet_.items.findIndex((pc) => pc.props.value('selected') === ev.sender);\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === index);\n                });\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.options = options;\n        }\n        constrain(value) {\n            const opts = this.options;\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step) {\n            this.step = step;\n        }\n        constrain(value) {\n            const r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        return (parseLiteral(text, cursor) || parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            y: ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.originRawValue_ + dx * this.props.get('draggingScale');\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findListItems(constraint) {\n        const c = constraint\n            ? findConstraint(constraint, ListConstraint)\n            : null;\n        if (!c) {\n            return null;\n        }\n        return c.options;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$5(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$5(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHsl(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgb(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsv(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgb(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsv(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHsl(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsv,\n            rgb: hslToRgb,\n        },\n        hsv: {\n            hsl: hsvToHsl,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgb,\n        },\n        rgb: {\n            hsl: rgbToHsl,\n            hsv: rgbToHsv,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function convertColorMode(components, fromMode, toMode) {\n        return MODE_CONVERTER_MAP[fromMode][toMode](...components);\n    }\n\n    const CONSTRAINT_MAP = {\n        hsl: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        hsv: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        rgb: (comps) => {\n            var _a;\n            return [\n                constrainRange(comps[0], 0, 255),\n                constrainRange(comps[1], 0, 255),\n                constrainRange(comps[2], 0, 255),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n    };\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        constructor(comps, mode) {\n            this.mode_ = mode;\n            this.comps_ = CONSTRAINT_MAP[mode](comps);\n        }\n        static black() {\n            return new Color([0, 0, 0], 'rgb');\n        }\n        static fromObject(obj) {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb');\n        }\n        static toRgbaObject(color) {\n            return color.toRgbaObject();\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode_ !== v2.mode_) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        get mode() {\n            return this.mode_;\n        }\n        getComponents(opt_mode) {\n            return appendAlphaComponent(convertColorMode(removeAlphaComponent(this.comps_), this.mode_, opt_mode || this.mode_), this.comps_[3]);\n        }\n        toRgbaObject() {\n            const rgbComps = this.getComponents('rgb');\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    const NOTATION_TO_PARSER_MAP = {\n        'func.rgb': (text) => {\n            const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.rgba': (text) => {\n            const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.hsl': (text) => {\n            const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'func.hsla': (text) => {\n            const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'hex.rgb': (text) => {\n            const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                ], 'rgb');\n            }\n            return null;\n        },\n        'hex.rgba': (text) => {\n            const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                    mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                    mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            return null;\n        },\n    };\n    function getColorNotation(text) {\n        const notations = Object.keys(NOTATION_TO_PARSER_MAP);\n        return notations.reduce((result, notation) => {\n            if (result) {\n                return result;\n            }\n            const subparser = NOTATION_TO_PARSER_MAP[notation];\n            return subparser(text) ? notation : null;\n        }, null);\n    }\n    const CompositeColorParser = (text) => {\n        const notation = getColorNotation(text);\n        return notation ? NOTATION_TO_PARSER_MAP[notation](text) : null;\n    };\n    function hasAlphaComponent(notation) {\n        return (notation === 'func.hsla' ||\n            notation === 'func.rgba' ||\n            notation === 'hex.rgba');\n    }\n    function colorFromString(value) {\n        if (typeof value === 'string') {\n            const cv = CompositeColorParser(value);\n            if (cv) {\n                return cv;\n            }\n        }\n        return Color.black();\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value) {\n        const formatter = createNumberFormatter(0);\n        const comps = removeAlphaComponent(value.getComponents('rgb')).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function colorToFunctionalRgbaString(value) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(0);\n        const comps = value.getComponents('rgb').map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    const NOTATION_TO_STRINGIFIER_MAP = {\n        'func.hsl': colorToFunctionalHslString,\n        'func.hsla': colorToFunctionalHslaString,\n        'func.rgb': colorToFunctionalRgbString,\n        'func.rgba': colorToFunctionalRgbaString,\n        'hex.rgb': colorToHexRgbString,\n        'hex.rgba': colorToHexRgbaString,\n    };\n    function getColorStringifier(notation) {\n        return NOTATION_TO_STRINGIFIER_MAP[notation];\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    const FORMATTER = createNumberFormatter(0);\n    const MODE_TO_CONSTRAINT_MAP = {\n        rgb: () => {\n            return new RangeConstraint({ min: 0, max: 255 });\n        },\n        hsl: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n        hsv: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n    };\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: 1,\n                formatter: FORMATTER,\n            }),\n            value: createValue(0, {\n                constraint: MODE_TO_CONSTRAINT_MAP[config.colorMode](index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 359);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgb(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new RangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value);\n        }\n        return Color.black();\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(notation) {\n        const stringify = getColorStringifier(notation);\n        return (target, value) => {\n            writePrimitive(target, stringify(value));\n        };\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha) {\n        return supportsAlpha ? writeRgbaColorObject : writeRgbColorObject;\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        return 'alpha' in inputParams && inputParams.alpha === true;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!('view' in params)) {\n                return null;\n            }\n            if (params.view !== 'color') {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromObject,\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue)),\n        },\n        controller: (args) => {\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: formatter,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const notation = getColorNotation(value);\n            if (!notation) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromString,\n            equals: Color.equals,\n            writer: (args) => {\n                const notation = getColorNotation(args.initialValue);\n                if (!notation) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return createColorStringWriter(notation);\n            },\n        },\n        controller: (args) => {\n            const notation = getColorNotation(args.initialValue);\n            if (!notation) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = getColorStringifier(notation);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: hasAlphaComponent(notation),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function createConstraint$4(params) {\n        const constraints = [];\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function findRange(constraint) {\n        const c = constraint ? findConstraint(constraint, RangeConstraint) : null;\n        if (!c) {\n            return [undefined, undefined];\n        }\n        return [c.minValue, c.maxValue];\n    }\n    function estimateSuitableRange(constraint) {\n        const [min, max] = findRange(constraint);\n        return [min !== null && min !== void 0 ? min : 0, max !== null && max !== void 0 ? max : 100];\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a, _b;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_b = ('format' in args.params ? args.params.format : undefined)) !== null && _b !== void 0 ? _b : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            if (c && findConstraint(c, RangeConstraint)) {\n                const [min, max] = estimateSuitableRange(c);\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: ValueMap.fromObject({\n                        maxValue: max,\n                        minValue: min,\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint$2(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$3(params) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint$2('x' in params ? params.x : undefined),\n                createDimensionConstraint$2('y' in params ? params.y : undefined),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const rc = constraint && findConstraint(constraint, RangeConstraint);\n        if (rc) {\n            return Math.max(Math.abs(rc.minValue || 0), Math.abs(rc.maxValue || 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createDimensionConstraint$1(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$2(params) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint$1('x' in params ? params.x : undefined),\n                createDimensionConstraint$1('y' in params ? params.y : undefined),\n                createDimensionConstraint$1('z' in params ? params.z : undefined),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$1(value.rawValue.x, c.components[0]),\n                    createAxis$1(value.rawValue.y, c.components[1]),\n                    createAxis$1(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createDimensionConstraint(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$1(params) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined),\n                createDimensionConstraint('y' in params ? params.y : undefined),\n                createDimensionConstraint('z' in params ? params.z : undefined),\n                createDimensionConstraint('w' in params ? params.w : undefined),\n            ],\n        });\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class GraphCursor {\n        constructor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        get index() {\n            return this.index_;\n        }\n        set index(index) {\n            const changed = this.index_ !== index;\n            if (changed) {\n                this.index_ = index;\n                this.emitter.emit('change', {\n                    index: index,\n                    sender: this,\n                });\n            }\n        }\n    }\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.minValue_;\n            const max = this.maxValue_;\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.index = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.index = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.index = -1;\n                return;\n            }\n            this.cursor_.index = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.index = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n            minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function createInputBindingController(plugin, args) {\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = p.optional.string(args.params.label).value;\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label || args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const P = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = P.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = P.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = P.optional.boolean(args.params.disabled).value;\n        const hidden = P.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = (_c = P.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : args.target.key;\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result ||\n                createInputBindingController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result ||\n                createMonitorBindingController(plugin, {\n                    document: document,\n                    params: params,\n                    target: target,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                createBladeController(plugin, {\n                    document: document,\n                    params: params,\n                }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                plugin.api({\n                    controller: bc,\n                    pool: this,\n                }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const ic = new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: normalizeListOptions(args.params.options),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach((target) => {\n            const value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const v = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: ValueMap.fromObject({\n                    maxValue: args.params.max,\n                    minValue: args.params.min,\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, v),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(v),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a;\n            const config = opt_config || {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = config.container || createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.0.8');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","export default function _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n  return privateMap.get(receiver);\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor';\nimport classApplyDescriptorGet from './_class_apply_descriptor_get';\n\nexport default function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return classApplyDescriptorGet(receiver, descriptor);\n}\n","export default function _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n  return descriptor.value;\n}\n","export default function _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\n","import _checkPrivateRedeclaration from \"./_check_private_redeclaration\";\n\nexport default function _classPrivateFieldInit(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor';\nimport classApplyDescriptorSet from './_class_apply_descriptor_set';\n\nexport default function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}\n","export default function _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      // This should only throw in strict mode, but class bodies are\n      // always strict and private fields can only be used inside\n      // class bodies.\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n    descriptor.value = value;\n  }\n}\n","export default function _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return fn;\n}\n","import _checkPrivateRedeclaration from \"./_check_private_redeclaration\";\n\nexport default function _classPrivateMethodInit(obj, privateSet) {\n  _checkPrivateRedeclaration(obj, privateSet);\n  privateSet.add(obj);\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.TweakpaneEssentialsPlugin = {}));\n}(this, (function (exports) { 'use strict';\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose$1(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose$1(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$g = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$g('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$g('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$f = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$f(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$f(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$e = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$e('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$e(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$e(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$e('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            bindValueMap(this, 'expanded', () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            });\n        }\n    }\n    function createFoldable(expanded) {\n        return Foldable.create(expanded);\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.set('shouldFixHeight', false);\n            foldable.set('expandedHeight', null);\n            foldable.set('completed', true);\n        });\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const className$d = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$d(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step) {\n            this.step = step;\n        }\n        constrain(value) {\n            const r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        }\n    }\n\n    const className$c = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$c(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$b = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$b('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        return (parseLiteral(text, cursor) || parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset(ev, elem) {\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            y: ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_);\n            element.addEventListener('touchmove', this.onTouchMove_);\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n\n    const className$a = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a(), className$a(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$a(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$a('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$a());\n            this.inputElement.classList.add(className$a('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$a('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$a('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$a('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$a('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$a(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$a(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.originRawValue_ + dx * this.props.get('draggingScale');\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$9 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$9('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    class GraphCursor {\n        constructor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        get index() {\n            return this.index_;\n        }\n        set index(index) {\n            const changed = this.index_ !== index;\n            if (changed) {\n                this.index_ = index;\n                this.emitter.emit('change', {\n                    index: index,\n                    sender: this,\n                });\n            }\n        }\n    }\n\n    const className$8 = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$8('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className$8('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.minValue_;\n            const max = this.maxValue_;\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className$8('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className$8('t', 'a'))) {\n                tooltipElem.classList.add(className$8('t', 'a'), className$8('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className$8('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.index = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.index = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.index = -1;\n                return;\n            }\n            this.cursor_.index = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.index = -1;\n        }\n    }\n\n    class ButtonCellApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class TpButtonGridEvent extends TpEvent {\n        constructor(target, cell, index) {\n            super(target);\n            this.cell = cell;\n            this.index = index;\n        }\n    }\n\n    class ButtonGridApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.cellToApiMap_ = new Map();\n            this.emitter_ = new Emitter();\n            const gc = this.controller_.valueController;\n            gc.cellControllers.forEach((cc, i) => {\n                const api = new ButtonCellApi(cc);\n                this.cellToApiMap_.set(cc, api);\n                cc.emitter.on('click', () => {\n                    const x = i % gc.size[0];\n                    const y = Math.floor(i / gc.size[0]);\n                    this.emitter_.emit('click', {\n                        event: new TpButtonGridEvent(this, api, [x, y]),\n                    });\n                });\n            });\n        }\n        cell(x, y) {\n            const gc = this.controller_.valueController;\n            const cc = gc.cellControllers[y * gc.size[0] + x];\n            return this.cellToApiMap_.get(cc);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class ButtonGridController {\n        constructor(doc, config) {\n            this.size = config.size;\n            const [w, h] = this.size;\n            const bcs = [];\n            for (let y = 0; y < h; y++) {\n                for (let x = 0; x < w; x++) {\n                    const bc = new ButtonController(doc, {\n                        props: ValueMap.fromObject(Object.assign({}, config.cellConfig(x, y))),\n                        viewProps: ViewProps.create(),\n                    });\n                    bcs.push(bc);\n                }\n            }\n            this.cellCs_ = bcs;\n            this.viewProps = ViewProps.create();\n            this.viewProps.handleDispose(() => {\n                this.cellCs_.forEach((c) => {\n                    c.viewProps.set('disposed', true);\n                });\n            });\n            this.view = new PlainView(doc, {\n                viewProps: this.viewProps,\n                viewName: 'btngrid',\n            });\n            this.view.element.style.gridTemplateColumns = `repeat(${w}, 1fr)`;\n            this.cellCs_.forEach((bc) => {\n                this.view.element.appendChild(bc.view.element);\n            });\n        }\n        get cellControllers() {\n            return this.cellCs_;\n        }\n    }\n\n    const ButtonGridBladePlugin = {\n        id: 'buttongrid',\n        type: 'blade',\n        // TODO:\n        css: '.tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                cells: p.required.function,\n                size: p.required.array(p.required.number),\n                view: p.required.constant('buttongrid'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonGridController(args.document, {\n                    cellConfig: args.params.cells,\n                    size: args.params.size,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonGridController)) {\n                return null;\n            }\n            return new ButtonGridApi(args.controller);\n        },\n    };\n\n    class CubicBezierApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.controller_.valueController.value.emitter.on(eventName, (ev) => {\n                bh(new TpChangeEvent(this, ev.rawValue, undefined, ev.options.last));\n            });\n            return this;\n        }\n    }\n\n    function interpolate(x1, x2, t) {\n        return x1 * (1 - t) + x2 * t;\n    }\n    const MAX_ITERATION = 20;\n    const X_DELTA = 0.001;\n    const CACHE_RESOLUTION = 100;\n    function y(cb, x) {\n        let dt = 0.25;\n        let t = 0.5;\n        let y = -1;\n        for (let i = 0; i < MAX_ITERATION; i++) {\n            const [tx, ty] = cb.curve(t);\n            t += dt * (tx < x ? +1 : -1);\n            y = ty;\n            dt *= 0.5;\n            if (Math.abs(x - tx) < X_DELTA) {\n                break;\n            }\n        }\n        return y;\n    }\n    class CubicBezier {\n        constructor(x1 = 0, y1 = 0, x2 = 1, y2 = 1) {\n            this.cache_ = [];\n            this.comps_ = [x1, y1, x2, y2];\n        }\n        get x1() {\n            return this.comps_[0];\n        }\n        get y1() {\n            return this.comps_[1];\n        }\n        get x2() {\n            return this.comps_[2];\n        }\n        get y2() {\n            return this.comps_[3];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            if (!Array.isArray(obj)) {\n                return false;\n            }\n            return (typeof obj[0] === 'number' &&\n                typeof obj[1] === 'number' &&\n                typeof obj[2] === 'number' &&\n                typeof obj[3] === 'number');\n        }\n        static equals(v1, v2) {\n            return (v1.x1 === v2.x1 && v1.y1 === v2.y1 && v1.x2 === v2.x2 && v1.y2 === v2.y2);\n        }\n        curve(t) {\n            const x01 = interpolate(0, this.x1, t);\n            const y01 = interpolate(0, this.y1, t);\n            const x12 = interpolate(this.x1, this.x2, t);\n            const y12 = interpolate(this.y1, this.y2, t);\n            const x23 = interpolate(this.x2, 1, t);\n            const y23 = interpolate(this.y2, 1, t);\n            const xr0 = interpolate(x01, x12, t);\n            const yr0 = interpolate(y01, y12, t);\n            const xr1 = interpolate(x12, x23, t);\n            const yr1 = interpolate(y12, y23, t);\n            return [interpolate(xr0, xr1, t), interpolate(yr0, yr1, t)];\n        }\n        y(x) {\n            if (this.cache_.length === 0) {\n                const cache = [];\n                for (let i = 0; i < CACHE_RESOLUTION; i++) {\n                    cache.push(y(this, mapRange(i, 0, CACHE_RESOLUTION - 1, 0, 1)));\n                }\n                this.cache_ = cache;\n            }\n            return this.cache_[Math.round(mapRange(constrainRange(x, 0, 1), 0, 1, 0, CACHE_RESOLUTION - 1))];\n        }\n        toObject() {\n            return [this.comps_[0], this.comps_[1], this.comps_[2], this.comps_[3]];\n        }\n    }\n    const CubicBezierAssembly = {\n        toComponents: (p) => p.toObject(),\n        fromComponents: (comps) => new CubicBezier(...comps),\n    };\n\n    function cubicBezierToString(cb) {\n        const formatter = createNumberFormatter(2);\n        const comps = cb.toObject().map((c) => formatter(c));\n        return `cubic-bezier(${comps.join(', ')})`;\n    }\n    const COMPS_EMPTY = [0, 0.5, 0.5, 1];\n    function cubicBezierFromString(text) {\n        const m = text.match(/^cubic-bezier\\s*\\(\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*\\)$/);\n        if (!m) {\n            return new CubicBezier(...COMPS_EMPTY);\n        }\n        const comps = [m[1], m[2], m[3], m[4]].reduce((comps, comp) => {\n            if (!comps) {\n                return null;\n            }\n            const n = Number(comp);\n            if (isNaN(n)) {\n                return null;\n            }\n            return [...comps, n];\n        }, []);\n        return new CubicBezier(...(comps !== null && comps !== void 0 ? comps : COMPS_EMPTY));\n    }\n\n    const className$7 = ClassName('cbz');\n    class CubicBezierView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindClassModifiers(this.element);\n            config.foldable.bindExpandedClass(this.element, className$7(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$7(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$7('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$7('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            const iconElem = doc.createElementNS(SVG_NS, 'svg');\n            iconElem.innerHTML = '<path d=\"M2 13C8 13 8 3 14 3\"/>';\n            buttonElem.appendChild(iconElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$7('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$7('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$6 = ClassName('cbzp');\n    class CubicBezierPickerView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const graphElem = doc.createElement('div');\n            graphElem.classList.add(className$6('g'));\n            this.element.appendChild(graphElem);\n            this.graphElement = graphElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$6('t'));\n            this.element.appendChild(textElem);\n            this.textElement = textElem;\n        }\n    }\n\n    function waitToBeAddedToDom(elem, callback) {\n        const ob = new MutationObserver((ml) => {\n            for (const m of ml) {\n                if (m.type !== 'childList') {\n                    continue;\n                }\n                m.addedNodes.forEach((elem) => {\n                    if (!elem.contains(elem)) {\n                        return;\n                    }\n                    callback();\n                    ob.disconnect();\n                });\n            }\n        });\n        const doc = elem.ownerDocument;\n        ob.observe(doc.body, {\n            attributes: true,\n            childList: true,\n            subtree: true,\n        });\n    }\n\n    const className$5 = ClassName('cbzg');\n    // TODO: Apply to core\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    class CubicBezierGraphView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$5('p'));\n            this.element.appendChild(previewElem);\n            this.previewElement = previewElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$5('g'));\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'path');\n            guideElem.classList.add(className$5('u'));\n            this.svgElem_.appendChild(guideElem);\n            this.guideElem_ = guideElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            lineElem.classList.add(className$5('l'));\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            this.handleElems_ = [doc.createElement('div'), doc.createElement('div')];\n            this.handleElems_.forEach((elem) => {\n                elem.classList.add(className$5('h'));\n                this.element.appendChild(elem);\n            });\n            this.vectorElems_ = [\n                doc.createElementNS(SVG_NS, 'line'),\n                doc.createElementNS(SVG_NS, 'line'),\n            ];\n            this.vectorElems_.forEach((elem) => {\n                elem.classList.add(className$5('v'));\n                this.svgElem_.appendChild(elem);\n            });\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_.bind(this));\n            this.sel_ = config.selection;\n            this.handleElems_.forEach((elem, index) => {\n                bindValue(this.sel_, compose((selection) => selection === index, valueToClassName(elem, className$5('h', 'sel'))));\n            });\n            waitToBeAddedToDom(this.element, () => {\n                this.refresh();\n            });\n        }\n        getVertMargin_(h) {\n            return h * 0.25;\n        }\n        valueToPosition(x, y) {\n            const bounds = this.element.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const vm = this.getVertMargin_(h);\n            return {\n                x: mapRange(x, 0, 1, 0, w),\n                y: mapRange(y, 0, 1, h - vm, vm),\n            };\n        }\n        positionToValue(x, y) {\n            const bounds = this.element.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const vm = this.getVertMargin_(h);\n            return {\n                x: constrainRange(mapRange(x, 0, w, 0, 1), 0, 1),\n                y: mapRange(y, h - vm, vm, 0, 1),\n            };\n        }\n        refresh() {\n            this.guideElem_.setAttributeNS(null, 'd', [0, 1]\n                .map((index) => {\n                const p1 = this.valueToPosition(0, index);\n                const p2 = this.valueToPosition(1, index);\n                return [`M ${p1.x},${p1.y}`, `L ${p2.x},${p2.y}`].join(' ');\n            })\n                .join(' '));\n            const bezier = this.value_.rawValue;\n            const points = [];\n            let t = 0;\n            for (;;) {\n                const p = this.valueToPosition(...bezier.curve(t));\n                points.push([p.x, p.y].join(','));\n                if (t >= 1) {\n                    break;\n                }\n                t = Math.min(t + 0.05, 1);\n            }\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const obj = bezier.toObject();\n            [0, 1].forEach((index) => {\n                const p1 = this.valueToPosition(index, index);\n                const p2 = this.valueToPosition(obj[index * 2], obj[index * 2 + 1]);\n                const vElem = this.vectorElems_[index];\n                vElem.setAttributeNS(null, 'x1', String(p1.x));\n                vElem.setAttributeNS(null, 'y1', String(p1.y));\n                vElem.setAttributeNS(null, 'x2', String(p2.x));\n                vElem.setAttributeNS(null, 'y2', String(p2.y));\n                const hElem = this.handleElems_[index];\n                hElem.style.left = `${p2.x}px`;\n                hElem.style.top = `${p2.y}px`;\n            });\n        }\n        onValueChange_() {\n            this.refresh();\n        }\n    }\n\n    const TICK_COUNT = 24;\n    const PREVIEW_DELAY = 400;\n    const PREVIEW_DURATION = 1000;\n    const className$4 = ClassName('cbzprv');\n    class CubicBezierPreviewView {\n        constructor(doc, config) {\n            this.stopped_ = true;\n            this.startTime_ = -1;\n            this.onDispose_ = this.onDispose_.bind(this);\n            this.onTimer_ = this.onTimer_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$4('g'));\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const ticksElem = doc.createElementNS(SVG_NS, 'path');\n            ticksElem.classList.add(className$4('t'));\n            this.svgElem_.appendChild(ticksElem);\n            this.ticksElem_ = ticksElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$4('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_);\n            config.viewProps.handleDispose(this.onDispose_);\n            waitToBeAddedToDom(this.element, () => {\n                this.refresh();\n            });\n        }\n        play() {\n            this.stop();\n            this.updateMarker_(0);\n            this.markerElem_.classList.add(className$4('m', 'a'));\n            this.startTime_ = new Date().getTime() + PREVIEW_DELAY;\n            this.stopped_ = false;\n            requestAnimationFrame(this.onTimer_);\n        }\n        stop() {\n            this.stopped_ = true;\n            this.markerElem_.classList.remove(className$4('m', 'a'));\n        }\n        onDispose_() {\n            this.stop();\n        }\n        updateMarker_(progress) {\n            const p = this.value_.rawValue.y(constrainRange(progress, 0, 1));\n            this.markerElem_.style.left = `${p * 100}%`;\n        }\n        refresh() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const ds = [];\n            const bezier = this.value_.rawValue;\n            for (let i = 0; i < TICK_COUNT; i++) {\n                const px = mapRange(i, 0, TICK_COUNT - 1, 0, 1);\n                const x = mapRange(bezier.y(px), 0, 1, 0, w);\n                ds.push(`M ${x},0 v${h}`);\n            }\n            this.ticksElem_.setAttributeNS(null, 'd', ds.join(' '));\n        }\n        onTimer_() {\n            if (this.startTime_ === null) {\n                return;\n            }\n            const dt = new Date().getTime() - this.startTime_;\n            const p = dt / PREVIEW_DURATION;\n            this.updateMarker_(p);\n            if (dt > PREVIEW_DURATION + PREVIEW_DELAY) {\n                this.stop();\n            }\n            if (!this.stopped_) {\n                requestAnimationFrame(this.onTimer_);\n            }\n        }\n        onValueChange_() {\n            this.refresh();\n            this.play();\n        }\n    }\n\n    function getDistance(x1, y1, x2, y2) {\n        const dx = x2 - x1;\n        const dy = y2 - y1;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n    function lockAngle(x1, y1, x2, y2) {\n        const d = getDistance(x1, y1, x2, y2);\n        const a = Math.atan2(y2 - y1, x2 - x1);\n        const la = (Math.round(a / (Math.PI / 4)) * Math.PI) / 4;\n        return {\n            x: x1 + Math.cos(la) * d,\n            y: y1 + Math.sin(la) * d,\n        };\n    }\n    class CubicBezierGraphController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.sel_ = createValue(0);\n            this.viewProps = config.viewProps;\n            this.view = new CubicBezierGraphView(doc, {\n                selection: this.sel_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n            this.prevView_ = new CubicBezierPreviewView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.prevView_.element.addEventListener('mousedown', (ev) => {\n                ev.stopImmediatePropagation();\n                ev.preventDefault();\n                this.prevView_.play();\n            });\n            this.view.previewElement.appendChild(this.prevView_.element);\n            const ptHandler = new PointerHandler(this.view.element);\n            ptHandler.emitter.on('down', this.onPointerDown_);\n            ptHandler.emitter.on('move', this.onPointerMove_);\n            ptHandler.emitter.on('up', this.onPointerUp_);\n        }\n        refresh() {\n            this.view.refresh();\n            this.prevView_.refresh();\n            this.prevView_.play();\n        }\n        updateValue_(point, locksAngle, opts) {\n            const index = this.sel_.rawValue;\n            const comps = this.value.rawValue.toObject();\n            const vp = this.view.positionToValue(point.x, point.y);\n            const v = locksAngle ? lockAngle(index, index, vp.x, vp.y) : vp;\n            comps[index * 2] = v.x;\n            comps[index * 2 + 1] = v.y;\n            this.value.setRawValue(new CubicBezier(...comps), opts);\n        }\n        onPointerDown_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            const bezier = this.value.rawValue;\n            const p1 = this.view.valueToPosition(bezier.x1, bezier.y1);\n            const d1 = getDistance(data.point.x, data.point.y, p1.x, p1.y);\n            const p2 = this.view.valueToPosition(bezier.x2, bezier.y2);\n            const d2 = getDistance(data.point.x, data.point.y, p2.x, p2.y);\n            this.sel_.rawValue = d1 <= d2 ? 0 : 1;\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const index = this.sel_.rawValue;\n            const comps = this.value.rawValue.toObject();\n            comps[index * 2] += getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            comps[index * 2 + 1] += getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            this.value.setRawValue(new CubicBezier(...comps), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const xStep = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            const yStep = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (xStep === 0 && yStep === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class CubicBezierPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CubicBezierPickerView(doc, {\n                viewProps: this.viewProps,\n            });\n            this.gc_ = new CubicBezierGraphController(doc, {\n                baseStep: config.axis.baseStep,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.graphElement.appendChild(this.gc_.view.element);\n            const xAxis = Object.assign(Object.assign({}, config.axis), { constraint: new RangeConstraint({ max: 1, min: 0 }) });\n            const yAxis = Object.assign(Object.assign({}, config.axis), { constraint: undefined });\n            this.tc_ = new PointNdTextController(doc, {\n                assembly: CubicBezierAssembly,\n                axes: [xAxis, yAxis, xAxis, yAxis],\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.tc_.view.element);\n        }\n        get allFocusableElements() {\n            return [\n                this.gc_.view.element,\n                ...this.tc_.view.textViews.map((v) => v.inputElement),\n            ];\n        }\n        refresh() {\n            this.gc_.refresh();\n        }\n    }\n\n    class CubicBezierController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = createFoldable(config.expanded);\n            this.view = new CubicBezierView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('blur', this.onButtonBlur_);\n            this.view.buttonElement.addEventListener('click', this.onButtonClick_);\n            this.tc_ = new TextController(doc, {\n                parser: cubicBezierFromString,\n                props: ValueMap.fromObject({\n                    formatter: cubicBezierToString,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.tc_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new CubicBezierPickerController(doc, {\n                axis: config.axis,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                bindValue(this.popC_.shows, (shows) => {\n                    if (shows) {\n                        pickerC.refresh();\n                    }\n                });\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onButtonBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const nextTarget = forceCast(ev.relatedTarget);\n            if (!nextTarget || !this.popC_.view.element.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                // Next target is in the popup\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                // Next target is the trigger button\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n    }\n\n    function createConstraint$1() {\n        return new PointNdConstraint({\n            assembly: CubicBezierAssembly,\n            components: [0, 1, 2, 3].map((index) => index % 2 === 0\n                ? new RangeConstraint({\n                    min: 0,\n                    max: 1,\n                })\n                : undefined),\n        });\n    }\n    const CubicBezierBladePlugin = {\n        id: 'cubic-bezier',\n        type: 'blade',\n        css: '.tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                value: p.required.array(p.required.number),\n                view: p.required.constant('cubicbezier'),\n                expanded: p.optional.boolean,\n                label: p.optional.string,\n                picker: p.optional.custom((v) => {\n                    return v === 'inline' || v === 'popup' ? v : undefined;\n                }),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const rv = new CubicBezier(...args.params.value);\n            const v = createValue(rv, {\n                constraint: createConstraint$1(),\n                equals: CubicBezier.equals,\n            });\n            const vc = new CubicBezierController(args.document, {\n                axis: {\n                    baseStep: 0.1,\n                    textProps: ValueMap.fromObject({\n                        draggingScale: 0.01,\n                        formatter: createNumberFormatter(2),\n                    }),\n                },\n                expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n                pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n                value: v,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof CubicBezierController)) {\n                return null;\n            }\n            return new CubicBezierApi(args.controller);\n        },\n    };\n\n    class FpsGraphBladeApi extends BladeApi {\n        begin() {\n            this.controller_.valueController.begin();\n        }\n        end() {\n            this.controller_.valueController.end();\n        }\n    }\n\n    const MAX_TIMESTAMPS = 20;\n    class Fpswatch {\n        constructor() {\n            this.start_ = null;\n            this.duration_ = 0;\n            this.fps_ = null;\n            this.frameCount_ = 0;\n            this.timestamps_ = [];\n        }\n        get duration() {\n            return this.duration_;\n        }\n        get fps() {\n            return this.fps_;\n        }\n        begin(now) {\n            this.start_ = now.getTime();\n        }\n        calculateFps_(nowTime) {\n            if (this.timestamps_.length === 0) {\n                return null;\n            }\n            const ts = this.timestamps_[0];\n            return (1000 * (this.frameCount_ - ts.frameCount)) / (nowTime - ts.time);\n        }\n        compactTimestamps_() {\n            if (this.timestamps_.length <= MAX_TIMESTAMPS) {\n                return;\n            }\n            const len = this.timestamps_.length - MAX_TIMESTAMPS;\n            this.timestamps_.splice(0, len);\n            const df = this.timestamps_[0].frameCount;\n            this.timestamps_.forEach((ts) => {\n                ts.frameCount -= df;\n            });\n            this.frameCount_ -= df;\n        }\n        end(now) {\n            if (this.start_ === null) {\n                return;\n            }\n            const t = now.getTime();\n            this.duration_ = t - this.start_;\n            this.start_ = null;\n            this.fps_ = this.calculateFps_(t);\n            this.timestamps_.push({\n                frameCount: this.frameCount_,\n                time: t,\n            });\n            ++this.frameCount_;\n            this.compactTimestamps_();\n        }\n    }\n\n    const className$3 = ClassName('fps');\n    class FpsView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            config.viewProps.bindClassModifiers(this.element);\n            this.graphElement = doc.createElement('div');\n            this.graphElement.classList.add(className$3('g'));\n            this.element.appendChild(this.graphElement);\n            const labelElement = doc.createElement('div');\n            labelElement.classList.add(className$3('l'));\n            this.element.appendChild(labelElement);\n            const valueElement = doc.createElement('span');\n            valueElement.classList.add(className$3('v'));\n            valueElement.textContent = '--';\n            labelElement.appendChild(valueElement);\n            this.valueElement = valueElement;\n            const unitElement = doc.createElement('span');\n            unitElement.classList.add(className$3('u'));\n            unitElement.textContent = 'FPS';\n            labelElement.appendChild(unitElement);\n        }\n    }\n\n    class FpsGraphController {\n        constructor(doc, config) {\n            this.stopwatch_ = new Fpswatch();\n            this.onTick_ = this.onTick_.bind(this);\n            this.ticker_ = config.ticker;\n            this.ticker_.emitter.on('tick', this.onTick_);\n            this.value_ = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new FpsView(doc, {\n                viewProps: this.viewProps,\n            });\n            this.graphC_ = new GraphLogController(doc, {\n                formatter: createNumberFormatter(0),\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value_,\n                viewProps: this.viewProps,\n            });\n            this.view.graphElement.appendChild(this.graphC_.view.element);\n            this.viewProps.handleDispose(() => {\n                this.graphC_.viewProps.set('disposed', true);\n                this.ticker_.dispose();\n            });\n        }\n        begin() {\n            this.stopwatch_.begin(new Date());\n        }\n        end() {\n            this.stopwatch_.end(new Date());\n        }\n        onTick_() {\n            const fps = this.stopwatch_.fps;\n            if (fps !== null) {\n                const buffer = this.value_.rawValue;\n                this.value_.rawValue = createPushedBuffer(buffer, fps);\n                this.view.valueElement.textContent = fps.toFixed(0);\n            }\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    const FpsGraphBladePlugin = {\n        id: 'fpsgraph',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('fpsgraph'),\n                interval: p.optional.number,\n                label: p.optional.string,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b, _c, _d;\n            const interval = (_a = args.params.interval) !== null && _a !== void 0 ? _a : 500;\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new FpsGraphController(args.document, {\n                    lineCount: (_b = args.params.lineCount) !== null && _b !== void 0 ? _b : 2,\n                    maxValue: (_c = args.params.max) !== null && _c !== void 0 ? _c : 90,\n                    minValue: (_d = args.params.min) !== null && _d !== void 0 ? _d : 0,\n                    ticker: createTicker(args.document, interval),\n                    value: initializeBuffer(80),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof FpsGraphController)) {\n                return null;\n            }\n            return new FpsGraphBladeApi(args.controller);\n        },\n    };\n\n    class Interval {\n        constructor(min, max) {\n            this.min = min;\n            this.max = max;\n        }\n        static isObject(obj) {\n            if (typeof obj !== 'object' || obj === null) {\n                return false;\n            }\n            const min = obj.min;\n            const max = obj.max;\n            if (typeof min !== 'number' || typeof max !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.min === v2.min && v1.max === v2.max;\n        }\n        get length() {\n            return this.max - this.min;\n        }\n        toObject() {\n            return {\n                min: this.min,\n                max: this.max,\n            };\n        }\n    }\n    const IntervalAssembly = {\n        fromComponents: (comps) => new Interval(comps[0], comps[1]),\n        toComponents: (p) => [p.min, p.max],\n    };\n\n    class IntervalConstraint {\n        constructor(edge) {\n            this.edge = edge;\n        }\n        constrain(value) {\n            var _a, _b, _c, _d, _e, _f, _g, _h;\n            if (value.min <= value.max) {\n                return new Interval((_b = (_a = this.edge) === null || _a === void 0 ? void 0 : _a.constrain(value.min)) !== null && _b !== void 0 ? _b : value.min, (_d = (_c = this.edge) === null || _c === void 0 ? void 0 : _c.constrain(value.max)) !== null && _d !== void 0 ? _d : value.max);\n            }\n            const c = (value.min + value.max) / 2;\n            return new Interval((_f = (_e = this.edge) === null || _e === void 0 ? void 0 : _e.constrain(c)) !== null && _f !== void 0 ? _f : c, (_h = (_g = this.edge) === null || _g === void 0 ? void 0 : _g.constrain(c)) !== null && _h !== void 0 ? _h : c);\n        }\n    }\n\n    const className$2 = ClassName('rsltxt');\n    class RangeSliderTextView {\n        constructor(doc, config) {\n            this.sliderView_ = config.sliderView;\n            this.textView_ = config.textView;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$2('s'));\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$2('t'));\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    const className$1 = ClassName('rsl');\n    class RangeSliderView {\n        constructor(doc, config) {\n            this.maxValue_ = config.maxValue;\n            this.minValue_ = config.minValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_.bind(this));\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$1('t'));\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$1('b'));\n            trackElem.appendChild(barElem);\n            this.barElement = barElem;\n            const knobElems = ['min', 'max'].map((modifier) => {\n                const elem = doc.createElement('div');\n                elem.classList.add(className$1('k'), className$1('k', modifier));\n                trackElem.appendChild(elem);\n                return elem;\n            });\n            this.knobElements = [knobElems[0], knobElems[1]];\n            this.update();\n        }\n        valueToX_(value) {\n            return (constrainRange(mapRange(value, this.minValue_, this.maxValue_, 0, 1), 0, 1) * 100);\n        }\n        update() {\n            const v = this.value_.rawValue;\n            if (v.length === 0) {\n                this.element.classList.add(className$1(undefined, 'zero'));\n            }\n            else {\n                this.element.classList.remove(className$1(undefined, 'zero'));\n            }\n            const xs = [this.valueToX_(v.min), this.valueToX_(v.max)];\n            this.barElement.style.left = `${xs[0]}%`;\n            this.barElement.style.right = `${100 - xs[1]}%`;\n            this.knobElements.forEach((elem, index) => {\n                elem.style.left = `${xs[index]}%`;\n            });\n        }\n        onValueChange_() {\n            this.update();\n        }\n    }\n\n    class RangeSliderController {\n        constructor(doc, config) {\n            this.grabbing_ = null;\n            this.grabOffset_ = 0;\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.maxValue_ = config.maxValue;\n            this.minValue_ = config.minValue;\n            this.viewProps = config.viewProps;\n            this.value = config.value;\n            this.view = new RangeSliderView(doc, {\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: config.viewProps,\n            });\n            const ptHandler = new PointerHandler(this.view.trackElement);\n            ptHandler.emitter.on('down', this.onPointerDown_);\n            ptHandler.emitter.on('move', this.onPointerMove_);\n            ptHandler.emitter.on('up', this.onPointerUp_);\n        }\n        ofs_() {\n            if (this.grabbing_ === 'min') {\n                return this.view.knobElements[0].getBoundingClientRect().width / 2;\n            }\n            if (this.grabbing_ === 'max') {\n                return -this.view.knobElements[1].getBoundingClientRect().width / 2;\n            }\n            return 0;\n        }\n        valueFromData_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const p = (data.point.x + this.ofs_()) / data.bounds.width;\n            return mapRange(p, 0, 1, this.minValue_, this.maxValue_);\n        }\n        onPointerDown_(ev) {\n            if (!ev.data.point) {\n                return;\n            }\n            const p = ev.data.point.x / ev.data.bounds.width;\n            const v = this.value.rawValue;\n            const pmin = mapRange(v.min, this.minValue_, this.maxValue_, 0, 1);\n            const pmax = mapRange(v.max, this.minValue_, this.maxValue_, 0, 1);\n            if (Math.abs(pmax - p) <= 0.025) {\n                this.grabbing_ = 'max';\n            }\n            else if (Math.abs(pmin - p) <= 0.025) {\n                this.grabbing_ = 'min';\n            }\n            else if (p >= pmin && p <= pmax) {\n                this.grabbing_ = 'length';\n                this.grabOffset_ = mapRange(p - pmin, 0, 1, 0, this.maxValue_ - this.minValue_);\n            }\n            else if (p < pmin) {\n                this.grabbing_ = 'min';\n                this.onPointerMove_(ev);\n            }\n            else if (p > pmax) {\n                this.grabbing_ = 'max';\n                this.onPointerMove_(ev);\n            }\n        }\n        applyPointToValue_(data, opts) {\n            const v = this.valueFromData_(data);\n            if (v === null) {\n                return;\n            }\n            if (this.grabbing_ === 'min') {\n                this.value.setRawValue(new Interval(v, this.value.rawValue.max), opts);\n            }\n            else if (this.grabbing_ === 'max') {\n                this.value.setRawValue(new Interval(this.value.rawValue.min, v), opts);\n            }\n            else if (this.grabbing_ === 'length') {\n                const len = this.value.rawValue.length;\n                let min = v - this.grabOffset_;\n                let max = min + len;\n                if (min < this.minValue_) {\n                    min = this.minValue_;\n                    max = this.minValue_ + len;\n                }\n                else if (max > this.maxValue_) {\n                    min = this.maxValue_ - len;\n                    max = this.maxValue_;\n                }\n                this.value.setRawValue(new Interval(min, max), opts);\n            }\n        }\n        onPointerMove_(ev) {\n            this.applyPointToValue_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.applyPointToValue_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n            this.grabbing_ = null;\n        }\n    }\n\n    class RangeSliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sc_ = new RangeSliderController(doc, config);\n            const axis = {\n                baseStep: config.baseStep,\n                constraint: config.constraint,\n                textProps: ValueMap.fromObject({\n                    draggingScale: config.draggingScale,\n                    formatter: config.formatter,\n                }),\n            };\n            this.tc_ = new PointNdTextController(doc, {\n                assembly: IntervalAssembly,\n                axes: [axis, axis],\n                parser: config.parser,\n                value: this.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new RangeSliderTextView(doc, {\n                sliderView: this.sc_.view,\n                textView: this.tc_.view,\n            });\n        }\n        get textController() {\n            return this.tc_;\n        }\n    }\n\n    function intervalFromUnknown(value) {\n        return Interval.isObject(value)\n            ? new Interval(value.min, value.max)\n            : new Interval(0, 0);\n    }\n    function writeInterval(target, value) {\n        target.writeProperty('max', value.max);\n        target.writeProperty('min', value.min);\n    }\n\n    function createConstraint(params) {\n        const constraints = [];\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        return new IntervalConstraint(new CompositeConstraint(constraints));\n    }\n    const IntervalInputPlugin = {\n        id: 'input-interval',\n        type: 'input',\n        css: '.tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept: (exValue, params) => {\n            if (!Interval.isObject(exValue)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: new Interval(exValue.min, exValue.max),\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => intervalFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            equals: Interval.equals,\n            writer: (_args) => writeInterval,\n        },\n        controller(args) {\n            var _a;\n            const v = args.value;\n            const c = args.constraint;\n            if (!(c instanceof IntervalConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const midValue = (v.rawValue.min + v.rawValue.max) / 2;\n            const formatter = (_a = args.params.format) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(c.edge, midValue));\n            const rc = c.edge && findConstraint(c.edge, RangeConstraint);\n            if ((rc === null || rc === void 0 ? void 0 : rc.minValue) !== undefined && (rc === null || rc === void 0 ? void 0 : rc.maxValue) !== undefined) {\n                return new RangeSliderTextController(args.document, {\n                    baseStep: getBaseStep(c.edge),\n                    constraint: c.edge,\n                    draggingScale: getSuitableDraggingScale(rc, midValue),\n                    formatter: formatter,\n                    maxValue: rc.maxValue,\n                    minValue: rc.minValue,\n                    parser: parseNumber,\n                    value: v,\n                    viewProps: args.viewProps,\n                });\n            }\n            const axis = {\n                baseStep: getBaseStep(c.edge),\n                constraint: c.edge,\n                textProps: ValueMap.fromObject({\n                    draggingScale: midValue,\n                    formatter: formatter,\n                }),\n            };\n            return new PointNdTextController(args.document, {\n                assembly: IntervalAssembly,\n                axes: [axis, axis],\n                parser: parseNumber,\n                value: v,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class RadioCellApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n    }\n\n    class TpRadioGridChangeEvent extends TpChangeEvent {\n        constructor(target, cell, index, value, presetKey) {\n            super(target, value, presetKey);\n            this.cell = cell;\n            this.index = index;\n        }\n    }\n\n    class RadioGridApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.cellToApiMap_ = new Map();\n            const gc = this.controller_.valueController;\n            gc.cellControllers.forEach((cc) => {\n                const api = new RadioCellApi(cc);\n                this.cellToApiMap_.set(cc, api);\n            });\n        }\n        get value() {\n            return this.controller_.value;\n        }\n        cell(x, y) {\n            const gc = this.controller_.valueController;\n            const cc = gc.cellControllers[y * gc.size[0] + x];\n            return this.cellToApiMap_.get(cc);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.controller_.value.emitter.on(eventName, (ev) => {\n                const gc = this.controller_.valueController;\n                const cc = gc.findCellByValue(ev.rawValue);\n                if (!cc) {\n                    return;\n                }\n                const capi = this.cellToApiMap_.get(cc);\n                if (!capi) {\n                    return;\n                }\n                const i = gc.cellControllers.indexOf(cc);\n                bh(new TpRadioGridChangeEvent(this, capi, [i % gc.size[0], Math.floor(i / gc.size[0])], ev.rawValue, undefined));\n            });\n        }\n    }\n\n    const className = ClassName('rad');\n    class RadioView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className('i'));\n            inputElem.name = config.name;\n            inputElem.type = 'radio';\n            config.viewProps.bindDisabled(inputElem);\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            const bodyElem = doc.createElement('div');\n            bodyElem.classList.add(className('b'));\n            labelElem.appendChild(bodyElem);\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className('t'));\n            bodyElem.appendChild(titleElem);\n            bindValueMap(config.props, 'title', (title) => {\n                titleElem.textContent = title;\n            });\n        }\n    }\n\n    class RadioController {\n        constructor(doc, config) {\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new RadioView(doc, {\n                name: config.name,\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class RadioGridController {\n        constructor(doc, config) {\n            this.cellCs_ = [];\n            this.cellValues_ = [];\n            this.onCellInputChange_ = this.onCellInputChange_.bind(this);\n            this.size = config.size;\n            const [w, h] = this.size;\n            for (let y = 0; y < h; y++) {\n                for (let x = 0; x < w; x++) {\n                    const bc = new RadioController(doc, {\n                        name: config.groupName,\n                        props: ValueMap.fromObject(Object.assign({}, config.cellConfig(x, y))),\n                        viewProps: ViewProps.create(),\n                    });\n                    this.cellCs_.push(bc);\n                    this.cellValues_.push(config.cellConfig(x, y).value);\n                }\n            }\n            this.value = config.value;\n            bindValue(this.value, (value) => {\n                const cc = this.findCellByValue(value);\n                if (!cc) {\n                    return;\n                }\n                cc.view.inputElement.checked = true;\n            });\n            this.viewProps = ViewProps.create();\n            this.view = new PlainView(doc, {\n                viewProps: this.viewProps,\n                viewName: 'radgrid',\n            });\n            this.view.element.style.gridTemplateColumns = `repeat(${w}, 1fr)`;\n            this.cellCs_.forEach((bc) => {\n                bc.view.inputElement.addEventListener('change', this.onCellInputChange_);\n                this.view.element.appendChild(bc.view.element);\n            });\n        }\n        get cellControllers() {\n            return this.cellCs_;\n        }\n        findCellByValue(value) {\n            const index = this.cellValues_.findIndex((v) => v === value);\n            if (index < 0) {\n                return null;\n            }\n            return this.cellCs_[index];\n        }\n        onCellInputChange_(ev) {\n            const inputElem = ev.currentTarget;\n            const index = this.cellCs_.findIndex((c) => c.view.inputElement === inputElem);\n            if (index < 0) {\n                return;\n            }\n            this.value.rawValue = this.cellValues_[index];\n        }\n    }\n\n    const RadioGridBladePlugin = (function () {\n        return {\n            id: 'radiogrid',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    cells: p.required.function,\n                    groupName: p.required.string,\n                    size: p.required.array(p.required.number),\n                    value: p.required.raw,\n                    view: p.required.constant('radiogrid'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: new RadioGridController(args.document, {\n                        groupName: args.params.groupName,\n                        cellConfig: args.params.cells,\n                        size: args.params.size,\n                        value: createValue(args.params.value),\n                    }),\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof RadioGridController)) {\n                    return null;\n                }\n                return new RadioGridApi(args.controller);\n            },\n        };\n    })();\n\n    const RadioGridNumberInputPlugin = {\n        id: 'input-radiogrid',\n        type: 'input',\n        accept(value, params) {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                cells: p.required.function,\n                groupName: p.required.string,\n                size: p.required.array(p.required.number),\n                view: p.required.constant('radiogrid'),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            return new RadioGridController(args.document, {\n                cellConfig: args.params.cells,\n                groupName: args.params.groupName,\n                size: args.params.size,\n                value: args.value,\n            });\n        },\n    };\n\n    const plugins = [\n        ButtonGridBladePlugin,\n        CubicBezierBladePlugin,\n        FpsGraphBladePlugin,\n        IntervalInputPlugin,\n        RadioGridBladePlugin,\n        RadioGridNumberInputPlugin,\n    ];\n\n    exports.CubicBezier = CubicBezier;\n    exports.plugins = plugins;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import { quat, vec3 } from 'gl-matrix';\n\nexport class OrbitControl {\n\n    // latitue thresholds in degrees\n    maxLatitude = 80;\n    minLatitude = -80;\n\n    // angular velocity in degrees / deltaTime [longitude, latitude]\n    velocity = [0, 0];\n\n    constructor(canvas, camera, updateCallback) {\n        this.pointerDown = false;\n        this.pointerDownPos = { x: 0, y: 0 };\n        this.pointerPos = { x: 0, y: 0 };\n        this.followPos = { x: 0, y: 0 };\n        this.prevFollowPos = {x: 0, y: 0};\n        this.phi = 0.;\n        this.theta = 0.;\n        this.camera = camera;\n        this.updateCallback = updateCallback;\n\n        canvas.style.touchAction = 'none';\n\n        canvas.addEventListener('pointerdown', e => {\n            this.pointerDownPos = { x: e.clientX, y: e.clientY }\n            this.followPos = { x: e.clientX, y: e.clientY }\n            this.pointerPos = { x: e.clientX, y: e.clientY }\n            this.prevFollowPos = { x: e.clientX, y: e.clientY }\n            this.pointerDownCameraUp = [...this.camera.up];\n            this.pointerDownRotation = [...this.camera.rotation];\n            this.pointerDown = true;\n        });\n        canvas.addEventListener('pointerup', e => {\n            this.pointerDown = false;\n        });\n        canvas.addEventListener('pointermove', e => {\n            if (this.pointerDown) {\n                this.pointerPos = { x: e.clientX, y: e.clientY }\n            }\n        });\n    }\n\n    update(deltaTime) {\n        const timeScale = 16 / (deltaTime + 0.01);\n\n        if (this.pointerDown) {\n            const damping = 10 * timeScale;\n            this.followPos.x += (this.pointerPos.x - this.followPos.x) / damping;\n            this.followPos.y += (this.pointerPos.y - this.followPos.y) / damping;\n\n            const delta = {\n                x: this.followPos.x - this.prevFollowPos.x,\n                y: this.followPos.y - this.prevFollowPos.y\n            };\n            this.prevFollowPos = { ...this.followPos };\n\n            const speed = 0.2 * timeScale;\n            this.phi = delta.x * speed;\n            this.theta = delta.y * speed;\n        } else {\n            const decc = 0.96 / Math.max(.5 * timeScale, 1);\n            this.phi *= decc;\n            this.theta *= decc;\n        }\n\n        const prevRotation = [...this.camera.rotation];\n\n        this.camera.rotation[0] -= this.theta;\n        this.camera.rotation[1] -= this.phi;\n\n        this.velocity[0] = this.camera.rotation[0] - prevRotation[0];\n        this.velocity[1] = this.camera.rotation[1] - prevRotation[1];\n\n        const thetaLimitUp = this.maxLatitude;\n        const thetaLimitDown = this.minLatitude;\n        if (this.camera.rotation[0] > thetaLimitUp) {\n            this.camera.rotation[0] = thetaLimitUp;\n        } else if (this.camera.rotation[0] < thetaLimitDown) {\n            this.camera.rotation[0] = thetaLimitDown;\n        }\n\n        quat.fromEuler(this.camera.orbit, this.camera.rotation[0], this.camera.rotation[1], this.camera.rotation[2]);\n        vec3.transformQuat(this.camera.position, [0, 0, this.camera.distance], this.camera.orbit);\n\n        this.updateCallback();\n    }\n\n}","export function createShader(gl, type, source) {\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n    if (success) {\n        return shader;\n    }\n\n    console.error(gl.getShaderInfoLog(shader));\n    gl.deleteShader(shader);\n}\n\nexport function createProgram(gl, shaderSources, transformFeedbackVaryings, attribLocations) {\n    const program = gl.createProgram();\n\n    [gl.VERTEX_SHADER, gl.FRAGMENT_SHADER].forEach((type, ndx) => {\n        const shader = createShader(gl, type, shaderSources[ndx]);\n        gl.attachShader(program, shader);\n    });\n\n    if (transformFeedbackVaryings) {\n        gl.transformFeedbackVaryings(program, transformFeedbackVaryings, gl.SEPARATE_ATTRIBS);\n    }\n\n    if (attribLocations) {\n        for(const attrib in attribLocations) {\n            gl.bindAttribLocation(program, attribLocations[attrib], attrib);\n        }\n    }\n\n    gl.linkProgram(program);\n    const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n    if (success) {\n        return program;\n    }\n\n    console.error(gl.getProgramInfoLog(program));\n    gl.deleteProgram(program);\n}\n\nexport function makeVertexArray(gl, bufLocNumElmPairs, indices) {\n    const va = gl.createVertexArray();\n    gl.bindVertexArray(va);\n    for (const [buffer, loc, numElem] of bufLocNumElmPairs) {\n        if(loc == -1) continue;\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.enableVertexAttribArray(loc);\n        gl.vertexAttribPointer(\n            loc,      // attribute location\n            numElem,        // number of elements\n            gl.FLOAT, // type of data\n            false,    // normalize\n            0,        // stride (0 = auto)\n            0,        // offset\n        );\n    }\n    if (indices) {\n        const indexBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\n    }\n    gl.bindVertexArray(null);\n    return va;\n}\n\nexport function resizeCanvasToDisplaySize(canvas) {\n    // Lookup the size the browser is displaying the canvas in CSS pixels.\n    const displayWidth  = canvas.clientWidth;\n    const displayHeight = canvas.clientHeight;\n   \n    // Check if the canvas is not the same size.\n    const needResize = canvas.width  !== displayWidth ||\n                       canvas.height !== displayHeight;\n   \n    if (needResize) {\n      // Make the canvas the same size\n      canvas.width  = displayWidth;\n      canvas.height = displayHeight;\n    }\n   \n    return needResize;\n}\n\nexport function makeBuffer(gl, sizeOrData, usage) {\n    const buf = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buf);\n    gl.bufferData(gl.ARRAY_BUFFER, sizeOrData, usage);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    return buf;\n}\n\nexport function makeTransformFeedback(gl, buffers) {\n    const tf = gl.createTransformFeedback();\n    gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, tf);\n    buffers.forEach((buffer, ndx) => \n        gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, ndx, buffer)\n    );\n    return tf;\n}\n\nexport function createFramebuffer(gl, colorAttachements, depthAttachement) {\n    const fbo = gl.createFramebuffer();\n    const drawBuffers = [];\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n    colorAttachements.forEach((texture, ndx) => {\n        const attachmentPoint = gl[`COLOR_ATTACHMENT${ndx}`];\n        gl.framebufferTexture2D(\n            gl.FRAMEBUFFER,\n            attachmentPoint,\n            gl.TEXTURE_2D, \n            texture,\n            0);\n        drawBuffers.push(attachmentPoint);\n    });\n    if (depthAttachement) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, depthAttachement, 0);\n    }\n    gl.drawBuffers(drawBuffers);\n\n    if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n        console.error('could not complete render framebuffer setup', gl.checkFramebufferStatus(gl.FRAMEBUFFER))\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    return fbo;\n}\n\nexport function setFramebuffer(gl, fbo, width, height) {\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo); // all draw commands will affect the framebuffer\n    gl.viewport(0, 0, width, height);\n}\n\nexport function createAndSetupTexture(gl, minFilter, magFilter, wrapS, wrapT) {\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\n    return texture;\n}","\nimport computeFragmentShaderSource from './shader/compute.frag';\nimport computeVertexShaderSource from './shader/compute.vert';\nimport { createProgram, makeBuffer, makeTransformFeedback, makeVertexArray } from './utils/webgl-utils';\n\nexport class Particles {\n\n    constructor(gl, count) {\n        // setup programs\n        this.program = createProgram(gl, [computeVertexShaderSource, computeFragmentShaderSource], ['t_newPosition', 't_newVelocity']);\n\n        // find the locations\n        this.locations = {\n            a_oldPosition: gl.getAttribLocation(this.program, 'a_oldPosition'),\n            a_oldVelocity: gl.getAttribLocation(this.program, 'a_oldVelocity'),\n            u_deltaTime: gl.getUniformLocation(this.program, 'u_deltaTime'),\n            u_frames: gl.getUniformLocation(this.program, 'u_frames')\n        };\n\n        // init the positions and velocities\n        this.NUM_PARTICLES = count;\n        const s = .1;\n        const positions = new Float32Array(Array(this.NUM_PARTICLES).fill(0).map(_ => Array(3).fill(0).map(_ => (Math.random() * 2 - 1) * s)).flat());\n        const velocities = new Float32Array(Array(this.NUM_PARTICLES).fill(0).map(_ => Array(3).fill(0).map(_ => (Math.random() * 2 - 1) * 0.001 )).flat());\n\n        // make the buffers\n        this.positionBuffers = [\n            makeBuffer(gl, positions, this.gl.DYNAMIC_DRAW),\n            makeBuffer(gl, positions, this.gl.DYNAMIC_DRAW)\n        ];\n        this.velocityBuffers = [\n            makeBuffer(gl, velocities, this.gl.DYNAMIC_DRAW),\n            makeBuffer(gl, velocities, this.gl.DYNAMIC_DRAW)\n        ];\n\n        // create the compute VAOs\n        this.compute1VAO = makeVertexArray(gl, [\n            [this.positionBuffers[0], this.locations.a_oldPosition, 3],\n            [this.velocityBuffers[0], this.locations.a_oldVelocity, 3]\n        ]);\n        this.compute2VAO = makeVertexArray(gl, [\n            [this.positionBuffers[1], this.locations.a_oldPosition, 3],\n            [this.velocityBuffers[1], this.locations.a_oldVelocity, 3]\n        ]);\n\n        // make the transform feedbacks\n        this.transformFeedback1 = makeTransformFeedback(gl, [this.positionBuffers[0], this.velocityBuffers[0]]);\n        this.transformFeedback2 = makeTransformFeedback(gl, [this.positionBuffers[1], this.velocityBuffers[1]]);\n\n        // unbind left over stuff\n        gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\n        gl.bindBuffer(this.gl.TRANSFORM_FEEDBACK_BUFFER, null);\n\n        // this are the render states\n        this.currentRenderState = {\n            resultPositionBufferIndex: 1,\n            computeVAO: this.compute1VAO,\n            transformFeedback: this.transformFeedback2\n        };\n        this.nextRenderState = {\n            resultPositionBufferIndex: 0,\n            computeVAO: this.compute2VAO,\n            transformFeedback: this.transformFeedback1\n        };\n\n        this.positionBuffer = this.currentRenderState.resultPositionBuffer;\n    }\n\n    update(frames = 0, deltaTime = 0) {\n        /** @type {WebGlRenderingContext} */\n        const gl = this.gl;\n\n        // compute\n        gl.enable(gl.RASTERIZER_DISCARD);\n        gl.useProgram(this.program);\n        gl.bindVertexArray(this.currentRenderState.computeVAO);\n        gl.uniform1f(this.locations.u_deltaTime, (deltaTime + 0.0001));\n        gl.uniform1i(this.locations.u_frames, frames);\n        gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, this.currentRenderState.transformFeedback);\n        gl.beginTransformFeedback(gl.POINTS);\n        gl.drawArrays(gl.POINTS, 0, this.NUM_PARTICLES);\n        gl.endTransformFeedback();\n        gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, null);\n        gl.disable(gl.RASTERIZER_DISCARD);\n\n        const resultPositionBufferIndex = this.currentRenderState.resultPositionBufferIndex;\n\n        // swap the render states\n        const currentState = this.currentRenderState;\n        this.currentRenderState = this.nextRenderState;\n        this.nextRenderState = currentState;\n\n        return resultPositionBufferIndex;\n    }\n}\n","#version 300 es\n\nuniform float u_deltaTime;\nuniform int u_frames;\n\nconst vec3 capsuleA = vec3(0., .5, 0.);\nconst vec3 capsuleB = vec3(0., -.5, 0.);\nconst float capsuleRadius = .5;\n\nin vec3 a_oldPosition;\nin vec3 a_oldVelocity;\n\nout vec3 t_newPosition;\nout vec3 t_newVelocity;\n\n// Capsule SDF from https://www.iquilezles.org/www/articles/distfunctions/distfunctions.htm\nfloat sdCapsule( vec3 p, vec3 a, vec3 b, float r )\n{\n  vec3 pa = p - a, ba = b - a;\n  float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n  return length( pa - ba*h ) - r;\n}\n\nfloat f(vec3 p) {\n    return sdCapsule(p, capsuleA, capsuleB, capsuleRadius);\n}\n\n// https://www.iquilezles.org/www/articles/normalsSDF/normalsSDF.htm\nvec3 sdCapsuleNormal( in vec3 p )\n{\n    const float eps = 0.0001;\n    const vec2 h = vec2(eps,0);\n    return normalize( vec3(f(p+h.xyy) - f(p-h.xyy),\n                           f(p+h.yxy) - f(p-h.yxy),\n                           f(p+h.yyx) - f(p-h.yyx) ) );\n}\n\n#pragma glslify: curlNoise = require(glsl-curl-noise) \n#pragma glslify: cnoise2 = require(glsl-noise/simplex/2d)\n\nvoid main() {\n    vec3 i = a_oldPosition * .95;\n    float n2 = cnoise2(a_oldPosition.xz + float(u_frames) * 0.005);\n    n2 *= .6;\n    vec3 velocity = (a_oldVelocity + curlNoise(vec3(i.x, i.y + n2, i.z) * 2. - 1.) * 0.0007);\n    vec3 delta = velocity * u_deltaTime;\n    vec3 pos = a_oldPosition + delta;\n\n    // use the capsule SDF to restrict the movement of the particles\n    vec3 sdNormal = sdCapsuleNormal(pos);\n    float d = dot(sdNormal, delta);\n    float offset = capsuleRadius * .1;\n    float sd = min(1., max(f(pos), -offset));\n    float rs = sd / offset;\n    vec3 o = sdNormal * (1. + rs);\n    vec3 nPos = pos - o * d;\n    vec3 vPos = pos - o * 40.;\n\n    t_newPosition = nPos;\n    t_newVelocity = normalize(vPos - a_oldPosition) * length(a_oldVelocity);\n}\n","#version 300 es\n\nprecision highp float;\n\nvoid main() {}\n","import { vec3 } from 'gl-matrix';\n\n// Credits: https://github.com/pailhead/three-rounded-box/blob/master/index.js\nexport class RoundedBoxGeometry {\n\n    constructor( \n        width, \n        height, \n        depth, \n        radius, \n        radiusSegments\n    ) {\n        //validate params ===================================\n    \n        radiusSegments = !isNaN( radiusSegments ) ? Math.max( 1, Math.floor( radiusSegments ) ) : 1 ;\n    \n        width =  !isNaN(width)  ? width  : 1;\n        height = !isNaN(height) ? height : 1;\n        depth =  !isNaN(depth)  ? depth  : 1;\n    \n        radius = !isNaN(radius) ? radius : .15;\n    \n        radius = Math.min( radius , Math.min( width , Math.min( height , Math.min( depth ) ) ) / 2 );\n    \n        const edgeHalfWidth =  width / 2 - radius;\n        const edgeHalfHeight = height / 2 - radius;\n        const edgeHalfDepth =  depth / 2 - radius;\n    \n        //calculate vertices count ==========================\n    \n        const rs1 =  radiusSegments + 1; //radius segments + 1 \n    \n        const totalVertexCount = ( rs1 * radiusSegments + 1 ) << 3; \n    \n    \n        //make buffers ======================================\n    \n        const positions = new Float32Array( totalVertexCount * 3 );\n        \n        const normals = new Float32Array( totalVertexCount * 3 );\n        \n    \n        //some vars =========================================\n    \n        let \n            cornerVerts = [], \n            cornerNormals = [],\n            normal = vec3.create(),\n            vertex = vec3.create(),\n            vertexPool = [],\n            normalPool = [],\n            indices = []\n        ;\n    \n        let\n            lastVertex = rs1 * radiusSegments,\n            cornerVertNumber = rs1 * radiusSegments + 1\n        ;\n    \n        //////////////////// VERTICES\n    \n        //corner offsets\n        let cornerLayout = [\n            vec3.fromValues(  1 ,  1 ,  1 ),\n            vec3.fromValues(  1 ,  1 , -1 ),\n            vec3.fromValues( -1 ,  1 , -1 ),\n            vec3.fromValues( -1 ,  1 ,  1 ),\n            vec3.fromValues(  1 , -1 ,  1 ),\n            vec3.fromValues(  1 , -1 , -1 ),\n            vec3.fromValues( -1 , -1 , -1 ),\n            vec3.fromValues( -1 , -1 ,  1 )\n        ];\n\n        //corner holder \n        for ( let j = 0 ; j < 8 ; j ++ ){\n\n            cornerVerts.push([]); \n            cornerNormals.push([]); \n\n        }\n\n        //construct 1/8 sphere ==============================\n\n        let PIhalf = Math.PI / 2;\n\n        let cornerOffset = vec3.fromValues( edgeHalfWidth , edgeHalfHeight , edgeHalfDepth );\n\n        for ( let y = 0; y <= radiusSegments; y ++ ) {\n\n            let v = y / radiusSegments;\n\n            let va = v * PIhalf; //arrange in 90 deg\n\n            let cosVa = Math.cos( va ); //scale of vertical angle \n\n            let sinVa = Math.sin( va );\n\n            if( y == radiusSegments ){\n\n                vec3.set(vertex, 0, 1, 0);\n\n                let vert = vec3.clone(vertex);\n                vec3.scale(vert, vert, radius);\n                vec3.add(vert, vert, cornerOffset);\n                \n                cornerVerts[0].push( vert );\n\n                vertexPool.push( vert );\n                \n                let norm = vec3.normalize(vec3.create(), vertex);\n\n                cornerNormals[0].push( norm );\n\n                normalPool.push( norm );\n\n                continue; //skip row loop\n            \n            } \t\n\n            for ( let x = 0; x <= radiusSegments; x ++ ) {\n\n                let u = x / radiusSegments;\n\n                let ha = u * PIhalf;\n\n                //make 1/8 sphere points\n                vertex[0] = cosVa * Math.cos( ha );\n                vertex[1] = sinVa;\n                vertex[2] = cosVa * Math.sin( ha );\n\n                //copy sphere point, scale by radius, offset by half whd\n                let vert = vec3.clone(vertex);\n                vec3.scale(vert, vert, radius);\n                vec3.add(vert, vert, cornerOffset);\n\n                cornerVerts[0].push( vert );\n\n                vertexPool.push( vert );\n                \n                //sphere already normalized, just clone\n\n                let norm = vec3.normalize(vec3.create(), vec3.clone(vertex));\n\n                cornerNormals[0].push( norm );\n                normalPool.push( norm );\n\n            }\n\n        }\n\n        //distribute corner verts ===========================\n\n        for ( let i = 1 ; i < 8 ; i ++ ){\n\n            for( let j = 0 ; j < cornerVerts[0].length ; j ++ ){\n\n                let vert = vec3.multiply(vec3.create(), cornerVerts[0][j], cornerLayout[i]);\n\n                cornerVerts[i].push( vert );\n                \n                vertexPool.push( vert );\n\n                let norm = vec3.multiply(vec3.create(), cornerNormals[0][j], cornerLayout[i]);\n\n                cornerNormals[i].push( norm );\n\n                normalPool.push( norm );\n\n            }\n\n        }\t\n\n        //////////////////// FACES\n\n        //top\n        let a = lastVertex;// + cornerVertNumber * 0;\n        let b = lastVertex + cornerVertNumber;// * 1;\n        let c = lastVertex + cornerVertNumber * 2;\n        let d = lastVertex + cornerVertNumber * 3;\n\n        indices.push( a );\n        indices.push( b );\n        indices.push( c );\n        indices.push( a );\n        indices.push( c );\n        indices.push( d );\n\n        //bottom\n        a = lastVertex + cornerVertNumber * 4;// + cornerVertNumber * 0;\n        b = lastVertex + cornerVertNumber * 5;// * 1;\n        c = lastVertex + cornerVertNumber * 6;\n        d = lastVertex + cornerVertNumber * 7;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( a );\n        indices.push( d );\n        indices.push( c );\n\n        //left \n        a = 0;\n        b = cornerVertNumber;\n        c = cornerVertNumber * 4;\n        d = cornerVertNumber * 5;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( b );\n        indices.push( c );\n        indices.push( d );\n\n        //right \n        a = cornerVertNumber * 2;\n        b = cornerVertNumber * 3;\n        c = cornerVertNumber * 6;\n        d = cornerVertNumber * 7;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( b );\n        indices.push( c );\n        indices.push( d );\n\n        //front \n        a = radiusSegments;\n        b = radiusSegments + cornerVertNumber * 3;\n        c = radiusSegments + cornerVertNumber * 4;\n        d = radiusSegments + cornerVertNumber * 7;\n\n        indices.push( a );\n        indices.push( b );\n        indices.push( c );\n        indices.push( b );\n        indices.push( d );\n        indices.push( c );\n\n        //back \n        a = radiusSegments + cornerVertNumber;\n        b = radiusSegments + cornerVertNumber * 2;\n        c = radiusSegments + cornerVertNumber * 5;\n        d = radiusSegments + cornerVertNumber * 6;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( b );\n        indices.push( c );\n        indices.push( d );\n    \n        //////////////////// CORNERS\n        \n        let indexInd = 0;\n\n\n        let flips = [\n            true,\n            false,\n            true,\n            false,\n            false,\n            true,\n            false,\n            true\n        ];\n\n        let lastRowOffset = rs1 * ( radiusSegments - 1 );\n\n        for ( let i = 0 ; i < 8 ; i ++ ){\n\n            let cornerOffset = cornerVertNumber * i;\n\n            for ( let v = 0 ; v < radiusSegments - 1 ; v ++ ){\n\n                let r1 = v * rs1; \t\t//row offset\n                let r2 = (v + 1) * rs1; //next row\n\n                for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                    let u1 = u + 1;\n                    let a = cornerOffset + r1 + u;\n                    let b = cornerOffset + r1 + u1;\n                    let c = cornerOffset + r2 + u;\n                    let d = cornerOffset + r2 + u1;\n\n                    if( !flips[i] ){\n\n                        indices.push( a );\n                        indices.push( b );\n                        indices.push( c );\n\n                        indices.push( b );\n                        indices.push( d );\n                        indices.push( c );\n\n                    } else {\n\n                        indices.push( a );\n                        indices.push( c );\n                        indices.push( b );\n\n                        indices.push( b );\n                        indices.push( c );\n                        indices.push( d );\n\n                    }\n\n                }\n\n            }\n            \n            for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                let a = cornerOffset + lastRowOffset + u;\n                let b = cornerOffset + lastRowOffset + u + 1;\n                let c = cornerOffset + lastVertex;\n\n                if( !flips[i] ){\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n\n                } else {\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n\n                }\n\n            }\n\n        }\n    \n        //////////////////// HEIGHT EDGES\n\n        for ( let i = 0 ; i < 4 ; i ++ ){\n\n            let cOffset = i * cornerVertNumber;\n            let cRowOffset = 4 * cornerVertNumber + cOffset;\n            let needsFlip = i & 1 === 1;\n            for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                let u1 = u + 1;\n                let a = cOffset + u;\n                let b = cOffset + u1;\n                let c = cRowOffset + u;\n                let d = cRowOffset + u1;\n\n                if( !needsFlip ){\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( d );\n                    indices.push( c );\n\n                } else {\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( d );\n\n                }\n\n            }\n\n        }\n\n        //////////////////// WIDTH EDGES\n\n        let end = radiusSegments - 1;\n\n        let cStartsW = [ 0 , 1 , 4 , 5 ];\n        let cEndsW =   [ 3 , 2 , 7 , 6 ];\n        let needsFlip = [0,1,1,0];\n\n        for ( let i = 0 ; i < 4 ; i ++ ){\n\n            let cStart = cStartsW[i] * cornerVertNumber;\n            let cEnd = cEndsW[i] * cornerVertNumber;\n            \n\n            for ( let u = 0 ; u <= end ; u ++ ){\n\n                // let dInd = u != end ? radiusSegments + u * rs1 : cornerVertNumber - 1;\n\n                let a = cStart + radiusSegments + u * rs1;\n                let b = cStart + (u != end ? radiusSegments + (u + 1) * rs1 : cornerVertNumber - 1);\n\n                let c = cEnd + radiusSegments + u * rs1;\n                let d = cEnd + (u != end ? radiusSegments + (u + 1) * rs1 : cornerVertNumber - 1);\n\n                if( !needsFlip[i] ){\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( d );\n                    indices.push( c );\n\n                } \n                else {\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( d );\n\n                }\n\n            }\n\n        }\n\n        //////////////////// DEPTH EDGES\n\n        let cStartsD = [ 0 , 2 , 4 , 6 ];\n        let cEndsD =   [ 1 , 3 , 5 , 7 ];\n            \n        for ( let i = 0 ; i < 4 ; i ++ ){\n\n            let cStartD = cornerVertNumber * cStartsD[ i ];\n            let cEndD =   cornerVertNumber * cEndsD[ i ];\n\n            let needsFlip = 1 >= i;\n\n            for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                let urs1 =  u * rs1;\n                let u1rs1 = (u+1) * rs1;\n\n                let a = cStartD + urs1;\n                let b = cStartD + u1rs1;\n                let c = cEndD + urs1;\n                let d = cEndD + u1rs1\n\n                if( needsFlip ){\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( d );\n\n                } else {\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( d );\n                    indices.push( c );\n\n                }\n\n            }\n\n        }\n    \n        //fill buffers ======================================\n    \n        let index = 0;\n    \n        for ( let i = 0 ; i < vertexPool.length ; i ++ ){\n    \n            positions.set(vertexPool[i], index * 3);\n    \n            normals.set(normalPool[i], index * 3);\n    \n            index++;\n    \n        }\n    \n        this.vertices = positions;\n        this.normals = normals;\n        this.indices = indices;\n        this.count = indices.length;\n        \n    };\n}","import { mat4, quat, vec2, vec3 } from 'gl-matrix';\nimport { OrbitControl } from './utils/orbit-control';\nimport { Particles } from './particles';\nimport { createAndSetupTexture, createFramebuffer, createProgram, makeBuffer, makeVertexArray, resizeCanvasToDisplaySize, setFramebuffer } from './utils/webgl-utils';\nimport { RoundedBoxGeometry } from './utils/rounded-box-geometry';\n\nimport colorVertShaderSource from './shader/color.vert';\nimport colorFragShaderSource from './shader/color.frag';\nimport particleVertShaderSource from './shader/particle.vert';\nimport particleFragShaderSource from './shader/particle.frag';\n\nexport class Luciferin {\n    oninit;\n\n    #time = 0;\n    #frames = 0;\n    #deltaTime = 0;\n    #isDestroyed = false;\n\n    camera = {\n        matrix: mat4.create(),\n        near: 80,\n        far: 150,\n        distance: 120,\n        orbit: quat.create(),\n        position: vec3.create(),\n        rotation: vec3.create(),\n        up: vec3.fromValues(0, 1, 0)\n    };\n\n    constructor(canvas, pane, oninit = null) {\n        this.canvas = canvas;\n        this.pane = pane;\n        this.oninit = oninit;\n\n        this.#init();\n    }\n\n    resize() {\n        const gl = this.gl;\n\n        const needsResize = resizeCanvasToDisplaySize(gl.canvas);\n        \n        if (needsResize) {\n            gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n            this.#resizeTextures(gl);\n        }\n        \n        this.#updateProjectionMatrix(gl);\n    }\n\n    run(time = 0) {\n        this.fpsGraph.begin();\n\n        this.#deltaTime = Math.min(32, time - this.#time);\n        this.#time = time;\n        this.#frames += this.#deltaTime / 16;\n\n        if (this.#isDestroyed) return;\n\n        this.particlesPositionBufferIndex = this.particles.update(this.#frames, this.#deltaTime);\n        this.control.update(this.#deltaTime);\n\n        this.#render();\n\n        this.fpsGraph.end();\n\n        requestAnimationFrame((t) => this.run(t));\n    }\n\n    #render() {\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n\n        // draw the particles\n        gl.useProgram(this.particleProgram);\n        setFramebuffer(gl, this.particleFBO, this.particleFBOSize[0], this.particleFBOSize[1]);\n        gl.clearColor(0, 0, 0, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.disable(gl.DEPTH_TEST);\n        gl.disable(gl.CULL_FACE);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.SRC_ALPHA, gl.DST_ALPHA);\n        gl.uniformMatrix4fv(this.particleLocations.u_worldMatrix, false, this.drawUniforms.u_worldMatrix);\n        gl.uniformMatrix4fv(this.particleLocations.u_viewMatrix, false, this.drawUniforms.u_viewMatrix);\n        gl.uniformMatrix4fv(this.particleLocations.u_projectionMatrix, false, this.drawUniforms.u_projectionMatrix);\n        gl.bindVertexArray(this.particleVAOs[this.particlesPositionBufferIndex]);\n        gl.drawArrays(gl.POINTS, 0, this.particles.NUM_PARTICLES);\n        gl.disable(gl.BLEND);\n        gl.enable(gl.DEPTH_TEST);\n        gl.enable(gl.CULL_FACE);\n        setFramebuffer(gl, null, gl.canvas.clientWidth, gl.canvas.clientHeight);\n\n        // draw capsule\n        gl.useProgram(this.colorProgram);\n        gl.clearColor(0, 0, 0, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.uniformMatrix4fv(this.colorLocations.u_viewMatrix, false, this.drawUniforms.u_viewMatrix);\n        gl.uniformMatrix4fv(this.colorLocations.u_projectionMatrix, false, this.drawUniforms.u_projectionMatrix);\n        gl.uniform3f(this.colorLocations.u_cameraPosition, this.camera.position[0], this.camera.position[1], this.camera.position[2]);\n        const worldInverseTransposeMatrix = mat4.create();\n        mat4.invert(worldInverseTransposeMatrix, this.drawUniforms.u_worldMatrix);\n        mat4.transpose(worldInverseTransposeMatrix, worldInverseTransposeMatrix);\n        gl.uniformMatrix4fv(this.colorLocations.u_worldMatrix, false, this.drawUniforms.u_worldMatrix);\n        gl.uniformMatrix4fv(this.colorLocations.u_worldInverseTransposeMatrix, false, worldInverseTransposeMatrix);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.particleTexture);\n        gl.uniform1i(this.colorLocations.u_particleTexture, 0);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, this.envMapTexture);\n        gl.uniform1i(this.colorLocations.u_envMapTexture, 1);\n        gl.bindVertexArray(this.capsuleVAO);\n        gl.drawElements(gl.TRIANGLES, this.capsuleBuffers.numElem, gl.UNSIGNED_SHORT, 0);\n    }\n\n    destroy() {\n        this.#isDestroyed = true;\n    }\n\n    #init() {\n        this.gl = this.canvas.getContext('webgl2', { antialias: false, alpha: false });\n\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        if (!gl) {\n            throw new Error('No WebGL 2 context!')\n        }\n\n\n        /////////////////////////////////// PARTICLES SETUP\n\n        this.particles = new Particles(gl, 8000);\n\n        ///////////////////////////////////  PROGRAM SETUP\n\n        // setup programs\n        this.colorProgram = createProgram(gl, [colorVertShaderSource, colorFragShaderSource], null, { a_position: 0, a_normal: 1, a_uv: 2 });\n        this.particleProgram = createProgram(gl, [particleVertShaderSource, particleFragShaderSource], null, { a_position: 0 });\n\n        // find the locations\n        this.colorLocations = {\n            a_position: gl.getAttribLocation(this.colorProgram, 'a_position'),\n            a_normal: gl.getAttribLocation(this.colorProgram, 'a_normal'),\n            a_uv: gl.getAttribLocation(this.colorProgram, 'a_uv'),\n            u_worldMatrix: gl.getUniformLocation(this.colorProgram, 'u_worldMatrix'),\n            u_viewMatrix: gl.getUniformLocation(this.colorProgram, 'u_viewMatrix'),\n            u_projectionMatrix: gl.getUniformLocation(this.colorProgram, 'u_projectionMatrix'),\n            u_worldInverseTransposeMatrix: gl.getUniformLocation(this.colorProgram, 'u_worldInverseTransposeMatrix'),\n            u_cameraPosition: gl.getUniformLocation(this.colorProgram, 'u_cameraPosition'),\n            u_particleTexture: gl.getUniformLocation(this.colorProgram, 'u_particleTexture'),\n            u_envMapTexture: gl.getUniformLocation(this.colorProgram, 'u_envMapTexture')\n        };\n        this.particleLocations = {\n            a_position: gl.getAttribLocation(this.particleProgram, 'a_position'),\n            u_worldMatrix: gl.getUniformLocation(this.particleProgram, 'u_worldMatrix'),\n            u_viewMatrix: gl.getUniformLocation(this.particleProgram, 'u_viewMatrix'),\n            u_projectionMatrix: gl.getUniformLocation(this.particleProgram, 'u_projectionMatrix')\n        };\n        \n        // setup uniforms\n        this.drawUniforms = {\n            u_worldMatrix: mat4.create(),\n            u_viewMatrix: mat4.create(),\n            u_projectionMatrix: mat4.create(),\n            u_worldInverseTransposeMatrix: mat4.create()\n        };\n\n        mat4.rotate(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, 0, [1, 0, 0]);\n        mat4.scale(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, [30, 30, 30]);\n        mat4.translate(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, [0, 0, 0]);\n\n        /////////////////////////////////// GEOMETRY / MESH SETUP\n\n        // create the particles draw VAOs\n        this.particleVAOs = [\n            makeVertexArray(this.gl, [\n                [this.particles.positionBuffers[0], this.particleLocations.a_position, 3]\n            ]),\n            makeVertexArray(this.gl, [\n                [this.particles.positionBuffers[1], this.particleLocations.a_position, 3]\n            ])\n        ];\n\n        // create quad VAO\n        const quadPositions = [\n            -1, -1,\n            3, -1,\n            -1, 3\n        ];\n        this.quadBuffers = {\n            position: makeBuffer(gl, new Float32Array(quadPositions), gl.STATIC_DRAW),\n            numElem: quadPositions.length / 2\n        };\n        this.quadVAO = makeVertexArray(gl, [[this.quadBuffers.position, this.colorLocations.a_position, 2]]);\n\n        // create capsule VAO\n        this.capsuleGeometry = new RoundedBoxGeometry(1, 2, 1, .5, 20);\n        this.capsuleBuffers = { \n            position: makeBuffer(gl, this.capsuleGeometry.vertices, gl.STATIC_DRAW),\n            normal: makeBuffer(gl, this.capsuleGeometry.normals, gl.STATIC_DRAW),\n            numElem: this.capsuleGeometry.count\n        };\n        this.capsuleVAO = makeVertexArray(gl, [\n            [this.capsuleBuffers.position, this.colorLocations.a_position, 3],\n            [this.capsuleBuffers.normal, this.colorLocations.a_normal, 3]\n        ], this.capsuleGeometry.indices);\n\n        /////////////////////////////////// FRAMEBUFFER SETUP\n\n        // initial client dimensions\n        const clientSize = vec2.fromValues(gl.canvas.clientWidth, gl.canvas.clientHeight);\n        this.particleFBOSize = vec2.clone(clientSize);\n\n        this.particleTexture = createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR, gl.REPEAT, gl.REPEAT);\n        gl.bindTexture(gl.TEXTURE_2D, this.particleTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.particleFBOSize[0], this.particleFBOSize[1], 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.particleFBO = createFramebuffer(gl, [this.particleTexture]);\n\n        this.resize();\n\n        this.#initEnvMap();\n        this.#updateCameraMatrix();\n        this.#updateProjectionMatrix(gl);\n\n        this.#initOrbitControls();\n        this.#initTweakpane();\n\n        if (this.oninit) this.oninit(this);\n    }\n\n    #initEnvMap() {\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        this.envMapTexture = createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR, gl.MIRRORED_REPEAT, gl.MIRRORED_REPEAT);\n        gl.bindTexture(gl.TEXTURE_2D, this.envMapTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 100, 500, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        const img = new Image();\n        img.src = new URL('./assets/studio024.jpg', import.meta.url);\n        img.addEventListener('load', () => {\n            gl.bindTexture(gl.TEXTURE_2D, this.envMapTexture);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 100, 500, 0, gl.RGBA, gl.UNSIGNED_BYTE, img);\n        });\n    }\n\n    #initOrbitControls() {\n        this.control = new OrbitControl(this.canvas, this.camera, () => this.#updateCameraMatrix());\n    }\n\n    #resizeTextures(gl) {\n        const clientSize = vec2.fromValues(gl.canvas.clientWidth, gl.canvas.clientHeight);\n        this.particleFBOSize = vec2.clone(clientSize);\n        \n        // resize particle texture\n        gl.bindTexture(gl.TEXTURE_2D, this.particleTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.particleFBOSize[0], this.particleFBOSize[1], 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        // reset bindings\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n\n    #updateCameraMatrix() {\n        mat4.targetTo(this.camera.matrix, this.camera.position, [0, 0, 0], this.camera.up);\n        mat4.invert(this.drawUniforms.u_viewMatrix, this.camera.matrix);\n    }\n\n    #updateProjectionMatrix(gl) {\n        const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n        mat4.perspective(this.drawUniforms.u_projectionMatrix, Math.PI / 4, aspect, this.camera.near, this.camera.far);\n    }\n\n    #initTweakpane() {\n        if (this.pane) {\n            const maxFar = 200;\n\n            this.fpsGraph = this.pane.addBlade({\n                view: 'fpsgraph',\n                label: 'fps',\n                lineCount: 1,\n                maxValue: 120,\n                minValue: 0\n            });\n\n            const cameraFolder = this.pane.addFolder({ title: 'Camera' });\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'near', 'near', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'far', 'far', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n        }\n    }\n\n    #createTweakpaneSlider(folder, obj, propName, label, min, max, stepSize = null, callback) {\n        const slider = folder.addBlade({\n            view: 'slider',\n            label,\n            min,\n            max,\n            step: stepSize,\n            value: obj[propName],\n        });\n        slider.on('change', e => {\n            obj[propName] = e.value;\n            if(callback) callback();\n        });\n    }\n}\n","#version 300 es\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_worldInverseTransposeMatrix;\nuniform vec3 u_cameraPosition;\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec3 v_position;\nout vec3 v_viewPosition;\nout vec3 v_normal;\nout vec3 v_viewNormal;\nout vec2 v_uv;\nout vec3 v_surfaceToView;\n\nvoid main() {\n    v_uv = a_uv;\n    v_normal = (u_worldInverseTransposeMatrix * vec4(a_normal, 0.)).xyz;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    v_surfaceToView = u_cameraPosition - worldPosition.xyz;\n    v_position = a_position.xyz;\n    v_viewPosition = viewPosition.xyz;\n    v_viewNormal = (u_viewMatrix * vec4(v_normal, 0.)).xyz;\n}\n","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_particleTexture;\nuniform sampler2D u_envMapTexture;\nuniform float u_frames;\n\nin vec3 v_position;\nin vec3 v_normal;\nin vec3 v_viewNormal;\nin vec2 v_uv;\nin vec3 v_surfaceToView;\nin vec3 v_viewPosition;\n\nout vec4 outColor;\n\n#define PI 3.1415926535\n\nvoid main() {\n    vec3 pos = v_position;\n    vec3 N = normalize(v_normal);\n    vec3 VN = normalize(v_viewNormal);\n    vec3 V = normalize(v_surfaceToView);\n    vec3 L = normalize(vec3(0., 1., 0.4));\n    float NdL = dot(N, L);\n\n    // calculate the reflection vector\n    float NdV = dot(N, V);\n    vec3 R = NdV * N * 2. - V;\n    R = normalize(R);\n\n    // calculate the half vector\n    vec3 H = normalize(V + N);\n\n    // base color\n    vec3 albedo = vec3(0.0, 0.04, 0.1);\n\n    // ambient ligthing\n    vec3 ambient = vec3(0., 0.8, 2.0) * 0.1;\n\n    // env ligthing\n    float phi   = atan(R.z, R.x);\n\tfloat theta = acos(R.y);\n    vec2 equiPos = vec2(phi / (2. * PI), theta / PI);\n    vec3 env = texture(u_envMapTexture, equiPos).rgb;\n\n    // fresnel term\n    float fresnel = min(1., pow(1. - NdV, 2.));\n\n    // diffuse shading\n    float diffuse = max(0., NdL) * 0.55;\n\n    // specular shading\n    float specular = pow(max(0., dot(H, L)), 60.) * 0.9;\n\n    // color\n    vec3 color = albedo + ambient * fresnel * .4 + specular * .1 + diffuse;\n\n    vec4 hullColor = vec4(vec3(0., 0.8, 2.0) * diffuse + ambient, fresnel + 0.1);\n    hullColor += vec4(env * env * env, env.r) * .5;\n\n    vec2 uv = vec2(gl_FragCoord) / vec2(textureSize(u_particleTexture, 0));\n    vec2 RF = refract(normalize(v_viewPosition), VN, 1. / 1.33).xy * .1;\n    vec2 chromaOffset = (RF * RF) * 5.;\n    vec4 particleColor = vec4(\n        texture(u_particleTexture, uv + RF + chromaOffset).r,\n        texture(u_particleTexture, uv + RF).g,\n        texture(u_particleTexture, uv + RF - chromaOffset).b,\n        1.\n    );\n\n    outColor = hullColor * hullColor.a + particleColor * (1. - hullColor.a);\n}\n","#version 300 es\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n\nin vec3 a_position;\n\nout float v_size;\n\nvoid main() {\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    float size = 1. - ((gl_Position.z / gl_Position.w) * .5 + .5);\n    size *= max(0.1, 1. - length(a_position * vec3(1., 0.5, 1.)));\n    gl_PointSize = size * 500.;\n    v_size = size;\n}\n","#version 300 es\n\nprecision highp float;\n\nout vec4 outColor;\n\nin float v_size;\n\nvoid main() {\n    vec2 c = gl_PointCoord * 2. - 1.;\n    float colorMask1 = 1. - smoothstep(0., 1., length(c));\n    float colorMask2 = 1. - smoothstep(0., .1, length(c));\n    vec3 baseColor1 = vec3(0., 0.2, 0.5) * .001;\n    vec3 baseColor2 = vec3(0., 0.2, 0.4);\n    vec4 color = vec4(baseColor1 + vec3(v_size) * colorMask1, colorMask1 * 0.035);\n    color += vec4(baseColor2 + vec3(v_size) * colorMask2, colorMask2 * 0.18);\n    outColor = color;\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"4MRyY\")).toString();","import { Pane } from 'tweakpane';\nimport * as EssentialsPlugin from '@tweakpane/plugin-essentials';\nimport { Luciferin } from './luciferin';\n\nconst queryString = window.location.search;\nconst urlParams = new URLSearchParams(queryString);\nconst debugParam = urlParams.get('debug');\n\nlet DEBUG = debugParam !== null;\n\nif (process.env.NODE_ENV !== 'production') {\n    // Only runs in development and will be stripped in production builds.\n    DEBUG = true;\n}\n\nlet sketch;\nlet resizeTimeoutId;\n\nwindow.addEventListener('load', () => {\n    const canvas = document.body.querySelector('#c');\n\n    let pane;\n    if (DEBUG) {\n        pane = new Pane({ title: 'Settings' });\n        pane.registerPlugin(EssentialsPlugin);\n    }\n\n    sketch = new Luciferin(canvas, pane, (sketch) => {\n        sketch.run(); \n    });\n});\n\nwindow.addEventListener('resize', () => {\n    if (sketch) {\n        if (resizeTimeoutId)\n            clearTimeout(resizeTimeoutId);\n\n        resizeTimeoutId = setTimeout(() => {\n            resizeTimeoutId = null;\n            sketch.resize();\n        }, 300);\n    }\n});\n\n\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","exports","Semver","toString","core","this","major","minor","patch","join","prerelease","constructor","text","split","coreComps","parseInt","BladeApi","disabled","controller_","viewProps","get","set","hidden","dispose","controller","TpEvent","target","TpChangeEvent","value","presetKey","last","super","TpUpdateEvent","TpFoldEvent","expanded","forceCast","v","isEmpty","deepEqualsArray","a1","a2","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","context","name","nomatchingcontroller","key","nomatchingview","stringify","params","notbindable","propertynotfound","shouldneverhappen","TpError","static","type","config","_a","message","stack","BindingTarget","obj","key_","presetKey_","read","obj_","write","writeProperty","valueObj","isBindable","notBindable","propertyNotFound","opt_id","ButtonApi","label","props","title","valueController","on","eventName","handler","bh","bind","emitter","Emitter","observers","observers_","push","off","filter","observer","emit","event","forEach","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","compose","h1","h2","input","extractValue","ev","rawValue","bindValue","applyValue","bindValueMap","valueMap","applyClass","elem","className","active","classList","add","remove","valueToClassName","bindValueToTextContent","textContent","className$q","ButtonView","doc","element","createElement","bindClassModifiers","buttonElem","bindDisabled","appendChild","buttonElement","titleElem","ButtonController","onClick_","sender","view","addEventListener","BoundValue","constraint","constraint_","rawValue_","setRawValue","forceEmit","options","opts","constrainedValue","constrain","equals_","initialValue","equals","v1","v2","PrimitiveValue","value_","createValue","ValueMap","reduce","o","assign","createCore","valMap_","parseObject","keyToParserMap","tmp","undefined","result","parser","succeeded","parseArray","parseItem","item","isObject","createParamsParserBuilder","optional","createParamsParserBuilders","custom","boolean","number","string","function","constant","raw","object","array","itemParser","Array","isArray","ParamsParsers","required","parseParams","disposeElement","parentElement","removeChild","getAllBladePositions","className$p","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent","parent_","blade","pos","handleDispose","SVG_NS","forceReflow","offsetHeight","disableTransitionTemporarily","callback","t","style","transition","supportsTouch","ontouchstart","getGlobalObject","Function","getWindowDocument","document","getCanvasContext","canvasElement","win","ownerDocument","defaultView","getContext","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","index","insertBefore","children","removeElement","removeChildElements","removeChildNodes","childNodes","findNextTarget","relatedTarget","explicitOriginalTarget","className$o","createLabelNode","frag","createDocumentFragment","map","line","createTextNode","lineNode","LabelView","labelElem","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","accept","p","args","fromObject","api","ValueBladeController","createBlade","positions","Foldable","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","styleExpanded","styleHeight","exHeight","bindExpandedClass","expandedClassName","onExpand","cleanUpTransition","computeExpandedFolderHeight","folder","containerElement","height","clientHeight","applyHeight","foldable","bindFoldable","propertyName","RackLikeApi","rackApi","rackApi_","addButtonAsBlade","addBlade","addFolderAsBlade","addSeparatorAsBlade","opt_params","addTabAsBlade","NestedOrderedSet","items","items_","allItems","from","cache_","find","includes","has","item1","opt_index","shouldNeverHappen","splice","subList","extract_","onSubListAdd_","onSubListRemove_","root","indexOf","delete","extract","Set","InputBindingApi","emitter_","refresh","binding","onBindingChange_","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","findSubBladeApiSet","RackApi","getApiByController","apiSet","api1","createBindingTarget","rack","bc","apiSet_","addInput","pool_","createInput","addMonitor","createMonitor","addFolder","addButton","addSeparator","addTab","gapi","a","createBladeApi","setUpApi_","onRackAdd_","bladeController","onRackRemove_","isRoot","onRackInputChange_","onRackMonitorUpdate_","pool","FolderApi","rackController","RackLikeController","PlainView","findInputBindingController","bcs","b","findMonitorBindingController","findValueBladeController","findSubRack","RackController","findSubBladeControllerSet","BladeRack","bcSet_","controllerClass","onSetAdd_","updatePositions_","onChildViewPropsChange_","onChildPositionsChange_","onChildDispose_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","onSetRemove_","visibleItems","firstVisibleItem","lastVisibleItem","ps","blade_","_ev","_","onBladePositionsChange_","bladeContainerClassName","FolderView","className_","foldable_","titleElement","markElem","containerElem","FolderController","onTitleClick_","create","rc","FolderBladePlugin","LabeledValueController","SeparatorApi","className$n","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$m","valueToModifier","modifier","ViewProps","opt_initialValue","_b","disposed","bindTabIndex","tabIndex","className$l","TabItemView","selected","TabItemController","TabPageController","itemController","ic_","contentController","cc_","onItemClick_","itemProps","TabPageApi","contentRackApi","TabApi","pages","pageSet","pc","pageApiMap_","addPage","removePage","setUpPageApi_","api3","onPageAdd_","onPageRemove_","Map","className$k","TabView","empty","itemsElem","itemsElement","contentsElem","contentsElement","TabController","pageSet_","applyPages_","keepSelection_","empty_","onPageSelectedChange_","firstSelIndex","findIndex","cr","TabBladePlugin","c","createBladeController","plugin","ac","ManualTicker","tick","IntervalTicker","disabled_","inactive","clearTimer_","setTimer_","timerId_","doc_","clearInterval","interval_","setInterval","onTick_","interval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","RangeConstraint","minValue","Math","max","maxValue","min","StepConstraint","round","step","className$j","ListView","update_","selectElement","String","onValueChange_","props_","selectElem","optionElem","dataset","ListController","onSelectChange_","e","optElem","currentTarget","selectedOptions","itemIndex","Number","className$i","PopupView","shows","PopupController","className$h","TextView","formatter","inputElement","onChange_","inputElem","TextController","onInputChange_","parsedValue","parser_","boolToString","boolFromUnknown","BooleanFormatter","NumberLiteralNode","evaluate","BINARY_OPERATION_MAP","pow","BinaryOperationNode","op","operator","left","right","UNARY_OPERATION_MAP","UnaryOperationNode","expression","expr","combineReader","parsers","cursor","readWhitespace","m","substr","match","readNonZeroDigit","ch","readDecimalDigits","readSignedInteger","ds","sign","sds","readExponentPart","toLowerCase","si","readDecimalIntegerLiteral","nzd","readDecimalLiteral1","dil","dot","dds","readDecimalLiteral2","readDecimalLiteral3","readDecimalLiteral","parseBinaryDigits","readBinaryIntegerLiteral","prefix","bds","readOctalDigits","readOctalIntegerLiteral","ods","readHexDigits","readHexIntegerLiteral","hds","readNonDecimalIntegerLiteral","readNumericLiteral","parseLiteral","num","evaluable","parseParenthesizedExpression","parseExpression","cl","parsePrimaryExpression","parseUnaryExpression","readBinaryOperator","ops","op1","startsWith","createBinaryOperationExpressionParser","exprParser","firstExpr","nextExpr","parseBinaryOperationExpression","parseEcmaNumberExpression","parseNumber","r","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","slice","createPushedBuffer","newValue","newBuffer","connectValues","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isVerticalArrowKey","isArrowKey","computeOffset$1","rect","getBoundingClientRect","x","pageX","scrollX","y","pageY","scrollY","top","PointerHandler","computePosition_","offset","elem_","bounds","width","point","onMouseDown_","preventDefault","focus","onDocumentMouseMove_","onDocumentMouseUp_","data","removeEventListener","onTouchStart_","touch","targetTouches","clientX","clientY","lastTouch_","onTouchMove_","onTouchEnd_","passive","mapRange","start1","end1","start2","end2","getDecimalDigits","replace","constrainRange","loopRange","className$g","NumberTextView","onDraggingChange_","aox","adx","guideHeadElem_","setAttributeNS","guideBodyElem_","tooltipElem_","arrayPosition","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","headElem","tooltipElem","NumberTextController","onInputKeyDown_","baseStep_","onInputKeyUp_","onPointerDown_","originRawValue_","computeDraggingValue_","dx","onPointerMove_","onPointerUp_","ph","className$f","SliderView","trackElem","trackElement","SliderController","handlePointerEvent_","d","onPointerDownOrMove_","onKeyDown_","onKeyUp_","ptHandler_","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderController","sliderC_","textController","textC_","sliderProps","textProps","writePrimitive","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","findListItems","findStep","getSuitableDecimalDigits","getBaseStep","getSuitableDraggingScale","base","abs","floor","log10","className$d","CheckboxView","checked","wrapperElem","CheckboxController","createConstraint$5","lc","BooleanInputPlugin","reader","_args","writer","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","rgbToHsl","g","rp","gp","bp","cmax","cmin","h","s","l","hslToRgb","hp","sp","lp","rgbToHsv","hsvToRgb","vp","hslToHsv","sd","hsvToHsl","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","hsv","rgb","convertColorMode","components","fromMode","toMode","CONSTRAINT_MAP","isRgbColorComponent","Color","color","toRgbaObject","isRgbColorObject","mode_","comps1","comps_","comps2","mode","getComponents","opt_mode","rgbComps","className$b","ColorPickerView","allFocusableElements","elems","svPaletteView_","hPaletteView_","modeSelectElement","textViews","alphaViews_","palette","hsvElem","svElem","svPaletteView","hElem","hPaletteView","rgbElem","alphaViews","aElem","apElem","atElem","parseColorInputParams","picker","getBaseStepForColor","forAlpha","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","NOTATION_TO_PARSER_MAP","isNaN","mRgb","mRrggbb","getColorNotation","notation","subparser","CompositeColorParser","hasAlphaComponent","colorFromString","cv","black","zerofill","comp","hex","colorToHexRgbString","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","colorToFunctionalHslString","formatters","colorToFunctionalHslaString","NOTATION_TO_STRINGIFIER_MAP","getColorStringifier","className$a","APaletteView","leftColor","rightColor","gradientComps","colorElem_","background","previewElem_","backgroundColor","markerElem_","barElem","colorElem","markerElem","previewElem","APaletteController","className$9","createModeSelectElement","ColorTextView","modeElem_","textViews_","applyTextViews_","textsElem_","compElem","modeElem","modeMarkerElem","textsElem","colorMode","FORMATTER","MODE_TO_CONSTRAINT_MAP","createComponentController","draggingScale","ColorTextController","createComponentControllers_","cc","ccs","cs","pickedMode","onModeSelectChange_","ccs_","className$8","HPaletteView","HPaletteController","hue","className$7","CANVAS_RESOL","SvPaletteView","ctx","hsvComps","imgData","getImageData","iy","ix","putImageData","canvasElem","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","popC_","nextTarget","contains","onButtonClick_","pickerC_","onPopupChildBlur_","swatchC_","onPopupChildKeydown_","pickerC","colorFromObject","isColorObject","colorToRgbNumber","colorToRgbaNumber","numberToRgbColor","numberToRgbaColor","colorFromRgbNumber","colorFromRgbaNumber","createColorStringWriter","createColorNumberWriter","colorToNumber","writeRgbaColorObject","writeRgbColorObject","createColorObjectWriter","shouldSupportAlpha$1","inputParams","createFormatter$1","NumberColorInputPlugin","shouldSupportAlpha","isRgbaColorObject","ObjectColorInputPlugin","StringColorInputPlugin","stringifier","PointNdConstraint","asm_","toComponents","fromComponents","assembly","className$5","PointNdTextView","axisElem","createAxisController","axes","PointNdTextController","acs_","createStepConstraint","createRangeConstraint","createConstraint$4","findRange","estimateSuitableRange","NumberInputPlugin","format","Point2d","toObject","Point2dAssembly","className$4","Point2dView","className$3","Point2dPickerView","padElement","maxValue_","px","py","ipy","invertsY_","lineElem_","onFoldableChange_","invertsY","layout","padElem","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","dy","baseSteps_","onPadKeyUp_","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","point2dFromUnknown","writePoint2d","createDimensionConstraint$2","createConstraint$3","getSuitableMaxDimensionValue","getSuitableMaxValue","xc","yc","xr","yr","createAxis$2","shouldInvertY","yParams","inverted","Point2dInputPlugin","Point3d","z","Point3dAssembly","point3dFromUnknown","writePoint3d","createDimensionConstraint$1","createConstraint$2","createAxis$1","Point3dInputPlugin","Point4d","w","Point4dAssembly","point4dFromUnknown","writePoint4d","createDimensionConstraint","createConstraint$1","createAxis","Point4dInputPlugin","createConstraint","StringInputPlugin","Constants","monitor","defaultInterval","defaultLineCount","className$2","MultiLogView","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","formatter_","onValueUpdate_","textareaElem","lineCount","readOnly","MultiLogController","className$1","SingleLogView","values","lastValue","SingleLogController","BooleanMonitorPlugin","GraphCursor","index_","className1","GraphLogView","graphElement","maxIndex","minValue_","points","cursor_","tx","ty","onCursorChange_","GraphLogController","onGraphMouseLeave_","onGraphMouseMove_","offsetX","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","createFormatter","createTextMonitor","createGraphMonitor","_c","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","StringMonitorPlugin","multiline","InputBinding","targetValue","write_","createInputBindingController","valueArgs","MonitorBinding","reader_","createTicker","createMonitorBindingController","P","bindingArgs","PluginPool","getAll","pluginsMap_","blades","inputs","monitors","unshift","createDefaultPluginPool","ListApi","SliderApi","TextApi","ListBladePlugin","ic","exportPresetJson","targets","importPresetJson","preset","RootApi","importPreset","ibc","exportPreset","mbc","RootController","SliderBladePlugin","vc","TextBladePlugin","createDefaultWrapperElement","body","embedStyle","css","querySelector","styleElem","tpStyle","head","Pane","alreadyDisposed","containerElem_","usesDefaultWrapper_","parentElem","registerPlugin","bundle","plugins","embedPluginStyle_","setUpDefaultPlugins_","opt_config","container","VERSION","defineProperty","factory","$3e4dfb3336db3303$exports","$9cb056696796fbc0$export$2e2bcd8739ae039","receiver","privateMap","action","TypeError","$bc3c910e665b60ca$export$2e2bcd8739ae039","descriptor","call","$f6b67a977205f934$export$2e2bcd8739ae039","$f0210125d0770f9c$export$2e2bcd8739ae039","privateCollection","$f0e6013567203365$export$2e2bcd8739ae039","$131693d9f4df6831$export$2e2bcd8739ae039","writable","$5f461e65ba729053$export$2e2bcd8739ae039","$57ffde4c0031b911$export$2e2bcd8739ae039","privateSet","fn","$f63a3347462eeed5$export$2e2bcd8739ae039","$7bf585a5fb98c0bc$export$2e2bcd8739ae039","enumerable","configurable","compose$1","createFoldable","ButtonCellApi","TpButtonGridEvent","cell","ButtonGridApi","gc","cellControllers","size","cellToApiMap_","ButtonGridController","cellCs_","cellConfig","gridTemplateColumns","ButtonGridBladePlugin","cells","CubicBezierApi","interpolate","x1","x2","MAX_ITERATION","X_DELTA","CACHE_RESOLUTION","y1","cb","dt","curve","CubicBezier","y2","x01","y01","x12","y12","x23","y23","xr0","yr0","xr1","yr1","cache","CubicBezierAssembly","cubicBezierToString","COMPS_EMPTY","cubicBezierFromString","n","CubicBezierView","iconElem","CubicBezierPickerView","graphElem","waitToBeAddedToDom","elem1","ob","MutationObserver","ml","addedNodes","disconnect","observe","attributes","childList","subtree","CubicBezierGraphView","getVertMargin_","valueToPosition","vm","positionToValue","guideElem_","p1","p2","bezier","vElem","vectorElems_","handleElems_","previewElement","sel_","selection","TICK_COUNT","PREVIEW_DELAY","PREVIEW_DURATION","CubicBezierPreviewView","play","stop","updateMarker_","startTime_","Date","getTime","stopped_","requestAnimationFrame","onTimer_","onDispose_","progress","ticksElem_","ticksElem","getDistance","sqrt","lockAngle","atan2","la","cos","sin","CubicBezierGraphController","prevView_","updateValue_","locksAngle","d1","d2","xStep","yStep","stopImmediatePropagation","ptHandler","CubicBezierPickerController","gc_","tc_","axis","xAxis","yAxis","CubicBezierController","CubicBezierBladePlugin","FpsGraphBladeApi","begin","end","MAX_TIMESTAMPS","Fpswatch","duration","duration_","fps","fps_","now","start_","calculateFps_","nowTime","timestamps_","ts","frameCount_","frameCount","time","compactTimestamps_","len","df","FpsView","unitElement","FpsGraphController","stopwatch_","ticker_","graphC_","FpsGraphBladePlugin","_d","Interval","IntervalAssembly","IntervalConstraint","_e","_f","_g","_h","edge","RangeSliderTextView","RangeSliderView","valueToX_","update","xs","barElement","knobElements","knobElems","RangeSliderController","ofs_","grabbing_","valueFromData_","pmin","pmax","grabOffset_","applyPointToValue_","RangeSliderTextController","sc_","intervalFromUnknown","writeInterval","IntervalInputPlugin","exValue","midValue","RadioCellApi","TpRadioGridChangeEvent","RadioGridApi","findCellByValue","capi","RadioView","RadioController","RadioGridController","cellValues_","onCellInputChange_","groupName","RadioGridBladePlugin","$e2e8506aa5870950$exports","$0526ef4aedbd7991$export$b67359430d3b1b2","Float32Array","$0526ef4aedbd7991$export$5ada478c8a628231","random","$8c678e942362b0b9$export$185802fd694ee1f5","out","$8c678e942362b0b9$export$9cd59f9826255e47","$8c678e942362b0b9$export$784d13d8ee351f07","$8c678e942362b0b9$export$a82be99ed2a44a7d","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","$8c678e942362b0b9$export$adaa4cf7ef1b65be","$8c678e942362b0b9$export$f0954fd7d5368655","$8c678e942362b0b9$export$9cb09a71b7d66923","a01","a02","a03","a12","a13","a23","$8c678e942362b0b9$export$6897c284b6f9f4dc","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","$8c678e942362b0b9$export$33f3c024b4ae00a1","$8c678e942362b0b9$export$a04698f914c55ed9","$8c678e942362b0b9$export$2060d2db72cce88f","b0","b1","b2","b3","$8c678e942362b0b9$export$d73ee8ef04f5226a","$8c678e942362b0b9$export$dcdf75081b88279d","$8c678e942362b0b9$export$bb628a54ab399bc9","b12","b20","b21","b22","hypot","$8c678e942362b0b9$export$a59c8716592e09af","$8c678e942362b0b9$export$cf71e4d4ca4d1cfd","$8c678e942362b0b9$export$ea6eae3365de5b9c","$8c678e942362b0b9$export$bc9e79e74e9fddf6","$8c678e942362b0b9$export$832ca188ffb1955d","$8c678e942362b0b9$export$926fc125ff3c666c","$8c678e942362b0b9$export$dd47cc2f828c32ef","$8c678e942362b0b9$export$7dc997d67d2b7f33","$8c678e942362b0b9$export$ad5ddaedc8f405df","$8c678e942362b0b9$export$9545ac307f2a256b","q","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","$8c678e942362b0b9$export$ff497f2be31cc6a","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","$8c678e942362b0b9$export$202e99f82f7f0395","mat","$8c678e942362b0b9$export$71dc54d92bd04b57","$8c678e942362b0b9$export$df3937d3b537df0a","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","$8c678e942362b0b9$export$ddf9c55c9f2be172","sx","sy","sz","$8c678e942362b0b9$export$1def1f860edc4b1f","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","$8c678e942362b0b9$export$2ff2bbe382249af7","yx","zx","zy","$8c678e942362b0b9$export$89b5708c387cac6c","bottom","near","far","rl","tb","nf","$8c678e942362b0b9$export$4cf19729ec9a96b8","fovy","aspect","f","tan","Infinity","arguments","$8c678e942362b0b9$export$541149539f3a4684","$8c678e942362b0b9$export$294bba99a6af0c0c","$8c678e942362b0b9$export$58ae211c788e338f","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","$8c678e942362b0b9$export$c5f65ef3eb668f27","lr","bt","$8c678e942362b0b9$export$4f2167e613cfc87b","$8c678e942362b0b9$export$b1d31ea7b4d854e","$8c678e942362b0b9$export$d924e14fd6d9aa66","eye","center","up","x0","y0","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","$8c678e942362b0b9$export$aa67782f4dc9e52c","$8c678e942362b0b9$export$42d51816ce590c93","$8c678e942362b0b9$export$326827e8268e9cdb","$8c678e942362b0b9$export$e16d8520af44a096","$8c678e942362b0b9$export$4e2d2ead65e5f7e3","$8c678e942362b0b9$export$c697bed75648cdb7","$8c678e942362b0b9$export$553579f63bdd7137","$8c678e942362b0b9$export$f2599a5cf1109d8","$8c678e942362b0b9$export$e9bab7fafb253603","a0","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","$8c678e942362b0b9$export$6e3a27864ab166fe","$8c678e942362b0b9$export$f93b5905241a7cca","$b4d34f945b36eb1f$export$185802fd694ee1f5","$b4d34f945b36eb1f$export$9cd59f9826255e47","$b4d34f945b36eb1f$export$f24224f1c91d8156","$b4d34f945b36eb1f$export$a82be99ed2a44a7d","$b4d34f945b36eb1f$export$784d13d8ee351f07","$b4d34f945b36eb1f$export$adaa4cf7ef1b65be","$b4d34f945b36eb1f$export$e16d8520af44a096","$b4d34f945b36eb1f$export$4e2d2ead65e5f7e3","$b4d34f945b36eb1f$export$2060d2db72cce88f","$b4d34f945b36eb1f$export$cd007d971a5a2143","$b4d34f945b36eb1f$export$803ce6b71a0a94b2","ceil","$b4d34f945b36eb1f$export$a3fe094919f356fd","$b4d34f945b36eb1f$export$96ec731ed4dcb222","$b4d34f945b36eb1f$export$8960430cfd85939f","$b4d34f945b36eb1f$export$2077e0241d6afd3c","$b4d34f945b36eb1f$export$dcdf75081b88279d","$b4d34f945b36eb1f$export$19cedf1da84ba854","$b4d34f945b36eb1f$export$9f17032d917177de","$b4d34f945b36eb1f$export$88e6ebb4fe54f538","$b4d34f945b36eb1f$export$ab44e1323ffc8376","$b4d34f945b36eb1f$export$aef51622e549b8b0","$b4d34f945b36eb1f$export$70ae2c07e401031b","$b4d34f945b36eb1f$export$a3295358bff77e","$b4d34f945b36eb1f$export$fc1400facf92c78","$b4d34f945b36eb1f$export$94132a0e348806d4","$b4d34f945b36eb1f$export$bb646b20bb93d339","$b4d34f945b36eb1f$export$3a89f8d6f6bf6c9f","$b4d34f945b36eb1f$export$ae8865616f30561c","factorTimes2","factor1","factor2","factor3","factor4","$b4d34f945b36eb1f$export$b9c5f84610baddaf","inverseFactor","inverseFactorTimesTwo","$b4d34f945b36eb1f$export$4385e60b38654f68","zScale","$b4d34f945b36eb1f$export$5ffbd13800309d59","$b4d34f945b36eb1f$export$f0bfa0a0024626ee","$b4d34f945b36eb1f$export$c32adef9e939ce85","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","$b4d34f945b36eb1f$export$a59c8716592e09af","$b4d34f945b36eb1f$export$cf71e4d4ca4d1cfd","$b4d34f945b36eb1f$export$ea6eae3365de5b9c","$b4d34f945b36eb1f$export$944b09d2ad10b378","mag","cosine","acos","$b4d34f945b36eb1f$export$7f9972325ebfd559","$b4d34f945b36eb1f$export$42d51816ce590c93","$b4d34f945b36eb1f$export$f2599a5cf1109d8","$b4d34f945b36eb1f$export$e9bab7fafb253603","vec","$b4d34f945b36eb1f$export$f93b5905241a7cca","$b4d34f945b36eb1f$export$6e3a27864ab166fe","$b4d34f945b36eb1f$export$159d9494db57879b","$b4d34f945b36eb1f$export$6c4a311cc157c764","$b4d34f945b36eb1f$export$2422cd6c492a8b3a","$b4d34f945b36eb1f$export$99d8dd3f32a3435","$b4d34f945b36eb1f$export$4b80e395e36b5a56","stride","count","arg","$670b89df6ca628ce$export$f24224f1c91d8156","$670b89df6ca628ce$export$ab44e1323ffc8376","$b05eccd75d26bd5a$export$185802fd694ee1f5","$b05eccd75d26bd5a$export$f0954fd7d5368655","$b05eccd75d26bd5a$export$4286ddefc8f49512","$b05eccd75d26bd5a$export$3f70be5e7d7dc51","out_axis","$b05eccd75d26bd5a$export$b363da9ded343252","dotproduct","$b05eccd75d26bd5a$export$94132a0e348806d4","$b05eccd75d26bd5a$export$2060d2db72cce88f","$b05eccd75d26bd5a$export$a59c8716592e09af","$b05eccd75d26bd5a$export$cf71e4d4ca4d1cfd","$b05eccd75d26bd5a$export$ea6eae3365de5b9c","$b05eccd75d26bd5a$export$fb72b72e8d764d4e","$b05eccd75d26bd5a$export$b310ec824aaee37f","et","exp","$b05eccd75d26bd5a$export$876cb1b29620556f","log","$b05eccd75d26bd5a$export$9c297f60e22e3389","$b05eccd75d26bd5a$export$dcdf75081b88279d","$b05eccd75d26bd5a$export$1544d9bc2995de08","omega","cosom","sinom","scale0","scale1","$b05eccd75d26bd5a$export$4385e60b38654f68","u1","u2","u3","sqrt1MinusU1","sqrtU1","$b05eccd75d26bd5a$export$6897c284b6f9f4dc","invDot","$b05eccd75d26bd5a$export$7679f47e72c62560","$b05eccd75d26bd5a$export$272a1eb8e5a4b55b","fRoot","fTrace","j","k","$b05eccd75d26bd5a$export$7a404a587ea85af","halfToRad","cx","cy","cz","$b05eccd75d26bd5a$export$42d51816ce590c93","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","$b05eccd75d26bd5a$export$9cd59f9826255e47","$b05eccd75d26bd5a$export$a82be99ed2a44a7d","$b05eccd75d26bd5a$export$784d13d8ee351f07","$b05eccd75d26bd5a$export$adaa4cf7ef1b65be","$b05eccd75d26bd5a$export$e16d8520af44a096","$b05eccd75d26bd5a$export$6e3a27864ab166fe","$b05eccd75d26bd5a$export$3a89f8d6f6bf6c9f","$b05eccd75d26bd5a$export$f24224f1c91d8156","$b05eccd75d26bd5a$export$fc1400facf92c78","$b05eccd75d26bd5a$export$ab44e1323ffc8376","$b05eccd75d26bd5a$export$99d8dd3f32a3435","$b05eccd75d26bd5a$export$a3295358bff77e","$670b89df6ca628ce$export$fc1400facf92c78","$b05eccd75d26bd5a$export$f2599a5cf1109d8","$b05eccd75d26bd5a$export$e9bab7fafb253603","$b05eccd75d26bd5a$export$72d66f5842c00904","$b05eccd75d26bd5a$export$699b0866ca50f6cb","$b05eccd75d26bd5a$export$937ca0a544b2d712","$451593d984d40c98$export$185802fd694ee1f5","$451593d984d40c98$export$9cd59f9826255e47","$451593d984d40c98$export$a82be99ed2a44a7d","$451593d984d40c98$export$784d13d8ee351f07","$451593d984d40c98$export$adaa4cf7ef1b65be","$451593d984d40c98$export$e16d8520af44a096","$451593d984d40c98$export$4e2d2ead65e5f7e3","$451593d984d40c98$export$2060d2db72cce88f","$451593d984d40c98$export$cd007d971a5a2143","$451593d984d40c98$export$803ce6b71a0a94b2","$451593d984d40c98$export$a3fe094919f356fd","$451593d984d40c98$export$96ec731ed4dcb222","$451593d984d40c98$export$8960430cfd85939f","$451593d984d40c98$export$2077e0241d6afd3c","$451593d984d40c98$export$dcdf75081b88279d","$451593d984d40c98$export$19cedf1da84ba854","$451593d984d40c98$export$9f17032d917177de","$451593d984d40c98$export$88e6ebb4fe54f538","$451593d984d40c98$export$f24224f1c91d8156","$451593d984d40c98$export$ab44e1323ffc8376","$451593d984d40c98$export$aef51622e549b8b0","$451593d984d40c98$export$70ae2c07e401031b","$451593d984d40c98$export$a3295358bff77e","$451593d984d40c98$export$fc1400facf92c78","$451593d984d40c98$export$94132a0e348806d4","$451593d984d40c98$export$bb646b20bb93d339","$451593d984d40c98$export$3a89f8d6f6bf6c9f","$451593d984d40c98$export$4385e60b38654f68","$451593d984d40c98$export$b732428d73874bfc","$451593d984d40c98$export$3e55bc4b3707dfd3","$451593d984d40c98$export$f0bfa0a0024626ee","$451593d984d40c98$export$5ffbd13800309d59","$451593d984d40c98$export$bb628a54ab399bc9","p0","sinC","cosC","$451593d984d40c98$export$944b09d2ad10b378","$451593d984d40c98$export$7f9972325ebfd559","$451593d984d40c98$export$42d51816ce590c93","$451593d984d40c98$export$f2599a5cf1109d8","$451593d984d40c98$export$e9bab7fafb253603","$451593d984d40c98$export$f93b5905241a7cca","$451593d984d40c98$export$6e3a27864ab166fe","$451593d984d40c98$export$159d9494db57879b","$451593d984d40c98$export$6c4a311cc157c764","$451593d984d40c98$export$2422cd6c492a8b3a","$451593d984d40c98$export$99d8dd3f32a3435","$451593d984d40c98$export$4b80e395e36b5a56","$84fc325cd00c80ec$export$5dc878ab9e1f1ddf","deltaTime","timeScale","pointerDown","damping","followPos","pointerPos","delta","prevFollowPos","speed","phi","theta","decc","prevRotation","camera","rotation","velocity","thetaLimitUp","maxLatitude","thetaLimitDown","minLatitude","$b05eccd75d26bd5a$exports","fromEuler","orbit","$b4d34f945b36eb1f$exports","transformQuat","position","distance","updateCallback","canvas","pointerDownPos","touchAction","pointerDownCameraUp","pointerDownRotation","$d9afdec45b673650$export$327d24a04cd0dc17","gl","shaderSources","transformFeedbackVaryings","attribLocations","program","createProgram","VERTEX_SHADER","FRAGMENT_SHADER","ndx","shader","source","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","error","getShaderInfoLog","deleteShader","$d9afdec45b673650$export$1750aa77609e1fb","attachShader","SEPARATE_ATTRIBS","attrib","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","$d9afdec45b673650$export$fc5893f94808dc8c","bufLocNumElmPairs","indices","va","createVertexArray","bindVertexArray","loc","numElem","bindBuffer","ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","indexBuffer","createBuffer","ELEMENT_ARRAY_BUFFER","bufferData","Uint16Array","STATIC_DRAW","$d9afdec45b673650$export$b6ff7cc6c52392fa","sizeOrData","usage","buf","$d9afdec45b673650$export$f4cc01e15531578c","buffers","tf","createTransformFeedback","bindTransformFeedback","TRANSFORM_FEEDBACK","bindBufferBase","TRANSFORM_FEEDBACK_BUFFER","$d9afdec45b673650$export$12eb0ae1f2459d74","fbo","bindFramebuffer","FRAMEBUFFER","viewport","$d9afdec45b673650$export$8b5dc4d905cef78f","minFilter","magFilter","wrapS","wrapT","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","$387736c3aaffeb2a$export$ec4bceef241d2e36","frames","enable","RASTERIZER_DISCARD","useProgram","currentRenderState","computeVAO","uniform1f","locations","u_deltaTime","uniform1i","u_frames","transformFeedback","beginTransformFeedback","POINTS","drawArrays","NUM_PARTICLES","endTransformFeedback","disable","resultPositionBufferIndex","currentState","nextRenderState","$parcel$interopDefault","a_oldPosition","getAttribLocation","a_oldVelocity","getUniformLocation","fill","flat","velocities","positionBuffers","DYNAMIC_DRAW","velocityBuffers","compute1VAO","compute2VAO","transformFeedback1","transformFeedback2","positionBuffer","resultPositionBuffer","$14c68fae3386ab75$export$418f4e74cfe71a96","depth","radius","radiusSegments","edgeHalfWidth","edgeHalfHeight","edgeHalfDepth","rs1","totalVertexCount","normals","cornerVerts","cornerNormals","vertex","vertexPool","normalPool","lastVertex","cornerVertNumber","cornerLayout","fromValues","PIhalf","cornerOffset","cosVa","sinVa","ha","vert","clone","scale","norm","normalize","j1","multiply","flips","lastRowOffset","i1","r1","r2","u","i2","cOffset","cRowOffset","needsFlip","cStartsW","cEndsW","i3","cStart","cEnd","cStartsD","cEndsD","i4","cStartD","cEndD","urs1","u1rs1","i5","vertices","_time","WeakMap","_frames","_deltaTime","_isDestroyed","_render","WeakSet","_init","_initEnvMap","_initOrbitControls","_resizeTextures","_updateCameraMatrix","_updateProjectionMatrix","_initTweakpane","_createTweakpaneSlider","$c4c095b55cf1e9a2$export$df7c18b74ee18f30","resize","displayWidth","clientWidth","displayHeight","needResize","$d9afdec45b673650$export$4d986a341d0b1b6c","drawingBufferWidth","drawingBufferHeight","resizeTextures","updateProjectionMatrix","run","fpsGraph","particlesPositionBufferIndex","particles","control","render","destroy","pane","oninit","matrix","$8c678e942362b0b9$exports","init","particleProgram","particleFBO","particleFBOSize","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","DEPTH_TEST","CULL_FACE","BLEND","blendFunc","SRC_ALPHA","DST_ALPHA","uniformMatrix4fv","particleLocations","u_worldMatrix","drawUniforms","u_viewMatrix","u_projectionMatrix","particleVAOs","colorProgram","colorLocations","uniform3f","u_cameraPosition","worldInverseTransposeMatrix","invert","transpose","u_worldInverseTransposeMatrix","activeTexture","TEXTURE0","particleTexture","u_particleTexture","TEXTURE1","envMapTexture","u_envMapTexture","capsuleVAO","drawElements","TRIANGLES","capsuleBuffers","UNSIGNED_SHORT","antialias","a_position","a_normal","a_uv","rotate","translate","quadPositions","quadBuffers","quadVAO","capsuleGeometry","normal","clientSize","$451593d984d40c98$exports","LINEAR","REPEAT","texImage2D","RGBA","UNSIGNED_BYTE","colorAttachements","depthAttachement","createFramebuffer","drawBuffers","attachmentPoint","framebufferTexture2D","DEPTH_ATTACHMENT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","$d9afdec45b673650$export$366d1e3e32f5a700","initEnvMap","updateCameraMatrix","initOrbitControls","initTweakpane","MIRRORED_REPEAT","img","Image","src","URL","$731e2e8817bc200b$exports","bindRenderbuffer","RENDERBUFFER","targetTo","perspective","maxFar","cameraFolder","createTweakpaneSlider","propName","stepSize","resolve","import","meta","url","$6f40c3a58f594b58$var$queryString","window","location","search","$6f40c3a58f594b58$var$sketch","$6f40c3a58f594b58$var$resizeTimeoutId","$6f40c3a58f594b58$var$DEBUG","URLSearchParams","sketch","clearTimeout","setTimeout"],"version":3,"file":"index.5b6fb764.js.map"}