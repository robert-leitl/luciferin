function t(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},r={},s=n.parcelRequire3eb7;null==s&&(s=function(t){if(t in i)return i[t].exports;if(t in r){var e=r[t];delete r[t];var n={id:t,exports:{}};return i[t]=n,e.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s},s.register=function(t,e){r[t]=e},n.parcelRequire3eb7=s),s.register("kyEFX",(function(e,n){var i,r;t(e.exports,"register",(function(){return i}),(function(t){return i=t})),t(e.exports,"resolve",(function(){return r}),(function(t){return r=t}));var s={};i=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)s[e[n]]=t[e[n]]},r=function(t){var e=s[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),s("kyEFX").register(JSON.parse('{"e5iw0":"index.eb863459.js","4MRyY":"studio024.20e5a2d1.jpg"}'));var o={};
/*! Tweakpane 3.0.8 (c) 2016 cocopon, licensed under the MIT license. */!function(t){class e{toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}constructor(t){const[e,n]=t.split("-"),i=e.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=null!=n?n:null}}class n{get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}constructor(t){this.controller_=t}}class i{constructor(t){this.target=t}}class r extends i{constructor(t,e,n,i){super(t),this.value=e,this.presetKey=n,this.last=null==i||i}}class s extends i{constructor(t,e,n){super(t),this.value=e,this.presetKey=n}}class o extends i{constructor(t,e){super(t),this.expanded=e}}function a(t){return t}function l(t){return null==t}function c(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const p={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class u{static alreadyDisposed(){return new u({type:"alreadydisposed"})}static notBindable(){return new u({type:"notbindable"})}static propertyNotFound(t){return new u({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new u({type:"shouldneverhappen"})}constructor(t){var e;this.message=null!==(e=p[t.type](a(t.context)))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}}class h{static isBindable(t){return null!==t&&"object"==typeof t}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,e){const n=this.read();if(!h.isBindable(n))throw u.notBindable();if(!(t in n))throw u.propertyNotFound(t);n[t]=e}constructor(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=null!=n?n:e}}class d extends n{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get title(){var t;return null!==(t=this.controller_.valueController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.valueController.props.set("title",t)}on(t,e){const n=e.bind(this);return this.controller_.valueController.emitter.on(t,(()=>{n(new i(this))})),this}}class v{on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}constructor(){this.observers_={}}}const m="tp";function b(t){return(e,n)=>[m,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}function f(t,e){return n=>e(t(n))}function _(t){return t.rawValue}function g(t,e){t.emitter.on("change",f(_,e)),e(t.rawValue)}function w(t,e,n){g(t.value(e),n)}function x(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function y(t,e){return n=>{x(t,e,n)}}function C(t,e){g(t,(t=>{e.textContent=null!=t?t:""}))}const P=b("btn");class E{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(P()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(P("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(P("t")),C(e.props.value("title"),i),this.buttonElement.appendChild(i)}}class M{onClick_(){this.emitter.emit("click",{sender:this})}constructor(t,e){this.emitter=new v,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new E(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}}class k{get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,rawValue:i,sender:this}))}constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new v,this.rawValue_=t}}class V{get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}constructor(t){this.emitter=new v,this.value_=t}}function L(t,e){const n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new k(t,e):new V(t)}class A{static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:L(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new A(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}constructor(t){this.emitter=new v,this.valMap_=t;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}}function S(t,e){return a(Object.keys(e).reduce(((n,i)=>{if(void 0===n)return;const r=(0,e[i])(t[i]);return r.succeeded?Object.assign(Object.assign({},n),{[i]:r.value}):void 0}),{}))}function T(t,e){return t.reduce(((t,n)=>{if(void 0===t)return;const i=e(n);return i.succeeded&&void 0!==i.value?[...t,i.value]:void 0}),[])}function z(t){return null!==t&&"object"==typeof t}function R(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function D(t){return{custom:e=>R(e)(t),boolean:R((t=>"boolean"==typeof t?t:void 0))(t),number:R((t=>"number"==typeof t?t:void 0))(t),string:R((t=>"string"==typeof t?t:void 0))(t),function:R((t=>"function"==typeof t?t:void 0))(t),constant:e=>R((t=>t===e?e:void 0))(t),raw:R((t=>t))(t),object:e=>R((t=>{if(z(t))return S(t,e)}))(t),array:e=>R((t=>{if(Array.isArray(t))return T(t,e)}))(t)}}const U={optional:D(!0),required:D(!1)};function N(t,e){const n=U.required.object(e)(t);return n.succeeded?n.value:void 0}function I(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}function B(){return["veryfirst","first","last","verylast"]}const F=b(""),O={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class j{get parent(){return this.parent_}constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{B().forEach((t=>{e.classList.remove(F(void 0,O[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(F(void 0,O[t]))}))})),this.viewProps.handleDispose((()=>{I(e)}))}}const K="http://www.w3.org/2000/svg";function q(t){t.offsetHeight}function H(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function $(t){return void 0!==t.ontouchstart}function G(){return new Function("return this")()}function Y(){return a(G()).document}function X(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d"):null}const W={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Z(t,e){const n=t.createElementNS(K,"svg");return n.innerHTML=W[e],n}function Q(t,e,n){t.insertBefore(e,t.children[n])}function J(t){t.parentElement&&t.parentElement.removeChild(t)}function tt(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function et(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function nt(t){return t.relatedTarget?a(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const it=b("lbl");function rt(t,e){const n=t.createDocumentFragment();return e.split("\n").map((e=>t.createTextNode(e))).forEach(((e,i)=>{i>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}class st{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(it()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(it("l")),w(e.props,"label",(e=>{l(e)?this.element.classList.add(it(void 0,"nol")):(this.element.classList.remove(it(void 0,"nol")),et(n),n.appendChild(rt(t,e)))})),this.element.appendChild(n),this.labelElement=n;const i=t.createElement("div");i.classList.add(it("v")),this.element.appendChild(i),this.valueElement=i}}class ot extends j{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new st(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const at={id:"button",type:"blade",accept(t){const e=U,n=N(t,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return n?{params:n}:null},controller:t=>new ot(t.document,{blade:t.blade,props:A.fromObject({label:t.params.label}),valueController:new M(t.document,{props:A.fromObject({title:t.params.title}),viewProps:t.viewProps})}),api:t=>t.controller instanceof ot&&t.controller.valueController instanceof M?new d(t.controller):null};class lt extends j{constructor(t){super(t),this.value=t.value}}function ct(){return new A({positions:L([],{equals:c})})}class pt extends A{static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=A.createCore(e);return new pt(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!l(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const n=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};w(this,"expanded",n),w(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}constructor(t){super(t)}}function ut(t,e){let n=0;return H(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),q(e),n=e.clientHeight,t.set("temporaryExpanded",null),q(e)})),n}function ht(t,e){e.style.height=t.styleHeight}function dt(t,e){t.value("expanded").emitter.on("beforechange",(()=>{t.set("completed",!1),l(t.get("expandedHeight"))&&t.set("expandedHeight",ut(t,e)),t.set("shouldFixHeight",!0),q(e)})),t.emitter.on("change",(()=>{ht(t,e)})),ht(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&t.cleanUpTransition()}))}class vt extends n{constructor(t,e){super(t),this.rackApi_=e}}function mt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function bt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function ft(t,e){const n=e||{};return t.addBlade(Object.assign(Object.assign({},n),{view:"separator"}))}function _t(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}class gt{get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw u.shouldNeverHappen();const n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);const i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach((t=>{this.cache_.add(t)}))),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const n=this.extract_(t);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}constructor(t){this.emitter=new v,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}}class wt extends n{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){const e=t.sender.target.read();this.emitter_.emit("change",{event:new r(this,a(e),this.controller_.binding.target.presetKey,t.options.last)})}constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new v,this.controller_.binding.emitter.on("change",this.onBindingChange_)}}class xt extends ot{constructor(t,e){super(t,e),this.binding=e.binding}}class yt extends n{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){const e=t.sender.target.read();this.emitter_.emit("update",{event:new s(this,a(e),this.controller_.binding.target.presetKey)})}constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new v,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}}class Ct extends ot{constructor(t,e){super(t,e),this.binding=e.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose((()=>{this.binding.dispose()}))}}function Pt(t){return t instanceof kt?t.apiSet_:t instanceof vt?t.rackApi_.apiSet_:null}function Et(t,e){const n=t.find((t=>t.controller_===e));if(!n)throw u.shouldNeverHappen();return n}function Mt(t,e,n){if(!h.isBindable(t))throw u.notBindable();return new h(t,e,n)}class kt extends n{get children(){return this.controller_.rack.children.map((t=>Et(this.apiSet_,t)))}addInput(t,e,n){const i=n||{},r=this.controller_.view.element.ownerDocument,s=this.pool_.createInput(r,Mt(t,e,i.presetKey),i),o=new wt(s);return this.add(o,i.index)}addMonitor(t,e,n){const i=n||{},r=this.controller_.view.element.ownerDocument,s=this.pool_.createMonitor(r,Mt(t,e),i),o=new yt(s);return a(this.add(o,i.index))}addFolder(t){return bt(this,t)}addButton(t){return mt(this,t)}addSeparator(t){return ft(this,t)}addTab(t){return _t(this,t)}add(t,e){this.controller_.rack.add(t.controller_,e);const n=this.apiSet_.find((e=>e.controller_===t.controller_));return n&&this.apiSet_.remove(n),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){const e=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(e,t),i=this.pool_.createBladeApi(n);return this.add(i,t.index)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpApi_(t){this.apiSet_.find((e=>e.controller_===t))||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){const e=Et(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}onRackInputChange_(t){const e=t.bladeController;if(e instanceof xt){const n=Et(this.apiSet_,e),i=e.binding;this.emitter_.emit("change",{event:new r(n,a(i.target.read()),i.target.presetKey,t.options.last)})}else if(e instanceof lt){const n=Et(this.apiSet_,e);this.emitter_.emit("change",{event:new r(n,e.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof Ct))throw u.shouldNeverHappen();const e=Et(this.apiSet_,t.bladeController),n=t.bladeController.binding;this.emitter_.emit("update",{event:new s(e,a(n.target.read()),n.target.presetKey)})}constructor(t,e){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new v,this.apiSet_=new gt(Pt),this.pool_=e;const n=this.controller_.rack;n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),n.emitter.on("inputchange",this.onRackInputChange_),n.emitter.on("monitorupdate",this.onRackMonitorUpdate_),n.children.forEach((t=>{this.setUpApi_(t)}))}}class Vt extends vt{get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(t){this.controller_.props.set("title",t)}get children(){return this.rackApi_.children}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}constructor(t,e){super(t,new kt(t.rackController,e)),this.emitter_=new v,this.controller_.foldable.value("expanded").emitter.on("change",(t=>{this.emitter_.emit("fold",{event:new o(this,t.sender.rawValue)})})),this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})}))}}class Lt extends j{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class At{constructor(t,e){const n=b(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}function St(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof xt&&i.binding===e)return i}return null}function Tt(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof Ct&&i.binding===e)return i}return null}function zt(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof lt&&i.value===e)return i}return null}function Rt(t){return t instanceof Nt?t.rack:t instanceof Lt?t.rackController.rack:null}function Dt(t){const e=Rt(t);return e?e.bcSet_:null}class Ut{get children(){return this.bcSet_.items}add(t,e){t.parent&&t.parent.remove(t),t.parent_=this,this.bcSet_.add(t,e)}remove(t){t.parent_=null,this.bcSet_.remove(t)}find(t){return a(this.bcSet_.allItems().filter((e=>e instanceof t)))}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),!e)return;const n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof xt)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof Ct)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof lt)n.value.emitter.on("change",this.onChildValueChange_);else{const t=Rt(n);if(t){const e=t.emitter;e.on("layout",this.onDescendantLayout_),e.on("inputchange",this.onDescendantInputChange_),e.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),!e)return;const n=t.item;if(n instanceof xt)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof Ct)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof lt)n.value.emitter.off("change",this.onChildValueChange_);else{const t=Rt(n);if(t){const e=t.emitter;e.off("layout",this.onDescendantLayout_),e.off("inputchange",this.onDescendantInputChange_),e.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const t=this.bcSet_.items.filter((t=>!t.viewProps.get("hidden"))),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach((t=>{const i=[];t===e&&(i.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||i.push("veryfirst")),t===n&&(i.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||i.push("verylast")),t.blade.set("positions",i)}))}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((t=>t.viewProps.get("disposed"))).forEach((t=>{this.bcSet_.remove(t)}))}onChildInputChange_(t){const e=St(this.find(xt),t.sender);if(!e)throw u.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onChildMonitorUpdate_(t){const e=Tt(this.find(Ct),t.sender);if(!e)throw u.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}onChildValueChange_(t){const e=zt(this.find(lt),t.sender);if(!e)throw u.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}constructor(t){var e;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new v,this.blade_=null!=t?t:null,null===(e=this.blade_)||void 0===e||e.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new gt(Dt),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}}class Nt extends j{onRackAdd_(t){t.isRoot&&Q(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&J(t.bladeController.view.element)}constructor(t,e){super(Object.assign(Object.assign({},e),{view:new At(t,{viewName:"brk",viewProps:e.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const n=new Ut(e.root?void 0:e.blade);n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose((()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)}))}}const It=b("cnt");class Bt{constructor(t,e){this.className_=b(e.viewName||"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),It()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),w(this.foldable_,"completed",y(this.element,this.className_(void 0,"cpl")));const n=t.createElement("button");n.classList.add(this.className_("b")),w(e.props,"title",(t=>{l(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))})),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(this.className_("t")),C(e.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i;const r=t.createElement("div");r.classList.add(this.className_("m")),this.buttonElement.appendChild(r);const s=e.containerElement;s.classList.add(this.className_("c")),this.element.appendChild(s),this.containerElement=s}}class Ft extends Lt{get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}constructor(t,e){var n;const i=pt.create(null===(n=e.expanded)||void 0===n||n),r=new Nt(t,{blade:e.blade,root:e.root,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:r,view:new Bt(t,{containerElement:r.view.element,foldable:i,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=i,dt(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",(()=>{this.foldable.cleanUpTransition()})),this.rackController.rack.emitter.on("remove",(()=>{this.foldable.cleanUpTransition()})),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}}const Ot={id:"folder",type:"blade",accept(t){const e=U,n=N(t,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return n?{params:n}:null},controller:t=>new Ft(t.document,{blade:t.blade,expanded:t.params.expanded,props:A.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof Ft?new Vt(t.controller,t.pool):null};class jt extends lt{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new st(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Kt extends n{}const qt=b("spr");class Ht{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(qt()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("hr");n.classList.add(qt("r")),this.element.appendChild(n)}}class $t extends j{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Ht(t,{viewProps:e.viewProps})}))}}const Gt={id:"separator",type:"blade",accept(t){const e=N(t,{view:U.required.constant("separator")});return e?{params:e}:null},controller:t=>new $t(t.document,{blade:t.blade,viewProps:t.viewProps}),api:t=>t.controller instanceof $t?new Kt(t.controller):null},Yt=b("");function Xt(t,e){return y(t,Yt(void 0,e))}class Wt extends A{static create(t){var e,n;const i=null!=t?t:{},r={disabled:null!==(e=i.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=i.hidden)&&void 0!==n&&n},s=A.createCore(r);return new Wt(s)}bindClassModifiers(t){w(this,"disabled",Xt(t,"disabled")),w(this,"hidden",Xt(t,"hidden"))}bindDisabled(t){w(this,"disabled",(e=>{t.disabled=e}))}bindTabIndex(t){w(this,"disabled",(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}constructor(t){super(t)}}const Zt=b("tbi");class Qt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Zt()),e.viewProps.bindClassModifiers(this.element),w(e.props,"selected",(t=>{t?this.element.classList.add(Zt(void 0,"sel")):this.element.classList.remove(Zt(void 0,"sel"))}));const n=t.createElement("button");n.classList.add(Zt("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(Zt("t")),C(e.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class Jt{onClick_(){this.emitter.emit("click",{sender:this})}constructor(t,e){this.emitter=new v,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new Qt(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}}class te{get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}constructor(t,e){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Jt(t,{props:e.itemProps,viewProps:Wt.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Nt(t,{blade:ct(),viewProps:Wt.create()}),this.props=e.props,w(this.props,"selected",(t=>{this.itemController.props.set("selected",t),this.contentController.viewProps.set("hidden",!t)}))}}class ee{get title(){var t;return null!==(t=this.controller_.itemController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.itemController.props.set("title",t)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addBlade(t){return this.rackApi_.addBlade(t)}constructor(t,e){this.controller_=t,this.rackApi_=e}}class ne extends vt{get pages(){return this.controller_.pageSet.items.map((t=>{const e=this.pageApiMap_.get(t);if(!e)throw u.shouldNeverHappen();return e}))}addPage(t){const e=this.controller_.view.element.ownerDocument,n=new te(e,{itemProps:A.fromObject({selected:!1,title:t.title}),props:A.fromObject({selected:!1})});this.controller_.add(n,t.index);const i=this.pageApiMap_.get(n);if(!i)throw u.shouldNeverHappen();return i}removePage(t){this.controller_.remove(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpPageApi_(t){const e=this.rackApi_.apiSet_.find((e=>e.controller_===t.contentController));if(!e)throw u.shouldNeverHappen();const n=new ee(t,e);this.pageApiMap_.set(t,n)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){if(!this.pageApiMap_.get(t.item))throw u.shouldNeverHappen();this.pageApiMap_.delete(t.item)}constructor(t,e){super(t,new kt(t.rackController,e)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.emitter_=new v,this.pageApiMap_=new Map,this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})})),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach((t=>{this.setUpPageApi_(t)}))}}const ie=b("tab");class re{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ie(),It()),e.viewProps.bindClassModifiers(this.element),g(e.empty,y(this.element,ie(void 0,"nop")));const n=t.createElement("div");n.classList.add(ie("i")),this.element.appendChild(n),this.itemsElement=n;const i=e.contentsElement;i.classList.add(ie("c")),this.element.appendChild(i),this.contentsElement=i}}class se extends Lt{get pageSet(){return this.pageSet_}add(t,e){this.pageSet_.add(t,null!=e?e:this.pageSet_.items.length)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}applyPages_(){this.keepSelection_(),this.empty_.rawValue=0===this.pageSet_.items.length}onPageAdd_(t){const e=t.item;Q(this.view.itemsElement,e.itemController.view.element,t.index),this.rackController.rack.add(e.contentController,t.index),e.props.value("selected").emitter.on("change",this.onPageSelectedChange_),this.applyPages_()}onPageRemove_(t){const e=t.item;J(e.itemController.view.element),this.rackController.rack.remove(e.contentController),e.props.value("selected").emitter.off("change",this.onPageSelectedChange_),this.applyPages_()}keepSelection_(){if(0===this.pageSet_.items.length)return;const t=this.pageSet_.items.findIndex((t=>t.props.get("selected")));t<0?this.pageSet_.items.forEach(((t,e)=>{t.props.set("selected",0===e)})):this.pageSet_.items.forEach(((e,n)=>{e.props.set("selected",n===t)}))}onPageSelectedChange_(t){if(t.rawValue){const e=this.pageSet_.items.findIndex((e=>e.props.value("selected")===t.sender));this.pageSet_.items.forEach(((t,n)=>{t.props.set("selected",n===e)}))}else this.keepSelection_()}constructor(t,e){const n=new Nt(t,{blade:e.blade,viewProps:e.viewProps}),i=L(!0);super({blade:e.blade,rackController:n,view:new re(t,{contentsElement:n.view.element,empty:i,viewProps:e.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onPageSelectedChange_=this.onPageSelectedChange_.bind(this),this.pageSet_=new gt((()=>null)),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.empty_=i,this.applyPages_()}}const oe={id:"tab",type:"blade",accept(t){const e=U,n=N(t,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return n&&0!==n.pages.length?{params:n}:null},controller(t){const e=new se(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((n=>{const i=new te(t.document,{itemProps:A.fromObject({selected:!1,title:n.title}),props:A.fromObject({selected:!1})});e.add(i)})),e},api:t=>t.controller instanceof se?new ne(t.controller,t.pool):null};function ae(t,e){const n=t.accept(e.params);if(!n)return null;const i=U.optional.boolean(e.params.disabled).value,r=U.optional.boolean(e.params.hidden).value;return t.controller({blade:ct(),document:e.document,params:a(Object.assign(Object.assign({},n.params),{disabled:i,hidden:r})),viewProps:Wt.create({disabled:i,hidden:r})})}class le{dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}constructor(){this.disabled=!1,this.emitter=new v}}class ce{get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new v,this.interval_=e,this.setTimer_()}}class pe{constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}constructor(t){this.constraints=t}}function ue(t,e){if(t instanceof e)return t;if(t instanceof pe){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class he{constrain(t){const e=this.options;return 0===e.length||e.filter((e=>e.value===t)).length>0?t:e[0].value}constructor(t){this.options=t}}class de{constrain(t){let e=t;return l(this.minValue)||(e=Math.max(e,this.minValue)),l(this.maxValue)||(e=Math.min(e,this.maxValue)),e}constructor(t){this.maxValue=t.max,this.minValue=t.min}}class ve{constrain(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}constructor(t){this.step=t}}const me=b("lst");class be{update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(me()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("select");n.classList.add(me("s")),w(this.props_,"options",(e=>{tt(n),e.forEach(((e,i)=>{const r=t.createElement("option");r.dataset.index=String(i),r.textContent=e.text,r.value=String(e.value),n.appendChild(r)}))})),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const i=t.createElement("div");i.classList.add(me("m")),i.appendChild(Z(t,"dropdown")),this.element.appendChild(i),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,this.update_()}}class fe{onSelectChange_(t){const e=a(t.currentTarget).selectedOptions.item(0);if(!e)return;const n=Number(e.dataset.index);this.value.rawValue=this.props.get("options")[n].value}constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new be(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}}const _e=b("pop");class ge{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(_e()),e.viewProps.bindClassModifiers(this.element),g(e.shows,y(this.element,_e(void 0,"v")))}}class we{constructor(t,e){this.shows=L(!1),this.viewProps=e.viewProps,this.view=new ge(t,{shows:this.shows,viewProps:this.viewProps})}}const xe=b("txt");class ye{refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(xe()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(xe("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}}class Ce{onInputChange_(t){const e=a(t.currentTarget).value,n=this.parser_(e);l(n)||(this.value.rawValue=n),this.view.refresh()}constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new ye(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}}function Pe(t){return String(t)}function Ee(t){return"false"!==t&&!!t}function Me(t){return Pe(t)}class ke{evaluate(){return Number(this.text)}toString(){return this.text}constructor(t){this.text=t}}const Ve={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class Le{evaluate(){const t=Ve[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}constructor(t,e,n){this.left=e,this.operator=t,this.right=n}}const Ae={"+":t=>t,"-":t=>-t,"~":t=>~t};class Se{evaluate(){const t=Ae[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}constructor(t,e){this.operator=t,this.expression=e}}function Te(t){return(e,n)=>{for(let i=0;i<t.length;i++){const r=t[i](e,n);if(""!==r)return r}return""}}function ze(t,e){var n;const i=t.substr(e).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Re(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function De(t,e){var n;const i=t.substr(e).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Ue(t,e){const n=De(t,e);if(""!==n)return n;const i=t.substr(e,1);if("-"!==i&&"+"!==i)return"";const r=De(t,e+=1);return""===r?"":i+r}function Ne(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const i=Ue(t,e);return""===i?"":n+i}function Ie(t,e){const n=t.substr(e,1);if("0"===n)return n;const i=Re(t,e);return e+=i.length,""===i?"":i+De(t,e)}function Be(t,e){const n=Ie(t,e);if(e+=n.length,""===n)return"";const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const r=De(t,e);return n+i+r+Ne(t,e+=r.length)}function Fe(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const i=De(t,e);return e+=i.length,""===i?"":n+i+Ne(t,e)}function Oe(t,e){const n=Ie(t,e);return e+=n.length,""===n?"":n+Ne(t,e)}const je=Te([Be,Fe,Oe]);function Ke(t,e){var n;const i=t.substr(e).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function qe(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const i=Ke(t,e);return""===i?"":n+i}function He(t,e){var n;const i=t.substr(e).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function $e(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const i=He(t,e);return""===i?"":n+i}function Ge(t,e){var n;const i=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Ye(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const i=Ge(t,e);return""===i?"":n+i}const Xe=Te([qe,$e,Ye]),We=Te([Xe,je]);function Ze(t,e){const n=We(t,e);return e+=n.length,""===n?null:{evaluable:new ke(n),cursor:e}}function Qe(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const i=sn(t,e);if(!i)return null;e=i.cursor,e+=ze(t,e).length;const r=t.substr(e,1);return e+=r.length,")"!==r?null:{evaluable:i.evaluable,cursor:e}}function Je(t,e){return Ze(t,e)||Qe(t,e)}function tn(t,e){const n=Je(t,e);if(n)return n;const i=t.substr(e,1);if(e+=i.length,"+"!==i&&"-"!==i&&"~"!==i)return null;const r=tn(t,e);return r?{cursor:e=r.cursor,evaluable:new Se(i,r.evaluable)}:null}function en(t,e,n){n+=ze(e,n).length;const i=t.filter((t=>e.startsWith(t,n)))[0];return i?(n+=i.length,{cursor:n+=ze(e,n).length,operator:i}):null}function nn(t,e){return(n,i)=>{const r=t(n,i);if(!r)return null;i=r.cursor;let s=r.evaluable;for(;;){const r=en(e,n,i);if(!r)break;i=r.cursor;const o=t(n,i);if(!o)return null;i=o.cursor,s=new Le(r.operator,s,o.evaluable)}return s?{cursor:i,evaluable:s}:null}}const rn=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>nn(t,e)),tn);function sn(t,e){return e+=ze(t,e).length,rn(t,e)}function on(t){const e=sn(t,0);return e?e.cursor+ze(t,e.cursor).length!==t.length?null:e.evaluable:null}function an(t){var e;const n=on(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function ln(t){if("number"==typeof t)return t;if("string"==typeof t){const e=an(t);if(!l(e))return e}return 0}function cn(t){return String(t)}function pn(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}const un=pn(0);function hn(t){return un(t)+"%"}function dn(t){return String(t)}function vn(t){return t}function mn(t,e){for(;t.length<e;)t.push(void 0)}function bn(t){const e=[];return mn(e,t),L(e)}function fn(t){const e=t.indexOf(void 0);return a(e<0?t:t.slice(0,e))}function _n(t,e){const n=[...fn(t),e];return n.length>t.length?n.splice(0,n.length-t.length):mn(n,t.length),n}function gn({primary:t,secondary:e,forward:n,backward:i}){let r=!1;function s(t){r||(r=!0,t(),r=!1)}t.emitter.on("change",(i=>{s((()=>{e.setRawValue(n(t,e),i.options)}))})),e.emitter.on("change",(r=>{s((()=>{t.setRawValue(i(t,e),r.options)})),s((()=>{e.setRawValue(n(t,e),r.options)}))})),s((()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})}))}function wn(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function xn(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function yn(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Cn(t){return"ArrowUp"===t||"ArrowDown"===t}function Pn(t){return Cn(t)||"ArrowLeft"===t||"ArrowRight"===t}function En(t,e){const n=e.ownerDocument.defaultView,i=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+i.left),y:t.pageY-((n&&n.scrollY||0)+i.top)}}class Mn{computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(En(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(En(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(En(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new v,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}}function kn(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}function Vn(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ln(t,e,n){return Math.min(Math.max(t,e),n)}function An(t,e){return(t%e+e)%e}const Sn=b("txt");class Tn{onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(Sn(void 0,"drg"));this.element.classList.add(Sn(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),i=Ln(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+i},0 L${n},4 L${n+i},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Sn(),Sn(void 0,"num")),e.arrayPosition&&this.element.classList.add(Sn(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Sn("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Sn()),this.inputElement.classList.add(Sn("i"));const i=t.createElement("div");i.classList.add(Sn("k")),this.element.appendChild(i),this.knobElement=i;const r=t.createElementNS(K,"svg");r.classList.add(Sn("g")),this.knobElement.appendChild(r);const s=t.createElementNS(K,"path");s.classList.add(Sn("gb")),r.appendChild(s),this.guideBodyElem_=s;const o=t.createElementNS(K,"path");o.classList.add(Sn("gh")),r.appendChild(o),this.guideHeadElem_=o;const a=t.createElement("div");a.classList.add(b("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}}class zn{onInputChange_(t){const e=a(t.currentTarget).value,n=this.parser_(e);l(n)||(this.value.rawValue=n),this.view.refresh()}onInputKeyDown_(t){const e=wn(this.baseStep_,xn(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==wn(this.baseStep_,xn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.originRawValue_+e*this.props.get("draggingScale")}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}constructor(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=L(null),this.view=new Tn(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new Mn(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}}const Rn=b("sld");class Dn{update_(){const t=Ln(kn(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Rn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Rn("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const i=t.createElement("div");i.classList.add(Rn("k")),this.trackElement.appendChild(i),this.knobElement=i,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}}class Un{handlePointerEvent_(t,e){t.point&&this.value.setRawValue(kn(Ln(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=wn(this.baseStep_,yn(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==wn(this.baseStep_,yn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new Dn(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Mn(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}}const Nn=b("sldtxt");class In{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Nn());const n=t.createElement("div");n.classList.add(Nn("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Nn("t")),this.textView_=e.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class Bn{get sliderController(){return this.sliderC_}get textController(){return this.textC_}constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new Un(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new zn(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,value:e.value,viewProps:e.viewProps}),this.view=new In(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}}function Fn(t,e){t.write(e)}function On(t){const e=U;return Array.isArray(t)?e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(t).value:"object"==typeof t?e.required.raw(t).value:void 0}function jn(t){if("inline"===t||"popup"===t)return t}function Kn(t){const e=U;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(t).value}function qn(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach((n=>{e.push({text:n,value:t[n]})})),e}function Hn(t){return l(t)?null:new he(qn(a(t)))}function $n(t){const e=t?ue(t,he):null;return e?e.options:null}function Gn(t){const e=t?ue(t,ve):null;return e?e.step:null}function Yn(t,e){const n=t&&ue(t,ve);return n?Vn(n.step):Math.max(Vn(e),2)}function Xn(t){const e=Gn(t);return null!=e?e:1}function Wn(t,e){var n;const i=t&&ue(t,ve),r=Math.abs(null!==(n=null==i?void 0:i.step)&&void 0!==n?n:e);return 0===r?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}const Zn=b("ckb");class Qn{update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Zn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(Zn("l")),this.element.appendChild(n);const i=t.createElement("input");i.classList.add(Zn("i")),i.type="checkbox",n.appendChild(i),this.inputElement=i,e.viewProps.bindDisabled(this.inputElement);const r=t.createElement("div");r.classList.add(Zn("w")),n.appendChild(r);const s=Z(t,"check");r.appendChild(s),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}}class Jn{onInputChange_(t){const e=a(t.currentTarget);this.value.rawValue=e.checked}constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Qn(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}}function ti(t){const e=[],n=Hn(t.options);return n&&e.push(n),new pe(e)}const ei={id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=N(e,{options:U.optional.custom(On)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Ee,constraint:t=>ti(t.params),writer:t=>Fn},controller:t=>{var e;const n=t.document,i=t.value,r=t.constraint;return r&&ue(r,he)?new fe(n,{props:A.fromObject({options:null!==(e=$n(r))&&void 0!==e?e:[]}),value:i,viewProps:t.viewProps}):new Jn(n,{value:i,viewProps:t.viewProps})}},ni=b("col");class ii{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ni()),e.foldable.bindExpandedClass(this.element,ni(void 0,"expanded")),w(e.foldable,"completed",y(this.element,ni(void 0,"cpl")));const n=t.createElement("div");n.classList.add(ni("h")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(ni("s")),n.appendChild(i),this.swatchElement=i;const r=t.createElement("div");if(r.classList.add(ni("t")),n.appendChild(r),this.textElement=r,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(ni("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function ri(t,e,n){const i=Ln(t/255,0,1),r=Ln(e/255,0,1),s=Ln(n/255,0,1),o=Math.max(i,r,s),a=Math.min(i,r,s),l=o-a;let c=0,p=0;const u=(a+o)/2;return 0!==l&&(p=l/(1-Math.abs(o+a-1)),c=i===o?(r-s)/l:r===o?2+(s-i)/l:4+(i-r)/l,c=c/6+(c<0?1:0)),[360*c,100*p,100*u]}function si(t,e,n){const i=(t%360+360)%360,r=Ln(e/100,0,1),s=Ln(n/100,0,1),o=(1-Math.abs(2*s-1))*r,a=o*(1-Math.abs(i/60%2-1)),l=s-o/2;let c,p,u;return[c,p,u]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(c+l),255*(p+l),255*(u+l)]}function oi(t,e,n){const i=Ln(t/255,0,1),r=Ln(e/255,0,1),s=Ln(n/255,0,1),o=Math.max(i,r,s),a=o-Math.min(i,r,s);let l;return l=0===a?0:o===i?((r-s)/a%6+6)%6*60:o===r?60*((s-i)/a+2):60*((i-r)/a+4),[l,100*(0===o?0:a/o),100*o]}function ai(t,e,n){const i=An(t,360),r=Ln(e/100,0,1),s=Ln(n/100,0,1),o=s*r,a=o*(1-Math.abs(i/60%2-1)),l=s-o;let c,p,u;return[c,p,u]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(c+l),255*(p+l),255*(u+l)]}function li(t,e,n){const i=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==i?e*(100-Math.abs(2*n-100))/i:0,n+e*(100-Math.abs(2*n-100))/200]}function ci(t,e,n){const i=100-Math.abs(n*(200-e)/100-100);return[t,0!==i?e*n/i:0,n*(200-e)/200]}function pi(t){return[t[0],t[1],t[2]]}function ui(t,e){return[t[0],t[1],t[2],e]}const hi={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:li,rgb:si},hsv:{hsl:ci,hsv:(t,e,n)=>[t,e,n],rgb:ai},rgb:{hsl:ri,hsv:oi,rgb:(t,e,n)=>[t,e,n]}};function di(t,e,n){return hi[e][n](...t)}const vi={hsl:t=>{var e;return[An(t[0],360),Ln(t[1],0,100),Ln(t[2],0,100),Ln(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},hsv:t=>{var e;return[An(t[0],360),Ln(t[1],0,100),Ln(t[2],0,100),Ln(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},rgb:t=>{var e;return[Ln(t[0],0,255),Ln(t[1],0,255),Ln(t[2],0,255),Ln(null!==(e=t[3])&&void 0!==e?e:1,0,1)]}};function mi(t,e){return"object"==typeof t&&!l(t)&&e in t&&"number"==typeof t[e]}class bi{static black(){return new bi([0,0,0],"rgb")}static fromObject(t){const e="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new bi(e,"rgb")}static toRgbaObject(t){return t.toRgbaObject()}static isRgbColorObject(t){return mi(t,"r")&&mi(t,"g")&&mi(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&mi(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode_!==e.mode_)return!1;const n=t.comps_,i=e.comps_;for(let t=0;t<n.length;t++)if(n[t]!==i[t])return!1;return!0}get mode(){return this.mode_}getComponents(t){return ui(di(pi(this.comps_),this.mode_,t||this.mode_),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}constructor(t,e){this.mode_=e,this.comps_=vi[e](t)}}const fi=b("colp");class _i{get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map((t=>t.inputElement))];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(fi());const n=t.createElement("div");n.classList.add(fi("hsv"));const i=t.createElement("div");i.classList.add(fi("sv")),this.svPaletteView_=e.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);const r=t.createElement("div");r.classList.add(fi("h")),this.hPaletteView_=e.hPaletteView,r.appendChild(this.hPaletteView_.element),n.appendChild(r),this.element.appendChild(n);const s=t.createElement("div");if(s.classList.add(fi("rgb")),this.textView_=e.textView,s.appendChild(this.textView_.element),this.element.appendChild(s),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const n=t.createElement("div");n.classList.add(fi("a"));const i=t.createElement("div");i.classList.add(fi("ap")),i.appendChild(this.alphaViews_.palette.element),n.appendChild(i);const r=t.createElement("div");r.classList.add(fi("at")),r.appendChild(this.alphaViews_.text.element),n.appendChild(r),this.element.appendChild(n)}}}function gi(t){const e=U;return N(t,{alpha:e.optional.boolean,expanded:e.optional.boolean,picker:e.optional.custom(jn)})}function wi(t){return t?.1:1}function xi(t,e){const n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}const yi={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function Ci(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),i=e[2];return yi[i](n)}const Pi={"func.rgb":t=>{const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[xi(e[1],255),xi(e[2],255),xi(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new bi(n,"rgb")},"func.rgba":t=>{const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[xi(e[1],255),xi(e[2],255),xi(e[3],255),xi(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new bi(n,"rgb")},"func.hsl":t=>{const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ci(e[1]),xi(e[2],100),xi(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new bi(n,"hsl")},"func.hsla":t=>{const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ci(e[1]),xi(e[2],100),xi(e[3],100),xi(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new bi(n,"hsl")},"hex.rgb":t=>{const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new bi([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)],"rgb");const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new bi([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)],"rgb"):null},"hex.rgba":t=>{const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new bi([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),kn(parseInt(e[4]+e[4],16),0,255,0,1)],"rgb");const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new bi([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),kn(parseInt(n[4],16),0,255,0,1)],"rgb"):null}};function Ei(t){return Object.keys(Pi).reduce(((e,n)=>e||((0,Pi[n])(t)?n:null)),null)}const Mi=t=>{const e=Ei(t);return e?Pi[e](t):null};function ki(t){return"func.hsla"===t||"func.rgba"===t||"hex.rgba"===t}function Vi(t){if("string"==typeof t){const e=Mi(t);if(e)return e}return bi.black()}function Li(t){const e=Ln(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function Ai(t,e="#"){return`${e}${pi(t.getComponents("rgb")).map(Li).join("")}`}function Si(t,e="#"){const n=t.getComponents("rgb");return`${e}${[n[0],n[1],n[2],255*n[3]].map(Li).join("")}`}function Ti(t){const e=pn(0);return`rgb(${pi(t.getComponents("rgb")).map((t=>e(t))).join(", ")})`}function zi(t){const e=pn(2),n=pn(0);return`rgba(${t.getComponents("rgb").map(((t,i)=>(3===i?e:n)(t))).join(", ")})`}function Ri(t){const e=[pn(0),hn,hn];return`hsl(${pi(t.getComponents("hsl")).map(((t,n)=>e[n](t))).join(", ")})`}function Di(t){const e=[pn(0),hn,hn,pn(2)];return`hsla(${t.getComponents("hsl").map(((t,n)=>e[n](t))).join(", ")})`}const Ui={"func.hsl":Ri,"func.hsla":Di,"func.rgb":Ti,"func.rgba":zi,"hex.rgb":Ai,"hex.rgba":Si};function Ni(t){return Ui[t]}const Ii=b("apl");class Bi{update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new bi([e[0],e[1],e[2],0],"rgb"),i=new bi([e[0],e[1],e[2],255],"rgb"),r=["to right",zi(n),zi(i)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=zi(t);const s=kn(e[3],0,1,0,100);this.markerElem_.style.left=`${s}%`}onValueChange_(){this.update_()}constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Ii()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Ii("b")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Ii("c")),n.appendChild(i),this.colorElem_=i;const r=t.createElement("div");r.classList.add(Ii("m")),this.element.appendChild(r),this.markerElem_=r;const s=t.createElement("div");s.classList.add(Ii("p")),this.markerElem_.appendChild(s),this.previewElem_=s,this.update_()}}class Fi{handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,i=this.value.rawValue,[r,s,o]=i.getComponents("hsv");this.value.setRawValue(new bi([r,s,o,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=wn(wi(!0),yn(t));if(0===e)return;const n=this.value.rawValue,[i,r,s,o]=n.getComponents("hsv");this.value.setRawValue(new bi([i,r,s,o+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==wn(wi(!0),yn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Bi(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Mn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}}const Oi=b("coltxt");function ji(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(n.reduce(((e,n)=>{const i=t.createElement("option");return i.textContent=n.text,i.value=n.value,e.appendChild(i),e}),t.createDocumentFragment())),e}class Ki{get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){tt(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach((e=>{const n=t.createElement("div");n.classList.add(Oi("c")),n.appendChild(e.element),this.textsElem_.appendChild(n)}))}constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Oi());const n=t.createElement("div");n.classList.add(Oi("m")),this.modeElem_=ji(t),this.modeElem_.classList.add(Oi("ms")),n.appendChild(this.modeSelectElement);const i=t.createElement("div");i.classList.add(Oi("mm")),i.appendChild(Z(t,"dropdown")),n.appendChild(i),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Oi("w")),this.element.appendChild(r),this.textsElem_=r,this.textViews_=e.textViews,this.applyTextViews_(),g(e.colorMode,(t=>{this.modeElem_.value=t}))}}const qi=pn(0),Hi={rgb:()=>new de({min:0,max:255}),hsl:t=>new de(0===t?{min:0,max:360}:{min:0,max:100}),hsv:t=>new de(0===t?{min:0,max:360}:{min:0,max:100})};function $i(t,e,n){return new zn(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:wi(!1),parser:e.parser,props:A.fromObject({draggingScale:1,formatter:qi}),value:L(0,{constraint:Hi[e.colorMode](n)}),viewProps:e.viewProps})}class Gi{createComponentControllers_(t){const e={colorMode:this.colorMode.rawValue,parser:this.parser_,viewProps:this.viewProps},n=[$i(t,e,0),$i(t,e,1),$i(t,e,2)];return n.forEach(((t,e)=>{gn({primary:this.value,secondary:t.value,forward:t=>t.rawValue.getComponents(this.colorMode.rawValue)[e],backward:(t,n)=>{const i=this.colorMode.rawValue,r=t.rawValue.getComponents(i);return r[e]=n.rawValue,new bi(ui(pi(r),r[3]),i)}})})),n}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=L(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new Ki(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}}const Yi=b("hpl");class Xi{update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Ti(new bi([e,100,100],"hsv"));const n=kn(e,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Yi()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Yi("c")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Yi("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}}class Wi{handlePointerEvent_(t,e){if(!t.point)return;const n=kn(Ln(t.point.x,0,t.bounds.width),0,t.bounds.width,0,359),i=this.value.rawValue,[,r,s,o]=i.getComponents("hsv");this.value.setRawValue(new bi([n,r,s,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=wn(wi(!1),yn(t));if(0===e)return;const n=this.value.rawValue,[i,r,s,o]=n.getComponents("hsv");this.value.setRawValue(new bi([i+e,r,s,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==wn(wi(!1),yn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Xi(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Mn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}}const Zi=b("svp"),Qi=64;class Ji{update_(){const t=X(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,i=this.canvasElement.height,r=t.getImageData(0,0,n,i),s=r.data;for(let t=0;t<i;t++)for(let r=0;r<n;r++){const o=kn(r,0,n,0,100),a=kn(t,0,i,100,0),l=ai(e[0],o,a),c=4*(t*n+r);s[c]=l[0],s[c+1]=l[1],s[c+2]=l[2],s[c+3]=255}t.putImageData(r,0,0);const o=kn(e[1],0,100,0,100);this.markerElem_.style.left=`${o}%`;const a=kn(e[2],0,100,100,0);this.markerElem_.style.top=`${a}%`}onValueChange_(){this.update_()}constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Zi()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=Qi,n.width=Qi,n.classList.add(Zi("c")),this.element.appendChild(n),this.canvasElement=n;const i=t.createElement("div");i.classList.add(Zi("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}}class tr{handlePointerEvent_(t,e){if(!t.point)return;const n=kn(t.point.x,0,t.bounds.width,0,100),i=kn(t.point.y,0,t.bounds.height,100,0),[r,,,s]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new bi([r,n,i,s],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Pn(t.key)&&t.preventDefault();const[e,n,i,r]=this.value.rawValue.getComponents("hsv"),s=wi(!1),o=wn(s,yn(t)),a=wn(s,xn(t));0===o&&0===a||this.value.setRawValue(new bi([e,n+o,i+a,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=wi(!1),n=wn(e,yn(t)),i=wn(e,xn(t));0===n&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Ji(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Mn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}}class er{get textController(){return this.textC_}constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new Wi(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new tr(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new Fi(t,{value:this.value,viewProps:this.viewProps}),text:new zn(t,{parser:an,baseStep:.1,props:A.fromObject({draggingScale:.01,formatter:pn(2)}),value:L(0,{constraint:new de({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&gn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.rawValue.getComponents()[3],backward:(t,e)=>{const n=t.rawValue.getComponents();return n[3]=e.rawValue,new bi(n,t.rawValue.mode)}}),this.textC_=new Gi(t,{parser:an,value:this.value,viewProps:this.viewProps}),this.view=new _i(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}}const nr=b("colsw");class ir{update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Si(t)}onValueChange_(){this.update_()}constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(nr()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(nr("sw")),this.element.appendChild(n),this.swatchElem_=n;const i=t.createElement("button");i.classList.add(nr("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}}class rr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new ir(t,{value:this.value,viewProps:this.viewProps})}}class sr{get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=a(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=nt(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!$(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=pt.create(e.expanded),this.swatchC_=new rr(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new Ce(t,{parser:e.parser,props:A.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new ii(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new we(t,{viewProps:this.viewProps}):null;const i=new er(t,{supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),gn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),dt(this.foldable_,this.view.pickerElement))}}function or(t){return bi.isColorObject(t)?bi.fromObject(t):bi.black()}function ar(t){return pi(t.getComponents("rgb")).reduce(((t,e)=>t<<8|255&Math.floor(e)),0)}function lr(t){return t.getComponents("rgb").reduce(((t,e,n)=>t<<8|255&Math.floor(3===n?255*e:e)),0)>>>0}function cr(t){return new bi([t>>16&255,t>>8&255,255&t],"rgb")}function pr(t){return new bi([t>>24&255,t>>16&255,t>>8&255,kn(255&t,0,255,0,1)],"rgb")}function ur(t){return"number"!=typeof t?bi.black():cr(t)}function hr(t){return"number"!=typeof t?bi.black():pr(t)}function dr(t){const e=Ni(t);return(t,n)=>{Fn(t,e(n))}}function vr(t){const e=t?lr:ar;return(t,n)=>{Fn(t,e(n))}}function mr(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b),t.writeProperty("a",n.a)}function br(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b)}function fr(t){return t?mr:br}function _r(t){return"alpha"in t&&!0===t.alpha}function gr(t){return t?t=>Si(t,"0x"):t=>Ai(t,"0x")}const wr={id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;if(!("view"in e))return null;if("color"!==e.view)return null;const n=gi(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>_r(t.params)?hr:ur,equals:bi.equals,writer:t=>vr(_r(t.params))},controller:t=>{const e=_r(t.params),n="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0;return new sr(t.document,{expanded:null!=n&&n,formatter:gr(e),parser:Mi,pickerLayout:null!=i?i:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};function xr(t){return bi.isRgbaColorObject(t)}const yr={id:"input-color-object",type:"input",accept:(t,e)=>{if(!bi.isColorObject(t))return null;const n=gi(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>or,equals:bi.equals,writer:t=>fr(xr(t.initialValue))},controller:t=>{const e=bi.isRgbaColorObject(t.initialValue),n="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0,r=e?Si:Ai;return new sr(t.document,{expanded:null!=n&&n,formatter:r,parser:Mi,pickerLayout:null!=i?i:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}},Cr={id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;if("view"in e&&"text"===e.view)return null;if(!Ei(t))return null;const n=gi(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>Vi,equals:bi.equals,writer:t=>{const e=Ei(t.initialValue);if(!e)throw u.shouldNeverHappen();return dr(e)}},controller:t=>{const e=Ei(t.initialValue);if(!e)throw u.shouldNeverHappen();const n=Ni(e),i="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0;return new sr(t.document,{expanded:null!=i&&i,formatter:n,parser:Mi,pickerLayout:null!=r?r:"popup",supportsAlpha:ki(e),value:t.value,viewProps:t.viewProps})}};class Pr{constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var n,i;return null!==(i=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==i?i:t}));return this.asm_.fromComponents(e)}constructor(t){this.components=t.components,this.asm_=t.assembly}}const Er=b("pndtxt");class Mr{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(Er()),this.textViews.forEach((e=>{const n=t.createElement("div");n.classList.add(Er("a")),n.appendChild(e.element),this.element.appendChild(n)}))}}function kr(t,e,n){return new zn(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:L(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class Vr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((n,i)=>kr(t,e,i))),this.acs_.forEach(((t,n)=>{gn({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,i)=>{const r=e.assembly.toComponents(t.rawValue);return r[n]=i.rawValue,e.assembly.fromComponents(r)}})})),this.view=new Mr(t,{textViews:this.acs_.map((t=>t.view))})}}function Lr(t){return"step"in t&&!l(t.step)?new ve(t.step):null}function Ar(t){return"max"in t&&!l(t.max)||"min"in t&&!l(t.min)?new de({max:t.max,min:t.min}):null}function Sr(t){const e=[],n=Lr(t);n&&e.push(n);const i=Ar(t);i&&e.push(i);const r=Hn(t.options);return r&&e.push(r),new pe(e)}function Tr(t){const e=t?ue(t,de):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}function zr(t){const[e,n]=Tr(t);return[null!=e?e:0,null!=n?n:100]}const Rr={id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const n=U,i=N(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,options:n.optional.custom(On),step:n.optional.number});return i?{initialValue:t,params:i}:null},binding:{reader:t=>ln,constraint:t=>Sr(t.params),writer:t=>Fn},controller:t=>{var e,n;const i=t.value,r=t.constraint;if(r&&ue(r,he))return new fe(t.document,{props:A.fromObject({options:null!==(e=$n(r))&&void 0!==e?e:[]}),value:i,viewProps:t.viewProps});const s=null!==(n="format"in t.params?t.params.format:void 0)&&void 0!==n?n:pn(Yn(r,i.rawValue));if(r&&ue(r,de)){const[e,n]=zr(r);return new Bn(t.document,{baseStep:Xn(r),parser:an,sliderProps:A.fromObject({maxValue:n,minValue:e}),textProps:A.fromObject({draggingScale:Wn(r,i.rawValue),formatter:s}),value:i,viewProps:t.viewProps})}return new zn(t.document,{baseStep:Xn(r),parser:an,props:A.fromObject({draggingScale:Wn(r,i.rawValue),formatter:s}),value:i,viewProps:t.viewProps})}};class Dr{getComponents(){return[this.x,this.y]}static isObject(t){if(l(t))return!1;const e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}constructor(t=0,e=0){this.x=t,this.y=e}}const Ur={toComponents:t=>t.getComponents(),fromComponents:t=>new Dr(...t)},Nr=b("p2d");class Ir{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Nr()),e.viewProps.bindClassModifiers(this.element),g(e.expanded,y(this.element,Nr(void 0,"expanded")));const n=t.createElement("div");n.classList.add(Nr("h")),this.element.appendChild(n);const i=t.createElement("button");i.classList.add(Nr("b")),i.appendChild(Z(t,"p2dpad")),e.viewProps.bindDisabled(i),n.appendChild(i),this.buttonElement=i;const r=t.createElement("div");if(r.classList.add(Nr("t")),n.appendChild(r),this.textElement=r,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Nr("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const Br=b("p2dp");class Fr{get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.maxValue_,i=kn(t,-n,+n,0,100),r=kn(e,-n,+n,0,100),s=this.invertsY_?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${s}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${s}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(Br()),"popup"===e.layout&&this.element.classList.add(Br(void 0,"p"));const n=t.createElement("div");n.classList.add(Br("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const i=t.createElementNS(K,"svg");i.classList.add(Br("g")),this.padElement.appendChild(i),this.svgElem_=i;const r=t.createElementNS(K,"line");r.classList.add(Br("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const s=t.createElementNS(K,"line");s.classList.add(Br("ax")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","0"),s.setAttributeNS(null,"x2","50%"),s.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(s);const o=t.createElementNS(K,"line");o.classList.add(Br("l")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(o),this.lineElem_=o;const a=t.createElement("div");a.classList.add(Br("m")),this.padElement.appendChild(a),this.markerElem_=a,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}}function Or(t,e,n){return[wn(e[0],yn(t)),wn(e[1],xn(t))*(n?1:-1)]}class jr{handlePointerEvent_(t,e){if(!t.point)return;const n=this.maxValue_,i=kn(t.point.x,0,t.bounds.width,-n,+n),r=kn(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new Dr(i,r),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Pn(t.key)&&t.preventDefault();const[e,n]=Or(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(new Dr(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=Or(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new Fr(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Mn(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}}class Kr{onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=a(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=nt(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!$(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}constructor(t,e){var n,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=pt.create(e.expanded),this.popC_="popup"===e.pickerLayout?new we(t,{viewProps:this.viewProps}):null;const r=new jr(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=r,this.textC_=new Vr(t,{assembly:Ur,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Ir(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),gn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),dt(this.foldable_,this.view.pickerElement))}}function qr(t){return Dr.isObject(t)?new Dr(t.x,t.y):new Dr}function Hr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function $r(t){if(!t)return;const e=[];return l(t.step)||e.push(new ve(t.step)),l(t.max)&&l(t.min)||e.push(new de({max:t.max,min:t.min})),new pe(e)}function Gr(t){return new Pr({assembly:Ur,components:[$r("x"in t?t.x:void 0),$r("y"in t?t.y:void 0)]})}function Yr(t,e){const n=t&&ue(t,de);if(n)return Math.max(Math.abs(n.minValue||0),Math.abs(n.maxValue||0));const i=Xn(t);return Math.max(10*Math.abs(i),10*Math.abs(e))}function Xr(t,e){const n=e instanceof Pr?e.components[0]:void 0,i=e instanceof Pr?e.components[1]:void 0,r=Yr(n,t.x),s=Yr(i,t.y);return Math.max(r,s)}function Wr(t,e){return{baseStep:Xn(e),constraint:e,textProps:A.fromObject({draggingScale:Wn(e,t),formatter:pn(Yn(e,t))})}}function Zr(t){if(!("y"in t))return!1;const e=t.y;return!!e&&"inverted"in e&&!!e.inverted}const Qr={id:"input-point2d",type:"input",accept:(t,e)=>{if(!Dr.isObject(t))return null;const n=U,i=N(e,{expanded:n.optional.boolean,picker:n.optional.custom(jn),x:n.optional.custom(Kn),y:n.optional.object({inverted:n.optional.boolean,max:n.optional.number,min:n.optional.number,step:n.optional.number})});return i?{initialValue:t,params:i}:null},binding:{reader:t=>qr,constraint:t=>Gr(t.params),equals:Dr.equals,writer:t=>Hr},controller:t=>{const e=t.document,n=t.value,i=t.constraint;if(!(i instanceof Pr))throw u.shouldNeverHappen();const r="expanded"in t.params?t.params.expanded:void 0,s="picker"in t.params?t.params.picker:void 0;return new Kr(e,{axes:[Wr(n.rawValue.x,i.components[0]),Wr(n.rawValue.y,i.components[1])],expanded:null!=r&&r,invertsY:Zr(t.params),maxValue:Xr(n.rawValue,i),parser:an,pickerLayout:null!=s?s:"popup",value:n,viewProps:t.viewProps})}};class Jr{getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(l(t))return!1;const e=t.x,n=t.y,i=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}}const ts={toComponents:t=>t.getComponents(),fromComponents:t=>new Jr(...t)};function es(t){return Jr.isObject(t)?new Jr(t.x,t.y,t.z):new Jr}function ns(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function is(t){if(!t)return;const e=[];return l(t.step)||e.push(new ve(t.step)),l(t.max)&&l(t.min)||e.push(new de({max:t.max,min:t.min})),new pe(e)}function rs(t){return new Pr({assembly:ts,components:[is("x"in t?t.x:void 0),is("y"in t?t.y:void 0),is("z"in t?t.z:void 0)]})}function ss(t,e){return{baseStep:Xn(e),constraint:e,textProps:A.fromObject({draggingScale:Wn(e,t),formatter:pn(Yn(e,t))})}}const os={id:"input-point3d",type:"input",accept:(t,e)=>{if(!Jr.isObject(t))return null;const n=U,i=N(e,{x:n.optional.custom(Kn),y:n.optional.custom(Kn),z:n.optional.custom(Kn)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>es,constraint:t=>rs(t.params),equals:Jr.equals,writer:t=>ns},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof Pr))throw u.shouldNeverHappen();return new Vr(t.document,{assembly:ts,axes:[ss(e.rawValue.x,n.components[0]),ss(e.rawValue.y,n.components[1]),ss(e.rawValue.z,n.components[2])],parser:an,value:e,viewProps:t.viewProps})}};class as{getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(l(t))return!1;const e=t.x,n=t.y,i=t.z,r=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i&&"number"==typeof r}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}constructor(t=0,e=0,n=0,i=0){this.x=t,this.y=e,this.z=n,this.w=i}}const ls={toComponents:t=>t.getComponents(),fromComponents:t=>new as(...t)};function cs(t){return as.isObject(t)?new as(t.x,t.y,t.z,t.w):new as}function ps(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function us(t){if(!t)return;const e=[];return l(t.step)||e.push(new ve(t.step)),l(t.max)&&l(t.min)||e.push(new de({max:t.max,min:t.min})),new pe(e)}function hs(t){return new Pr({assembly:ls,components:[us("x"in t?t.x:void 0),us("y"in t?t.y:void 0),us("z"in t?t.z:void 0),us("w"in t?t.w:void 0)]})}function ds(t,e){return{baseStep:Xn(e),constraint:e,textProps:A.fromObject({draggingScale:Wn(e,t),formatter:pn(Yn(e,t))})}}const vs={id:"input-point4d",type:"input",accept:(t,e)=>{if(!as.isObject(t))return null;const n=U,i=N(e,{x:n.optional.custom(Kn),y:n.optional.custom(Kn),z:n.optional.custom(Kn),w:n.optional.custom(Kn)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>cs,constraint:t=>hs(t.params),equals:as.equals,writer:t=>ps},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof Pr))throw u.shouldNeverHappen();return new Vr(t.document,{assembly:ls,axes:e.rawValue.getComponents().map(((t,e)=>ds(t,n.components[e]))),parser:an,value:e,viewProps:t.viewProps})}};function ms(t){const e=[],n=Hn(t.options);return n&&e.push(n),new pe(e)}const bs={id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;const n=N(e,{options:U.optional.custom(On)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>dn,constraint:t=>ms(t.params),writer:t=>Fn},controller:t=>{var e;const n=t.document,i=t.value,r=t.constraint;return r&&ue(r,he)?new fe(n,{props:A.fromObject({options:null!==(e=$n(r))&&void 0!==e?e:[]}),value:i,viewProps:t.viewProps}):new Ce(n,{parser:t=>t,props:A.fromObject({formatter:vn}),value:i,viewProps:t.viewProps})}},fs={monitor:{defaultInterval:200,defaultLineCount:3}},_s=b("mll");class gs{update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach((t=>{void 0!==t&&n.push(this.formatter_(t))})),t.textContent=n.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(_s()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.classList.add(_s("i")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}}class ws{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new gs(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}const xs=b("sgl");class ys{update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(xs()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(xs("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}}class Cs{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new ys(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const Ps={id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=N(e,{lineCount:U.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Ee},controller:t=>{var e;return 1===t.value.rawValue.length?new Cs(t.document,{formatter:Me,value:t.value,viewProps:t.viewProps}):new ws(t.document,{formatter:Me,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:fs.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}};class Es{get index(){return this.index_}set index(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}constructor(){this.emitter=new v,this.index_=-1}}const Ms=b("grl");class ks{get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,i=this.maxValue_,r=[];this.value.rawValue.forEach(((s,o)=>{if(void 0===s)return;const a=kn(o,0,e,0,t.width),l=kn(s,n,i,t.height,0);r.push([a,l].join(","))})),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const s=this.tooltipElem_,o=this.value.rawValue[this.cursor_.index];if(void 0===o)return void s.classList.remove(Ms("t","a"));const a=kn(this.cursor_.index,0,e,0,t.width),l=kn(o,n,i,t.height,0);s.style.left=`${a}px`,s.style.top=`${l}px`,s.textContent=`${this.formatter_(o)}`,s.classList.contains(Ms("t","a"))||(s.classList.add(Ms("t","a"),Ms("t","in")),q(s),s.classList.remove(Ms("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Ms()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(K,"svg");n.classList.add(Ms("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const i=t.createElementNS(K,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const r=t.createElement("div");r.classList.add(Ms("t"),b("tt")()),this.element.appendChild(r),this.tooltipElem_=r,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}}class Vs{onGraphMouseLeave_(){this.cursor_.index=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(kn(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.index=Math.floor(kn(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}onGraphPointerUp_(){this.cursor_.index=-1}constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.cursor_=new Es,this.view=new ks(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:this.viewProps}),$(t)){const t=new Mn(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}}function Ls(t){return"format"in t&&!l(t.format)?t.format:pn(2)}function As(t){var e;return 1===t.value.rawValue.length?new Cs(t.document,{formatter:Ls(t.params),value:t.value,viewProps:t.viewProps}):new ws(t.document,{formatter:Ls(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:fs.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}function Ss(t){var e,n,i;return new Vs(t.document,{formatter:Ls(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:fs.monitor.defaultLineCount,maxValue:null!==(n="max"in t.params?t.params.max:null)&&void 0!==n?n:100,minValue:null!==(i="min"in t.params?t.params.min:null)&&void 0!==i?i:0,value:t.value,viewProps:t.viewProps})}function Ts(t){return"view"in t&&"graph"===t.view}const zs={id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;const n=U,i=N(e,{format:n.optional.function,lineCount:n.optional.number,max:n.optional.number,min:n.optional.number,view:n.optional.string});return i?{initialValue:t,params:i}:null},binding:{defaultBufferSize:t=>Ts(t)?64:1,reader:t=>ln},controller:t=>Ts(t.params)?Ss(t):As(t)},Rs={id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;const n=U,i=N(e,{lineCount:n.optional.number,multiline:n.optional.boolean});return i?{initialValue:t,params:i}:null},binding:{reader:t=>dn},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new ws(t.document,{formatter:vn,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:fs.monitor.defaultLineCount,value:n,viewProps:t.viewProps}):new Cs(t.document,{formatter:vn,value:n,viewProps:t.viewProps})}};class Ds{read(){const t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new v,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}}function Us(t,e){const n=t.accept(e.target.read(),e.params);if(l(n))return null;const i=U,r={target:e.target,initialValue:n.initialValue,params:n.params},s=t.binding.reader(r),o=t.binding.constraint?t.binding.constraint(r):void 0,a=L(s(n.initialValue),{constraint:o,equals:t.binding.equals}),c=new Ds({reader:s,target:e.target,value:a,writer:t.binding.writer(r)}),p=i.optional.boolean(e.params.disabled).value,u=i.optional.boolean(e.params.hidden).value,h=t.controller({constraint:o,document:e.document,initialValue:n.initialValue,params:n.params,value:c.value,viewProps:Wt.create({disabled:p,hidden:u})}),d=i.optional.string(e.params.label).value;return new xt(e.document,{binding:c,blade:ct(),props:A.fromObject({label:d||e.target.key}),valueController:h})}class Ns{dispose(){this.ticker.dispose()}read(){const t=this.target.read();if(void 0===t)return;const e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=_n(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}onTick_(t){this.read()}constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new v,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}}function Is(t,e){return 0===e?new le:new ce(t,null!=e?e:fs.monitor.defaultInterval)}function Bs(t,e){var n,i,r;const s=U,o=t.accept(e.target.read(),e.params);if(l(o))return null;const a={target:e.target,initialValue:o.initialValue,params:o.params},c=t.binding.reader(a),p=null!==(i=null!==(n=s.optional.number(e.params.bufferSize).value)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(o.params))&&void 0!==i?i:1,u=s.optional.number(e.params.interval).value,h=new Ns({reader:c,target:e.target,ticker:Is(e.document,u),value:bn(p)}),d=s.optional.boolean(e.params.disabled).value,v=s.optional.boolean(e.params.hidden).value,m=t.controller({document:e.document,params:o.params,value:h.value,viewProps:Wt.create({disabled:d,hidden:v})}),b=null!==(r=s.optional.string(e.params.label).value)&&void 0!==r?r:e.target.key;return new Ct(e.document,{binding:h,blade:ct(),props:A.fromObject({label:b}),valueController:m})}class Fs{getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}createInput(t,e,n){if(l(e.read()))throw new u({context:{key:e.key},type:"nomatchingcontroller"});const i=this.pluginsMap_.inputs.reduce(((i,r)=>i||Us(r,{document:t,target:e,params:n})),null);if(i)return i;throw new u({context:{key:e.key},type:"nomatchingcontroller"})}createMonitor(t,e,n){const i=this.pluginsMap_.monitors.reduce(((i,r)=>i||Bs(r,{document:t,params:n,target:e})),null);if(i)return i;throw new u({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const n=this.pluginsMap_.blades.reduce(((n,i)=>n||ae(i,{document:t,params:e})),null);if(!n)throw new u({type:"nomatchingview",context:{params:e}});return n}createBladeApi(t){if(t instanceof xt)return new wt(t);if(t instanceof Ct)return new yt(t);if(t instanceof Nt)return new kt(t,this);const e=this.pluginsMap_.blades.reduce(((e,n)=>e||n.api({controller:t,pool:this})),null);if(!e)throw u.shouldNeverHappen();return e}constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}}function Os(){const t=new Fs;return[Qr,os,vs,bs,Rr,Cr,yr,wr,ei,Ps,Rs,zs,at,Ot,Gt,oe].forEach((e=>{t.register(e)})),t}class js extends n{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})}))}}class Ks extends n{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})}))}}class qs extends n{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})}))}}const Hs={id:"list",type:"blade",accept(t){const e=U,n=N(t,{options:e.required.custom(On),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string});return n?{params:n}:null},controller(t){const e=new fe(t.document,{props:A.fromObject({options:qn(t.params.options)}),value:L(t.params.value),viewProps:t.viewProps});return new jt(t.document,{blade:t.blade,props:A.fromObject({label:t.params.label}),valueController:e})},api:t=>t.controller instanceof jt&&t.controller.valueController instanceof fe?new js(t.controller):null};function $s(t){return t.reduce(((t,e)=>Object.assign(t,{[e.presetKey]:e.read()})),{})}function Gs(t,e){t.forEach((t=>{const n=e[t.presetKey];void 0!==n&&t.write(n)}))}class Ys extends Vt{get element(){return this.controller_.view.element}importPreset(t){Gs(this.controller_.rackController.rack.find(xt).map((t=>t.binding.target)),t),this.refresh()}exportPreset(){return $s(this.controller_.rackController.rack.find(xt).map((t=>t.binding.target)))}refresh(){this.controller_.rackController.rack.find(xt).forEach((t=>{t.binding.read()})),this.controller_.rackController.rack.find(Ct).forEach((t=>{t.binding.read()}))}constructor(t,e){super(t,e)}}class Xs extends Ft{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const Ws={id:"slider",type:"blade",accept(t){const e=U,n=N(t,{max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number});return n?{params:n}:null},controller(t){var e,n;const i=null!==(e=t.params.value)&&void 0!==e?e:0,r=new Bn(t.document,{baseStep:1,parser:an,sliderProps:A.fromObject({maxValue:t.params.max,minValue:t.params.min}),textProps:A.fromObject({draggingScale:Wn(void 0,i),formatter:null!==(n=t.params.format)&&void 0!==n?n:cn}),value:L(i),viewProps:t.viewProps});return new jt(t.document,{blade:t.blade,props:A.fromObject({label:t.params.label}),valueController:r})},api:t=>t.controller instanceof jt&&t.controller.valueController instanceof Bn?new Ks(t.controller):null},Zs={id:"text",type:"blade",accept(t){const e=U,n=N(t,{parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string});return n?{params:n}:null},controller(t){var e;const n=new Ce(t.document,{parser:t.params.parse,props:A.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:t=>String(t)}),value:L(t.params.value),viewProps:t.viewProps});return new jt(t.document,{blade:t.blade,props:A.fromObject({label:t.params.label}),valueController:n})},api:t=>t.controller instanceof jt&&t.controller.valueController instanceof Ce?new qs(t.controller):null};function Qs(t){const e=t.createElement("div");return e.classList.add(b("dfw")()),t.body&&t.body.appendChild(e),e}function Js(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const i=t.createElement("style");i.dataset.tpStyle=e,i.textContent=n,t.head.appendChild(i)}class to extends Ys{get document(){if(!this.doc_)throw u.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw u.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach((t=>{this.pool_.register(t),this.embedPluginStyle_(t)}))}embedPluginStyle_(t){t.css&&Js(this.document,`plugin-${t.id}`,t.css)}setUpDefaultPlugins_(){Js(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach((t=>{this.embedPluginStyle_(t)})),this.registerPlugin({plugins:[Ws,Hs,oe,Zs]})}constructor(t){var e;const n=t||{},i=null!==(e=n.document)&&void 0!==e?e:Y(),r=Os();super(new Xs(i,{expanded:n.expanded,blade:ct(),props:A.fromObject({title:n.title}),viewProps:Wt.create()}),r),this.pool_=r,this.containerElem_=n.container||Qs(i),this.containerElem_.appendChild(this.element),this.doc_=i,this.usesDefaultWrapper_=!n.container,this.setUpDefaultPlugins_()}}const eo=new e("3.0.8");t.BladeApi=n,t.ButtonApi=d,t.FolderApi=Vt,t.InputBindingApi=wt,t.ListApi=js,t.MonitorBindingApi=yt,t.Pane=to,t.SeparatorApi=Kt,t.SliderApi=Ks,t.TabApi=ne,t.TabPageApi=ee,t.TextApi=qs,t.TpChangeEvent=r,t.VERSION=eo,Object.defineProperty(t,"__esModule",{value:!0})}(o);var a={};function l(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function c(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,l(t,e,"get"))}function p(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function u(t,e,n){p(t,e),e.set(t,n)}function h(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,l(t,e,"set"),n),n}function d(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function v(t,e){p(t,e),e.add(t)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){class e{get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}constructor(t){this.controller_=t}}class n{constructor(t){this.target=t}}class i extends n{constructor(t,e,n,i){super(t),this.value=e,this.presetKey=n,this.last=null==i||i}}function r(t){return t}function s(t){return null==t}const o={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class a{static alreadyDisposed(){return new a({type:"alreadydisposed"})}static notBindable(){return new a({type:"notbindable"})}static propertyNotFound(t){return new a({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new a({type:"shouldneverhappen"})}constructor(t){var e;this.message=null!==(e=o[t.type](r(t.context)))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}}class l{on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}constructor(){this.observers_={}}}const c="tp";function p(t){return(e,n)=>[c,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}function u(t,e){return n=>e(t(n))}function h(t){return t.rawValue}function d(t,e){t.emitter.on("change",u(h,e)),e(t.rawValue)}function v(t,e,n){d(t.value(e),n)}function m(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function b(t,e){return n=>{m(t,e,n)}}function f(t,e){d(t,(t=>{e.textContent=null!=t?t:""}))}const _=p("btn");class g{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(_()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(_("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(_("t")),f(e.props.value("title"),i),this.buttonElement.appendChild(i)}}class w{onClick_(){this.emitter.emit("click",{sender:this})}constructor(t,e){this.emitter=new l,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new g(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}}class x{get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,rawValue:i,sender:this}))}constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new l,this.rawValue_=t}}class y{get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}constructor(t){this.emitter=new l,this.value_=t}}function C(t,e){const n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new x(t,e):new y(t)}class P{static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:C(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new P(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}constructor(t){this.emitter=new l,this.valMap_=t;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}}function E(t,e){return r(Object.keys(e).reduce(((n,i)=>{if(void 0===n)return;const r=(0,e[i])(t[i]);return r.succeeded?Object.assign(Object.assign({},n),{[i]:r.value}):void 0}),{}))}function M(t,e){return t.reduce(((t,n)=>{if(void 0===t)return;const i=e(n);return i.succeeded&&void 0!==i.value?[...t,i.value]:void 0}),[])}function k(t){return null!==t&&"object"==typeof t}function V(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function L(t){return{custom:e=>V(e)(t),boolean:V((t=>"boolean"==typeof t?t:void 0))(t),number:V((t=>"number"==typeof t?t:void 0))(t),string:V((t=>"string"==typeof t?t:void 0))(t),function:V((t=>"function"==typeof t?t:void 0))(t),constant:e=>V((t=>t===e?e:void 0))(t),raw:V((t=>t))(t),object:e=>V((t=>{if(k(t))return E(t,e)}))(t),array:e=>V((t=>{if(Array.isArray(t))return M(t,e)}))(t)}}const A={optional:L(!0),required:L(!1)};function S(t,e){const n=A.required.object(e)(t);return n.succeeded?n.value:void 0}function T(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}function z(){return["veryfirst","first","last","verylast"]}const R=p(""),D={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class U{get parent(){return this.parent_}constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{z().forEach((t=>{e.classList.remove(R(void 0,D[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(R(void 0,D[t]))}))})),this.viewProps.handleDispose((()=>{T(e)}))}}const N="http://www.w3.org/2000/svg";function I(t){t.offsetHeight}function B(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function F(t){return void 0!==t.ontouchstart}function O(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function j(t){return t.relatedTarget?r(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const K=p("lbl");function q(t,e){const n=t.createDocumentFragment();return e.split("\n").map((e=>t.createTextNode(e))).forEach(((e,i)=>{i>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}class H{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(K()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(K("l")),v(e.props,"label",(e=>{s(e)?this.element.classList.add(K(void 0,"nol")):(this.element.classList.remove(K(void 0,"nol")),O(n),n.appendChild(q(t,e)))})),this.element.appendChild(n),this.labelElement=n;const i=t.createElement("div");i.classList.add(K("v")),this.element.appendChild(i),this.valueElement=i}}class $ extends U{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new H(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class G extends U{constructor(t){super(t),this.value=t.value}}class Y extends P{static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=P.createCore(e);return new Y(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!s(t)?`${t}px`:"auto"}bindExpandedClass(t,e){v(this,"expanded",(()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)}))}constructor(t){super(t)}}function X(t){return Y.create(t)}function W(t,e){let n=0;return B(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),I(e),n=e.clientHeight,t.set("temporaryExpanded",null),I(e)})),n}function Z(t,e){e.style.height=t.styleHeight}function Q(t,e){t.value("expanded").emitter.on("beforechange",(()=>{t.set("completed",!1),s(t.get("expandedHeight"))&&t.set("expandedHeight",W(t,e)),t.set("shouldFixHeight",!0),I(e)})),t.emitter.on("change",(()=>{Z(t,e)})),Z(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&(t.set("shouldFixHeight",!1),t.set("expandedHeight",null),t.set("completed",!0))}))}class J{constructor(t,e){const n=p(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}class tt extends G{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new H(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const et=p("");function nt(t,e){return b(t,et(void 0,e))}class it extends P{static create(t){var e,n;const i=null!=t?t:{},r={disabled:null!==(e=i.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=i.hidden)&&void 0!==n&&n},s=P.createCore(r);return new it(s)}bindClassModifiers(t){v(this,"disabled",nt(t,"disabled")),v(this,"hidden",nt(t,"hidden"))}bindDisabled(t){v(this,"disabled",(e=>{t.disabled=e}))}bindTabIndex(t){v(this,"disabled",(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}constructor(t){super(t)}}class rt{dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}constructor(){this.disabled=!1,this.emitter=new l}}class st{get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new l,this.interval_=e,this.setTimer_()}}class ot{constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}constructor(t){this.constraints=t}}function at(t,e){if(t instanceof e)return t;if(t instanceof ot){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class lt{constrain(t){let e=t;return s(this.minValue)||(e=Math.max(e,this.minValue)),s(this.maxValue)||(e=Math.min(e,this.maxValue)),e}constructor(t){this.maxValue=t.max,this.minValue=t.min}}class ct{constrain(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}constructor(t){this.step=t}}const pt=p("pop");class ut{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(pt()),e.viewProps.bindClassModifiers(this.element),d(e.shows,b(this.element,pt(void 0,"v")))}}class ht{constructor(t,e){this.shows=C(!1),this.viewProps=e.viewProps,this.view=new ut(t,{shows:this.shows,viewProps:this.viewProps})}}const dt=p("txt");class vt{refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(dt()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(dt("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}}class mt{onInputChange_(t){const e=r(t.currentTarget).value,n=this.parser_(e);s(n)||(this.value.rawValue=n),this.view.refresh()}constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new vt(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}}class bt{evaluate(){return Number(this.text)}toString(){return this.text}constructor(t){this.text=t}}const ft={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class _t{evaluate(){const t=ft[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}constructor(t,e,n){this.left=e,this.operator=t,this.right=n}}const gt={"+":t=>t,"-":t=>-t,"~":t=>~t};class wt{evaluate(){const t=gt[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}constructor(t,e){this.operator=t,this.expression=e}}function xt(t){return(e,n)=>{for(let i=0;i<t.length;i++){const r=t[i](e,n);if(""!==r)return r}return""}}function yt(t,e){var n;const i=t.substr(e).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Ct(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function Pt(t,e){var n;const i=t.substr(e).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Et(t,e){const n=Pt(t,e);if(""!==n)return n;const i=t.substr(e,1);if("-"!==i&&"+"!==i)return"";const r=Pt(t,e+=1);return""===r?"":i+r}function Mt(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const i=Et(t,e);return""===i?"":n+i}function kt(t,e){const n=t.substr(e,1);if("0"===n)return n;const i=Ct(t,e);return e+=i.length,""===i?"":i+Pt(t,e)}function Vt(t,e){const n=kt(t,e);if(e+=n.length,""===n)return"";const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const r=Pt(t,e);return n+i+r+Mt(t,e+=r.length)}function Lt(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const i=Pt(t,e);return e+=i.length,""===i?"":n+i+Mt(t,e)}function At(t,e){const n=kt(t,e);return e+=n.length,""===n?"":n+Mt(t,e)}const St=xt([Vt,Lt,At]);function Tt(t,e){var n;const i=t.substr(e).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function zt(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const i=Tt(t,e);return""===i?"":n+i}function Rt(t,e){var n;const i=t.substr(e).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Dt(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const i=Rt(t,e);return""===i?"":n+i}function Ut(t,e){var n;const i=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Nt(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const i=Ut(t,e);return""===i?"":n+i}const It=xt([zt,Dt,Nt]),Bt=xt([It,St]);function Ft(t,e){const n=Bt(t,e);return e+=n.length,""===n?null:{evaluable:new bt(n),cursor:e}}function Ot(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const i=Gt(t,e);if(!i)return null;e=i.cursor,e+=yt(t,e).length;const r=t.substr(e,1);return e+=r.length,")"!==r?null:{evaluable:i.evaluable,cursor:e}}function jt(t,e){return Ft(t,e)||Ot(t,e)}function Kt(t,e){const n=jt(t,e);if(n)return n;const i=t.substr(e,1);if(e+=i.length,"+"!==i&&"-"!==i&&"~"!==i)return null;const r=Kt(t,e);return r?{cursor:e=r.cursor,evaluable:new wt(i,r.evaluable)}:null}function qt(t,e,n){n+=yt(e,n).length;const i=t.filter((t=>e.startsWith(t,n)))[0];return i?(n+=i.length,{cursor:n+=yt(e,n).length,operator:i}):null}function Ht(t,e){return(n,i)=>{const r=t(n,i);if(!r)return null;i=r.cursor;let s=r.evaluable;for(;;){const r=qt(e,n,i);if(!r)break;i=r.cursor;const o=t(n,i);if(!o)return null;i=o.cursor,s=new _t(r.operator,s,o.evaluable)}return s?{cursor:i,evaluable:s}:null}}const $t=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>Ht(t,e)),Kt);function Gt(t,e){return e+=yt(t,e).length,$t(t,e)}function Yt(t){const e=Gt(t,0);return e?e.cursor+yt(t,e.cursor).length!==t.length?null:e.evaluable:null}function Xt(t){var e;const n=Yt(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function Wt(t){if("number"==typeof t)return t;if("string"==typeof t){const e=Xt(t);if(!s(e))return e}return 0}function Zt(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function Qt(t,e){for(;t.length<e;)t.push(void 0)}function Jt(t){const e=[];return Qt(e,t),C(e)}function te(t){const e=t.indexOf(void 0);return r(e<0?t:t.slice(0,e))}function ee(t,e){const n=[...te(t),e];return n.length>t.length?n.splice(0,n.length-t.length):Qt(n,t.length),n}function ne({primary:t,secondary:e,forward:n,backward:i}){let r=!1;function s(t){r||(r=!0,t(),r=!1)}t.emitter.on("change",(i=>{s((()=>{e.setRawValue(n(t,e),i.options)}))})),e.emitter.on("change",(r=>{s((()=>{t.setRawValue(i(t,e),r.options)})),s((()=>{e.setRawValue(n(t,e),r.options)}))})),s((()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})}))}function ie(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function re(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function se(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function oe(t){return"ArrowUp"===t||"ArrowDown"===t}function ae(t){return oe(t)||"ArrowLeft"===t||"ArrowRight"===t}function le(t,e){const n=e.ownerDocument.defaultView,i=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+i.left),y:t.pageY-((n&&n.scrollY||0)+i.top)}}class ce{computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(le(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(le(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(le(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new l,t.addEventListener("touchstart",this.onTouchStart_),t.addEventListener("touchmove",this.onTouchMove_),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}}function pe(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}function ue(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function he(t,e,n){return Math.min(Math.max(t,e),n)}const de=p("txt");class ve{onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(de(void 0,"drg"));this.element.classList.add(de(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),i=he(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+i},0 L${n},4 L${n+i},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(de(),de(void 0,"num")),e.arrayPosition&&this.element.classList.add(de(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(de("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(de()),this.inputElement.classList.add(de("i"));const i=t.createElement("div");i.classList.add(de("k")),this.element.appendChild(i),this.knobElement=i;const r=t.createElementNS(N,"svg");r.classList.add(de("g")),this.knobElement.appendChild(r);const s=t.createElementNS(N,"path");s.classList.add(de("gb")),r.appendChild(s),this.guideBodyElem_=s;const o=t.createElementNS(N,"path");o.classList.add(de("gh")),r.appendChild(o),this.guideHeadElem_=o;const a=t.createElement("div");a.classList.add(p("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}}class me{onInputChange_(t){const e=r(t.currentTarget).value,n=this.parser_(e);s(n)||(this.value.rawValue=n),this.view.refresh()}onInputKeyDown_(t){const e=ie(this.baseStep_,re(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==ie(this.baseStep_,re(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.originRawValue_+e*this.props.get("draggingScale")}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}constructor(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=C(null),this.view=new ve(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new ce(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}}function be(t,e){t.write(e)}function fe(t){const e=t?at(t,ct):null;return e?e.step:null}function _e(t,e){const n=t&&at(t,ct);return n?ue(n.step):Math.max(ue(e),2)}function ge(t){const e=fe(t);return null!=e?e:1}function we(t,e){var n;const i=t&&at(t,ct),r=Math.abs(null!==(n=null==i?void 0:i.step)&&void 0!==n?n:e);return 0===r?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}class xe{constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var n,i;return null!==(i=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==i?i:t}));return this.asm_.fromComponents(e)}constructor(t){this.components=t.components,this.asm_=t.assembly}}const ye=p("pndtxt");class Ce{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(ye()),this.textViews.forEach((e=>{const n=t.createElement("div");n.classList.add(ye("a")),n.appendChild(e.element),this.element.appendChild(n)}))}}function Pe(t,e,n){return new me(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:C(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class Ee{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((n,i)=>Pe(t,e,i))),this.acs_.forEach(((t,n)=>{ne({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,i)=>{const r=e.assembly.toComponents(t.rawValue);return r[n]=i.rawValue,e.assembly.fromComponents(r)}})})),this.view=new Ce(t,{textViews:this.acs_.map((t=>t.view))})}}function Me(t){return"step"in t&&!s(t.step)?new ct(t.step):null}function ke(t){return"max"in t&&!s(t.max)||"min"in t&&!s(t.min)?new lt({max:t.max,min:t.min}):null}const Ve={monitor:{defaultInterval:200,defaultLineCount:3}};class Le{get index(){return this.index_}set index(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}constructor(){this.emitter=new l,this.index_=-1}}const Ae=p("grl");class Se{get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,i=this.maxValue_,r=[];this.value.rawValue.forEach(((s,o)=>{if(void 0===s)return;const a=pe(o,0,e,0,t.width),l=pe(s,n,i,t.height,0);r.push([a,l].join(","))})),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const s=this.tooltipElem_,o=this.value.rawValue[this.cursor_.index];if(void 0===o)return void s.classList.remove(Ae("t","a"));const a=pe(this.cursor_.index,0,e,0,t.width),l=pe(o,n,i,t.height,0);s.style.left=`${a}px`,s.style.top=`${l}px`,s.textContent=`${this.formatter_(o)}`,s.classList.contains(Ae("t","a"))||(s.classList.add(Ae("t","a"),Ae("t","in")),I(s),s.classList.remove(Ae("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Ae()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(N,"svg");n.classList.add(Ae("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const i=t.createElementNS(N,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const r=t.createElement("div");r.classList.add(Ae("t"),p("tt")()),this.element.appendChild(r),this.tooltipElem_=r,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}}class Te{onGraphMouseLeave_(){this.cursor_.index=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(pe(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.index=Math.floor(pe(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}onGraphPointerUp_(){this.cursor_.index=-1}constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.cursor_=new Le,this.view=new Se(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:this.viewProps}),F(t)){const t=new ce(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}}class ze{get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return null!==(t=this.controller_.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.props.set("title",t)}on(t,e){const i=e.bind(this);return this.controller_.emitter.on(t,(()=>{i(new n(this))})),this}constructor(t){this.controller_=t}}class Re extends n{constructor(t,e,n){super(t),this.cell=e,this.index=n}}class De extends e{cell(t,e){const n=this.controller_.valueController,i=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(i)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}constructor(t){super(t),this.cellToApiMap_=new Map,this.emitter_=new l;const e=this.controller_.valueController;e.cellControllers.forEach(((t,n)=>{const i=new ze(t);this.cellToApiMap_.set(t,i),t.emitter.on("click",(()=>{const t=n%e.size[0],r=Math.floor(n/e.size[0]);this.emitter_.emit("click",{event:new Re(this,i,[t,r])})}))}))}}class Ue{get cellControllers(){return this.cellCs_}constructor(t,e){this.size=e.size;const[n,i]=this.size,r=[];for(let s=0;s<i;s++)for(let i=0;i<n;i++){const n=new w(t,{props:P.fromObject(Object.assign({},e.cellConfig(i,s))),viewProps:it.create()});r.push(n)}this.cellCs_=r,this.viewProps=it.create(),this.viewProps.handleDispose((()=>{this.cellCs_.forEach((t=>{t.viewProps.set("disposed",!0)}))})),this.view=new J(t,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${n}, 1fr)`,this.cellCs_.forEach((t=>{this.view.element.appendChild(t.view.element)}))}}const Ne={id:"buttongrid",type:"blade",css:".tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}",accept(t){const e=A,n=S(t,{cells:e.required.function,size:e.required.array(e.required.number),view:e.required.constant("buttongrid"),label:e.optional.string});return n?{params:n}:null},controller:t=>new $(t.document,{blade:t.blade,props:P.fromObject({label:t.params.label}),valueController:new Ue(t.document,{cellConfig:t.params.cells,size:t.params.size})}),api:t=>t.controller instanceof $&&t.controller.valueController instanceof Ue?new De(t.controller):null};class Ie extends e{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.controller_.valueController.value.emitter.on(t,(t=>{n(new i(this,t.rawValue,void 0,t.options.last))})),this}}function Be(t,e,n){return t*(1-n)+e*n}const Fe=20,Oe=.001,je=100;function Ke(t,e){let n=.25,i=.5,r=-1;for(let s=0;s<Fe;s++){const[s,o]=t.curve(i);if(i+=n*(s<e?1:-1),r=o,n*=.5,Math.abs(e-s)<Oe)break}return r}class qe{get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(t){return!s(t)&&!!Array.isArray(t)&&"number"==typeof t[0]&&"number"==typeof t[1]&&"number"==typeof t[2]&&"number"==typeof t[3]}static equals(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}curve(t){const e=Be(0,this.x1,t),n=Be(0,this.y1,t),i=Be(this.x1,this.x2,t),r=Be(this.y1,this.y2,t),s=Be(this.x2,1,t),o=Be(this.y2,1,t),a=Be(e,i,t),l=Be(n,r,t),c=Be(i,s,t),p=Be(r,o,t);return[Be(a,c,t),Be(l,p,t)]}y(t){if(0===this.cache_.length){const t=[];for(let e=0;e<je;e++)t.push(Ke(this,pe(e,0,je-1,0,1)));this.cache_=t}return this.cache_[Math.round(pe(he(t,0,1),0,1,0,je-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}constructor(t=0,e=0,n=1,i=1){this.cache_=[],this.comps_=[t,e,n,i]}}const He={toComponents:t=>t.toObject(),fromComponents:t=>new qe(...t)};function $e(t){const e=Zt(2);return`cubic-bezier(${t.toObject().map((t=>e(t))).join(", ")})`}const Ge=[0,.5,.5,1];function Ye(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new qe(...Ge);const n=[e[1],e[2],e[3],e[4]].reduce(((t,e)=>{if(!t)return null;const n=Number(e);return isNaN(n)?null:[...t,n]}),[]);return new qe(...null!=n?n:Ge)}const Xe=p("cbz");class We{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Xe()),e.viewProps.bindClassModifiers(this.element),e.foldable.bindExpandedClass(this.element,Xe(void 0,"expanded")),v(e.foldable,"completed",b(this.element,Xe(void 0,"cpl")));const n=t.createElement("div");n.classList.add(Xe("h")),this.element.appendChild(n);const i=t.createElement("button");i.classList.add(Xe("b")),e.viewProps.bindDisabled(i);const r=t.createElementNS(N,"svg");r.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',i.appendChild(r),n.appendChild(i),this.buttonElement=i;const s=t.createElement("div");if(s.classList.add(Xe("t")),n.appendChild(s),this.textElement=s,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Xe("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const Ze=p("cbzp");class Qe{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ze()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Ze("g")),this.element.appendChild(n),this.graphElement=n;const i=t.createElement("div");i.classList.add(Ze("t")),this.element.appendChild(i),this.textElement=i}}function Je(t,e){const n=new MutationObserver((t=>{for(const i of t)"childList"===i.type&&i.addedNodes.forEach((t=>{t.contains(t)&&(e(),n.disconnect())}))})),i=t.ownerDocument;n.observe(i.body,{attributes:!0,childList:!0,subtree:!0})}const tn=p("cbzg");function en(t,e){return n=>e(t(n))}class nn{getVertMargin_(t){return.25*t}valueToPosition(t,e){const n=this.element.getBoundingClientRect(),i=n.width,r=n.height,s=this.getVertMargin_(r);return{x:pe(t,0,1,0,i),y:pe(e,0,1,r-s,s)}}positionToValue(t,e){const n=this.element.getBoundingClientRect(),i=n.width,r=n.height,s=this.getVertMargin_(r);return{x:he(pe(t,0,i,0,1),0,1),y:pe(e,r-s,s,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map((t=>{const e=this.valueToPosition(0,t),n=this.valueToPosition(1,t);return[`M ${e.x},${e.y}`,`L ${n.x},${n.y}`].join(" ")})).join(" "));const t=this.value_.rawValue,e=[];let n=0;for(;;){const i=this.valueToPosition(...t.curve(n));if(e.push([i.x,i.y].join(",")),n>=1)break;n=Math.min(n+.05,1)}this.lineElem_.setAttributeNS(null,"points",e.join(" "));const i=t.toObject();[0,1].forEach((t=>{const e=this.valueToPosition(t,t),n=this.valueToPosition(i[2*t],i[2*t+1]),r=this.vectorElems_[t];r.setAttributeNS(null,"x1",String(e.x)),r.setAttributeNS(null,"y1",String(e.y)),r.setAttributeNS(null,"x2",String(n.x)),r.setAttributeNS(null,"y2",String(n.y));const s=this.handleElems_[t];s.style.left=`${n.x}px`,s.style.top=`${n.y}px`}))}onValueChange_(){this.refresh()}constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(tn()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(tn("p")),this.element.appendChild(n),this.previewElement=n;const i=t.createElementNS(N,"svg");i.classList.add(tn("g")),this.element.appendChild(i),this.svgElem_=i;const r=t.createElementNS(N,"path");r.classList.add(tn("u")),this.svgElem_.appendChild(r),this.guideElem_=r;const s=t.createElementNS(N,"polyline");s.classList.add(tn("l")),this.svgElem_.appendChild(s),this.lineElem_=s,this.handleElems_=[t.createElement("div"),t.createElement("div")],this.handleElems_.forEach((t=>{t.classList.add(tn("h")),this.element.appendChild(t)})),this.vectorElems_=[t.createElementNS(N,"line"),t.createElementNS(N,"line")],this.vectorElems_.forEach((t=>{t.classList.add(tn("v")),this.svgElem_.appendChild(t)})),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=e.selection,this.handleElems_.forEach(((t,e)=>{d(this.sel_,en((t=>t===e),b(t,tn("h","sel"))))})),Je(this.element,(()=>{this.refresh()}))}}const rn=24,sn=400,on=1e3,an=p("cbzprv");class ln{play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(an("m","a")),this.startTime_=(new Date).getTime()+sn,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(an("m","a"))}onDispose_(){this.stop()}updateMarker_(t){const e=this.value_.rawValue.y(he(t,0,1));this.markerElem_.style.left=100*e+"%"}refresh(){const t=this.svgElem_.getBoundingClientRect(),e=t.width,n=t.height,i=[],r=this.value_.rawValue;for(let t=0;t<rn;t++){const s=pe(t,0,rn-1,0,1),o=pe(r.y(s),0,1,0,e);i.push(`M ${o},0 v${n}`)}this.ticksElem_.setAttributeNS(null,"d",i.join(" "))}onTimer_(){if(null===this.startTime_)return;const t=(new Date).getTime()-this.startTime_,e=t/on;this.updateMarker_(e),t>on+sn&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}constructor(t,e){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(an()),e.viewProps.bindClassModifiers(this.element);const n=t.createElementNS(N,"svg");n.classList.add(an("g")),this.element.appendChild(n),this.svgElem_=n;const i=t.createElementNS(N,"path");i.classList.add(an("t")),this.svgElem_.appendChild(i),this.ticksElem_=i;const r=t.createElement("div");r.classList.add(an("m")),this.element.appendChild(r),this.markerElem_=r,this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_),e.viewProps.handleDispose(this.onDispose_),Je(this.element,(()=>{this.refresh()}))}}function cn(t,e,n,i){const r=n-t,s=i-e;return Math.sqrt(r*r+s*s)}function pn(t,e,n,i){const r=cn(t,e,n,i),s=Math.atan2(i-e,n-t),o=Math.round(s/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(o)*r,y:e+Math.sin(o)*r}}class un{refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(t,e,n){const i=this.sel_.rawValue,r=this.value.rawValue.toObject(),s=this.view.positionToValue(t.x,t.y),o=e?pn(i,i,s.x,s.y):s;r[2*i]=o.x,r[2*i+1]=o.y,this.value.setRawValue(new qe(...r),n)}onPointerDown_(t){const e=t.data;if(!e.point)return;const n=this.value.rawValue,i=this.view.valueToPosition(n.x1,n.y1),r=cn(e.point.x,e.point.y,i.x,i.y),s=this.view.valueToPosition(n.x2,n.y2),o=cn(e.point.x,e.point.y,s.x,s.y);this.sel_.rawValue=r<=o?0:1,this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(t){const e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(t){const e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(t){ae(t.key)&&t.preventDefault();const e=this.sel_.rawValue,n=this.value.rawValue.toObject();n[2*e]+=ie(this.baseStep_,se(t)),n[2*e+1]+=ie(this.baseStep_,re(t)),this.value.setRawValue(new qe(...n),{forceEmit:!1,last:!1})}onKeyUp_(t){ae(t.key)&&t.preventDefault();const e=ie(this.baseStep_,se(t)),n=ie(this.baseStep_,re(t));0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.sel_=C(0),this.viewProps=e.viewProps,this.view=new nn(t,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new ln(t,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",(t=>{t.stopImmediatePropagation(),t.preventDefault(),this.prevView_.play()})),this.view.previewElement.appendChild(this.prevView_.element);const n=new ce(this.view.element);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}}class hn{get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map((t=>t.inputElement))]}refresh(){this.gc_.refresh()}constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Qe(t,{viewProps:this.viewProps}),this.gc_=new un(t,{baseStep:e.axis.baseStep,value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const n=Object.assign(Object.assign({},e.axis),{constraint:new lt({max:1,min:0})}),i=Object.assign(Object.assign({},e.axis),{constraint:void 0});this.tc_=new Ee(t,{assembly:He,axes:[n,i,n,i],parser:Xt,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}}class dn{onButtonBlur_(t){if(!this.popC_)return;const e=r(t.relatedTarget);e&&this.popC_.view.element.contains(e)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=j(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!F(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_&&"Escape"===t.key&&(this.popC_.shows.rawValue=!1)}constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=X(e.expanded),this.view=new We(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new mt(t,{parser:Ye,props:P.fromObject({formatter:$e}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_="popup"===e.pickerLayout?new ht(t,{viewProps:this.viewProps}):null;const n=new hn(t,{axis:e.axis,value:this.value,viewProps:this.viewProps});n.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=n,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),d(this.popC_.shows,(t=>{t&&n.refresh()})),ne({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Q(this.foldable_,this.view.pickerElement))}}function vn(){return new xe({assembly:He,components:[0,1,2,3].map((t=>t%2==0?new lt({min:0,max:1}):void 0))})}const mn={id:"cubic-bezier",type:"blade",css:".tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}",accept(t){const e=A,n=S(t,{value:e.required.array(e.required.number),view:e.required.constant("cubicbezier"),expanded:e.optional.boolean,label:e.optional.string,picker:e.optional.custom((t=>"inline"===t||"popup"===t?t:void 0))});return n?{params:n}:null},controller(t){var e,n;const i=C(new qe(...t.params.value),{constraint:vn(),equals:qe.equals}),r=new dn(t.document,{axis:{baseStep:.1,textProps:P.fromObject({draggingScale:.01,formatter:Zt(2)})},expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",value:i,viewProps:t.viewProps});return new tt(t.document,{blade:t.blade,props:P.fromObject({label:t.params.label}),valueController:r})},api:t=>t.controller instanceof tt&&t.controller.valueController instanceof dn?new Ie(t.controller):null};class bn extends e{begin(){this.controller_.valueController.begin()}end(){this.controller_.valueController.end()}}const fn=20;class _n{get duration(){return this.duration_}get fps(){return this.fps_}begin(t){this.start_=t.getTime()}calculateFps_(t){if(0===this.timestamps_.length)return null;const e=this.timestamps_[0];return 1e3*(this.frameCount_-e.frameCount)/(t-e.time)}compactTimestamps_(){if(this.timestamps_.length<=fn)return;const t=this.timestamps_.length-fn;this.timestamps_.splice(0,t);const e=this.timestamps_[0].frameCount;this.timestamps_.forEach((t=>{t.frameCount-=e})),this.frameCount_-=e}end(t){if(null===this.start_)return;const e=t.getTime();this.duration_=e-this.start_,this.start_=null,this.fps_=this.calculateFps_(e),this.timestamps_.push({frameCount:this.frameCount_,time:e}),++this.frameCount_,this.compactTimestamps_()}constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}}const gn=p("fps");class wn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(gn()),e.viewProps.bindClassModifiers(this.element),this.graphElement=t.createElement("div"),this.graphElement.classList.add(gn("g")),this.element.appendChild(this.graphElement);const n=t.createElement("div");n.classList.add(gn("l")),this.element.appendChild(n);const i=t.createElement("span");i.classList.add(gn("v")),i.textContent="--",n.appendChild(i),this.valueElement=i;const r=t.createElement("span");r.classList.add(gn("u")),r.textContent="FPS",n.appendChild(r)}}class xn{begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const t=this.stopwatch_.fps;if(null!==t){const e=this.value_.rawValue;this.value_.rawValue=ee(e,t),this.view.valueElement.textContent=t.toFixed(0)}}constructor(t,e){this.stopwatch_=new _n,this.onTick_=this.onTick_.bind(this),this.ticker_=e.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=e.value,this.viewProps=e.viewProps,this.view=new wn(t,{viewProps:this.viewProps}),this.graphC_=new Te(t,{formatter:Zt(0),lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose((()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()}))}}function yn(t,e){return 0===e?new rt:new st(t,null!=e?e:Ve.monitor.defaultInterval)}const Cn={id:"fpsgraph",type:"blade",accept(t){const e=A,n=S(t,{view:e.required.constant("fpsgraph"),interval:e.optional.number,label:e.optional.string,lineCount:e.optional.number,max:e.optional.number,min:e.optional.number});return n?{params:n}:null},controller(t){var e,n,i,r;const s=null!==(e=t.params.interval)&&void 0!==e?e:500;return new $(t.document,{blade:t.blade,props:P.fromObject({label:t.params.label}),valueController:new xn(t.document,{lineCount:null!==(n=t.params.lineCount)&&void 0!==n?n:2,maxValue:null!==(i=t.params.max)&&void 0!==i?i:90,minValue:null!==(r=t.params.min)&&void 0!==r?r:0,ticker:yn(t.document,s),value:Jt(80),viewProps:t.viewProps})})},api:t=>t.controller instanceof $&&t.controller.valueController instanceof xn?new bn(t.controller):null};class Pn{static isObject(t){if("object"!=typeof t||null===t)return!1;const e=t.min,n=t.max;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.min===e.min&&t.max===e.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}constructor(t,e){this.min=t,this.max=e}}const En={fromComponents:t=>new Pn(t[0],t[1]),toComponents:t=>[t.min,t.max]};class Mn{constrain(t){var e,n,i,r,s,o,a,l;if(t.min<=t.max)return new Pn(null!==(n=null===(e=this.edge)||void 0===e?void 0:e.constrain(t.min))&&void 0!==n?n:t.min,null!==(r=null===(i=this.edge)||void 0===i?void 0:i.constrain(t.max))&&void 0!==r?r:t.max);const c=(t.min+t.max)/2;return new Pn(null!==(o=null===(s=this.edge)||void 0===s?void 0:s.constrain(c))&&void 0!==o?o:c,null!==(l=null===(a=this.edge)||void 0===a?void 0:a.constrain(c))&&void 0!==l?l:c)}constructor(t){this.edge=t}}const kn=p("rsltxt");class Vn{constructor(t,e){this.sliderView_=e.sliderView,this.textView_=e.textView,this.element=t.createElement("div"),this.element.classList.add(kn());const n=t.createElement("div");n.classList.add(kn("s")),n.appendChild(this.sliderView_.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(kn("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const Ln=p("rsl");class An{valueToX_(t){return 100*he(pe(t,this.minValue_,this.maxValue_,0,1),0,1)}update(){const t=this.value_.rawValue;0===t.length?this.element.classList.add(Ln(void 0,"zero")):this.element.classList.remove(Ln(void 0,"zero"));const e=[this.valueToX_(t.min),this.valueToX_(t.max)];this.barElement.style.left=`${e[0]}%`,this.barElement.style.right=100-e[1]+"%",this.knobElements.forEach(((t,n)=>{t.style.left=`${e[n]}%`}))}onValueChange_(){this.update()}constructor(t,e){this.maxValue_=e.maxValue,this.minValue_=e.minValue,this.element=t.createElement("div"),this.element.classList.add(Ln()),e.viewProps.bindClassModifiers(this.element),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_.bind(this));const n=t.createElement("div");n.classList.add(Ln("t")),this.element.appendChild(n),this.trackElement=n;const i=t.createElement("div");i.classList.add(Ln("b")),n.appendChild(i),this.barElement=i;const r=["min","max"].map((e=>{const i=t.createElement("div");return i.classList.add(Ln("k"),Ln("k",e)),n.appendChild(i),i}));this.knobElements=[r[0],r[1]],this.update()}}class Sn{ofs_(){return"min"===this.grabbing_?this.view.knobElements[0].getBoundingClientRect().width/2:"max"===this.grabbing_?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(t){return t.point?pe((t.point.x+this.ofs_())/t.bounds.width,0,1,this.minValue_,this.maxValue_):null}onPointerDown_(t){if(!t.data.point)return;const e=t.data.point.x/t.data.bounds.width,n=this.value.rawValue,i=pe(n.min,this.minValue_,this.maxValue_,0,1),r=pe(n.max,this.minValue_,this.maxValue_,0,1);Math.abs(r-e)<=.025?this.grabbing_="max":Math.abs(i-e)<=.025?this.grabbing_="min":e>=i&&e<=r?(this.grabbing_="length",this.grabOffset_=pe(e-i,0,1,0,this.maxValue_-this.minValue_)):e<i?(this.grabbing_="min",this.onPointerMove_(t)):e>r&&(this.grabbing_="max",this.onPointerMove_(t))}applyPointToValue_(t,e){const n=this.valueFromData_(t);if(null!==n)if("min"===this.grabbing_)this.value.setRawValue(new Pn(n,this.value.rawValue.max),e);else if("max"===this.grabbing_)this.value.setRawValue(new Pn(this.value.rawValue.min,n),e);else if("length"===this.grabbing_){const t=this.value.rawValue.length;let i=n-this.grabOffset_,r=i+t;i<this.minValue_?(i=this.minValue_,r=this.minValue_+t):r>this.maxValue_&&(i=this.maxValue_-t,r=this.maxValue_),this.value.setRawValue(new Pn(i,r),e)}}onPointerMove_(t){this.applyPointToValue_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.applyPointToValue_(t.data,{forceEmit:!0,last:!0}),this.grabbing_=null}constructor(t,e){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.maxValue_=e.maxValue,this.minValue_=e.minValue,this.viewProps=e.viewProps,this.value=e.value,this.view=new An(t,{maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:e.viewProps});const n=new ce(this.view.trackElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}}class Tn{get textController(){return this.tc_}constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sc_=new Sn(t,e);const n={baseStep:e.baseStep,constraint:e.constraint,textProps:P.fromObject({draggingScale:e.draggingScale,formatter:e.formatter})};this.tc_=new Ee(t,{assembly:En,axes:[n,n],parser:e.parser,value:this.value,viewProps:e.viewProps}),this.view=new Vn(t,{sliderView:this.sc_.view,textView:this.tc_.view})}}function zn(t){return Pn.isObject(t)?new Pn(t.min,t.max):new Pn(0,0)}function Rn(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function Dn(t){const e=[],n=ke(t);n&&e.push(n);const i=Me(t);return i&&e.push(i),new Mn(new ot(e))}const Un={id:"input-interval",type:"input",css:".tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}",accept:(t,e)=>{if(!Pn.isObject(t))return null;const n=A,i=S(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,step:n.optional.number});return i?{initialValue:new Pn(t.min,t.max),params:i}:null},binding:{reader:t=>zn,constraint:t=>Dn(t.params),equals:Pn.equals,writer:t=>Rn},controller(t){var e;const n=t.value,i=t.constraint;if(!(i instanceof Mn))throw a.shouldNeverHappen();const r=(n.rawValue.min+n.rawValue.max)/2,s=null!==(e=t.params.format)&&void 0!==e?e:Zt(_e(i.edge,r)),o=i.edge&&at(i.edge,lt);if(void 0!==(null==o?void 0:o.minValue)&&void 0!==(null==o?void 0:o.maxValue))return new Tn(t.document,{baseStep:ge(i.edge),constraint:i.edge,draggingScale:we(o,r),formatter:s,maxValue:o.maxValue,minValue:o.minValue,parser:Xt,value:n,viewProps:t.viewProps});const l={baseStep:ge(i.edge),constraint:i.edge,textProps:P.fromObject({draggingScale:r,formatter:s})};return new Ee(t.document,{assembly:En,axes:[l,l],parser:Xt,value:n,viewProps:t.viewProps})}};class Nn{get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return null!==(t=this.controller_.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.props.set("title",t)}constructor(t){this.controller_=t}}class In extends i{constructor(t,e,n,i,r){super(t,i,r),this.cell=e,this.index=n}}class Bn extends e{get value(){return this.controller_.value}cell(t,e){const n=this.controller_.valueController,i=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(i)}on(t,e){const n=e.bind(this);this.controller_.value.emitter.on(t,(t=>{const e=this.controller_.valueController,i=e.findCellByValue(t.rawValue);if(!i)return;const r=this.cellToApiMap_.get(i);if(!r)return;const s=e.cellControllers.indexOf(i);n(new In(this,r,[s%e.size[0],Math.floor(s/e.size[0])],t.rawValue,void 0))}))}constructor(t){super(t),this.cellToApiMap_=new Map,this.controller_.valueController.cellControllers.forEach((t=>{const e=new Nn(t);this.cellToApiMap_.set(t,e)}))}}const Fn=p("rad");class On{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Fn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(Fn("l")),this.element.appendChild(n);const i=t.createElement("input");i.classList.add(Fn("i")),i.name=e.name,i.type="radio",e.viewProps.bindDisabled(i),n.appendChild(i),this.inputElement=i;const r=t.createElement("div");r.classList.add(Fn("b")),n.appendChild(r);const s=t.createElement("div");s.classList.add(Fn("t")),r.appendChild(s),v(e.props,"title",(t=>{s.textContent=t}))}}class jn{constructor(t,e){this.props=e.props,this.viewProps=e.viewProps,this.view=new On(t,{name:e.name,props:this.props,viewProps:this.viewProps})}}class Kn{get cellControllers(){return this.cellCs_}findCellByValue(t){const e=this.cellValues_.findIndex((e=>e===t));return e<0?null:this.cellCs_[e]}onCellInputChange_(t){const e=t.currentTarget,n=this.cellCs_.findIndex((t=>t.view.inputElement===e));n<0||(this.value.rawValue=this.cellValues_[n])}constructor(t,e){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=e.size;const[n,i]=this.size;for(let r=0;r<i;r++)for(let i=0;i<n;i++){const n=new jn(t,{name:e.groupName,props:P.fromObject(Object.assign({},e.cellConfig(i,r))),viewProps:it.create()});this.cellCs_.push(n),this.cellValues_.push(e.cellConfig(i,r).value)}this.value=e.value,d(this.value,(t=>{const e=this.findCellByValue(t);e&&(e.view.inputElement.checked=!0)})),this.viewProps=it.create(),this.view=new J(t,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${n}, 1fr)`,this.cellCs_.forEach((t=>{t.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(t.view.element)}))}}const qn={id:"radiogrid",type:"blade",accept(t){const e=A,n=S(t,{cells:e.required.function,groupName:e.required.string,size:e.required.array(e.required.number),value:e.required.raw,view:e.required.constant("radiogrid"),label:e.optional.string});return n?{params:n}:null},controller:t=>new tt(t.document,{blade:t.blade,props:P.fromObject({label:t.params.label}),valueController:new Kn(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:C(t.params.value)})}),api:t=>t.controller instanceof tt&&t.controller.valueController instanceof Kn?new Bn(t.controller):null},Hn=[Ne,mn,Cn,Un,qn,{id:"input-radiogrid",type:"input",accept(t,e){if("number"!=typeof t)return null;const n=A,i=S(e,{cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),view:n.required.constant("radiogrid")});return i?{initialValue:t,params:i}:null},binding:{reader:t=>Wt,writer:t=>be},controller:t=>new Kn(t.document,{cellConfig:t.params.cells,groupName:t.params.groupName,size:t.params.size,value:t.value})}];t.CubicBezier=qe,t.plugins=Hn,Object.defineProperty(t,"__esModule",{value:!0})}(a);var b={};t(b,"create",(function(){return g})),t(b,"clone",(function(){return w})),t(b,"copy",(function(){return x})),t(b,"fromValues",(function(){return y})),t(b,"set",(function(){return C})),t(b,"identity",(function(){return P})),t(b,"transpose",(function(){return E})),t(b,"invert",(function(){return M})),t(b,"adjoint",(function(){return k})),t(b,"determinant",(function(){return V})),t(b,"multiply",(function(){return L})),t(b,"translate",(function(){return A})),t(b,"scale",(function(){return S})),t(b,"rotate",(function(){return T})),t(b,"rotateX",(function(){return z})),t(b,"rotateY",(function(){return R})),t(b,"rotateZ",(function(){return D})),t(b,"fromTranslation",(function(){return U})),t(b,"fromScaling",(function(){return N})),t(b,"fromRotation",(function(){return I})),t(b,"fromXRotation",(function(){return B})),t(b,"fromYRotation",(function(){return F})),t(b,"fromZRotation",(function(){return O})),t(b,"fromRotationTranslation",(function(){return j})),t(b,"fromQuat2",(function(){return K})),t(b,"getTranslation",(function(){return q})),t(b,"getScaling",(function(){return H})),t(b,"getRotation",(function(){return $})),t(b,"fromRotationTranslationScale",(function(){return G})),t(b,"fromRotationTranslationScaleOrigin",(function(){return Y})),t(b,"fromQuat",(function(){return X})),t(b,"frustum",(function(){return W})),t(b,"perspectiveNO",(function(){return Z})),t(b,"perspective",(function(){return Q})),t(b,"perspectiveZO",(function(){return J})),t(b,"perspectiveFromFieldOfView",(function(){return tt})),t(b,"orthoNO",(function(){return et})),t(b,"ortho",(function(){return nt})),t(b,"orthoZO",(function(){return it})),t(b,"lookAt",(function(){return rt})),t(b,"targetTo",(function(){return st})),t(b,"str",(function(){return ot})),t(b,"frob",(function(){return at})),t(b,"add",(function(){return lt})),t(b,"subtract",(function(){return ct})),t(b,"multiplyScalar",(function(){return pt})),t(b,"multiplyScalarAndAdd",(function(){return ut})),t(b,"exactEquals",(function(){return ht})),t(b,"equals",(function(){return dt})),t(b,"mul",(function(){return vt})),t(b,"sub",(function(){return mt}));var f="undefined"!=typeof Float32Array?Float32Array:Array,_=Math.random;Math.PI;function g(){var t=new f(16);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function w(t){var e=new f(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function y(t,e,n,i,r,s,o,a,l,c,p,u,h,d,v,m){var b=new f(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=i,b[4]=r,b[5]=s,b[6]=o,b[7]=a,b[8]=l,b[9]=c,b[10]=p,b[11]=u,b[12]=h,b[13]=d,b[14]=v,b[15]=m,b}function C(t,e,n,i,r,s,o,a,l,c,p,u,h,d,v,m,b){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=p,t[10]=u,t[11]=h,t[12]=d,t[13]=v,t[14]=m,t[15]=b,t}function P(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function M(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],p=e[8],u=e[9],h=e[10],d=e[11],v=e[12],m=e[13],b=e[14],f=e[15],_=n*a-i*o,g=n*l-r*o,w=n*c-s*o,x=i*l-r*a,y=i*c-s*a,C=r*c-s*l,P=p*m-u*v,E=p*b-h*v,M=p*f-d*v,k=u*b-h*m,V=u*f-d*m,L=h*f-d*b,A=_*L-g*V+w*k+x*M-y*E+C*P;return A?(A=1/A,t[0]=(a*L-l*V+c*k)*A,t[1]=(r*V-i*L-s*k)*A,t[2]=(m*C-b*y+f*x)*A,t[3]=(h*y-u*C-d*x)*A,t[4]=(l*M-o*L-c*E)*A,t[5]=(n*L-r*M+s*E)*A,t[6]=(b*w-v*C-f*g)*A,t[7]=(p*C-h*w+d*g)*A,t[8]=(o*V-a*M+c*P)*A,t[9]=(i*M-n*V-s*P)*A,t[10]=(v*y-m*w+f*_)*A,t[11]=(u*w-p*y-d*_)*A,t[12]=(a*E-o*k-l*P)*A,t[13]=(n*k-i*E+r*P)*A,t[14]=(m*g-v*x-b*_)*A,t[15]=(p*x-u*g+h*_)*A,t):null}function k(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],p=e[8],u=e[9],h=e[10],d=e[11],v=e[12],m=e[13],b=e[14],f=e[15];return t[0]=a*(h*f-d*b)-u*(l*f-c*b)+m*(l*d-c*h),t[1]=-(i*(h*f-d*b)-u*(r*f-s*b)+m*(r*d-s*h)),t[2]=i*(l*f-c*b)-a*(r*f-s*b)+m*(r*c-s*l),t[3]=-(i*(l*d-c*h)-a*(r*d-s*h)+u*(r*c-s*l)),t[4]=-(o*(h*f-d*b)-p*(l*f-c*b)+v*(l*d-c*h)),t[5]=n*(h*f-d*b)-p*(r*f-s*b)+v*(r*d-s*h),t[6]=-(n*(l*f-c*b)-o*(r*f-s*b)+v*(r*c-s*l)),t[7]=n*(l*d-c*h)-o*(r*d-s*h)+p*(r*c-s*l),t[8]=o*(u*f-d*m)-p*(a*f-c*m)+v*(a*d-c*u),t[9]=-(n*(u*f-d*m)-p*(i*f-s*m)+v*(i*d-s*u)),t[10]=n*(a*f-c*m)-o*(i*f-s*m)+v*(i*c-s*a),t[11]=-(n*(a*d-c*u)-o*(i*d-s*u)+p*(i*c-s*a)),t[12]=-(o*(u*b-h*m)-p*(a*b-l*m)+v*(a*h-l*u)),t[13]=n*(u*b-h*m)-p*(i*b-r*m)+v*(i*h-r*u),t[14]=-(n*(a*b-l*m)-o*(i*b-r*m)+v*(i*l-r*a)),t[15]=n*(a*h-l*u)-o*(i*h-r*u)+p*(i*l-r*a),t}function V(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],p=t[9],u=t[10],h=t[11],d=t[12],v=t[13],m=t[14],b=t[15];return(e*o-n*s)*(u*b-h*m)-(e*a-i*s)*(p*b-h*v)+(e*l-r*s)*(p*m-u*v)+(n*a-i*o)*(c*b-h*d)-(n*l-r*o)*(c*m-u*d)+(i*l-r*a)*(c*v-p*d)}function L(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],p=e[7],u=e[8],h=e[9],d=e[10],v=e[11],m=e[12],b=e[13],f=e[14],_=e[15],g=n[0],w=n[1],x=n[2],y=n[3];return t[0]=g*i+w*a+x*u+y*m,t[1]=g*r+w*l+x*h+y*b,t[2]=g*s+w*c+x*d+y*f,t[3]=g*o+w*p+x*v+y*_,g=n[4],w=n[5],x=n[6],y=n[7],t[4]=g*i+w*a+x*u+y*m,t[5]=g*r+w*l+x*h+y*b,t[6]=g*s+w*c+x*d+y*f,t[7]=g*o+w*p+x*v+y*_,g=n[8],w=n[9],x=n[10],y=n[11],t[8]=g*i+w*a+x*u+y*m,t[9]=g*r+w*l+x*h+y*b,t[10]=g*s+w*c+x*d+y*f,t[11]=g*o+w*p+x*v+y*_,g=n[12],w=n[13],x=n[14],y=n[15],t[12]=g*i+w*a+x*u+y*m,t[13]=g*r+w*l+x*h+y*b,t[14]=g*s+w*c+x*d+y*f,t[15]=g*o+w*p+x*v+y*_,t}function A(t,e,n){var i,r,s,o,a,l,c,p,u,h,d,v,m=n[0],b=n[1],f=n[2];return e===t?(t[12]=e[0]*m+e[4]*b+e[8]*f+e[12],t[13]=e[1]*m+e[5]*b+e[9]*f+e[13],t[14]=e[2]*m+e[6]*b+e[10]*f+e[14],t[15]=e[3]*m+e[7]*b+e[11]*f+e[15]):(i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],p=e[7],u=e[8],h=e[9],d=e[10],v=e[11],t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=c,t[7]=p,t[8]=u,t[9]=h,t[10]=d,t[11]=v,t[12]=i*m+a*b+u*f+e[12],t[13]=r*m+l*b+h*f+e[13],t[14]=s*m+c*b+d*f+e[14],t[15]=o*m+p*b+v*f+e[15]),t}function S(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function T(t,e,n,i){var r,s,o,a,l,c,p,u,h,d,v,m,b,f,_,g,w,x,y,C,P,E,M,k,V=i[0],L=i[1],A=i[2],S=Math.hypot(V,L,A);return S<1e-6?null:(V*=S=1/S,L*=S,A*=S,r=Math.sin(n),o=1-(s=Math.cos(n)),a=e[0],l=e[1],c=e[2],p=e[3],u=e[4],h=e[5],d=e[6],v=e[7],m=e[8],b=e[9],f=e[10],_=e[11],g=V*V*o+s,w=L*V*o+A*r,x=A*V*o-L*r,y=V*L*o-A*r,C=L*L*o+s,P=A*L*o+V*r,E=V*A*o+L*r,M=L*A*o-V*r,k=A*A*o+s,t[0]=a*g+u*w+m*x,t[1]=l*g+h*w+b*x,t[2]=c*g+d*w+f*x,t[3]=p*g+v*w+_*x,t[4]=a*y+u*C+m*P,t[5]=l*y+h*C+b*P,t[6]=c*y+d*C+f*P,t[7]=p*y+v*C+_*P,t[8]=a*E+u*M+m*k,t[9]=l*E+h*M+b*k,t[10]=c*E+d*M+f*k,t[11]=p*E+v*M+_*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function z(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],p=e[9],u=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+c*i,t[5]=o*r+p*i,t[6]=a*r+u*i,t[7]=l*r+h*i,t[8]=c*r-s*i,t[9]=p*r-o*i,t[10]=u*r-a*i,t[11]=h*r-l*i,t}function R(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],p=e[9],u=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-c*i,t[1]=o*r-p*i,t[2]=a*r-u*i,t[3]=l*r-h*i,t[8]=s*i+c*r,t[9]=o*i+p*r,t[10]=a*i+u*r,t[11]=l*i+h*r,t}function D(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],p=e[5],u=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+c*i,t[1]=o*r+p*i,t[2]=a*r+u*i,t[3]=l*r+h*i,t[4]=c*r-s*i,t[5]=p*r-o*i,t[6]=u*r-a*i,t[7]=h*r-l*i,t}function U(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function N(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,e,n){var i,r,s,o=n[0],a=n[1],l=n[2],c=Math.hypot(o,a,l);return c<1e-6?null:(o*=c=1/c,a*=c,l*=c,i=Math.sin(e),s=1-(r=Math.cos(e)),t[0]=o*o*s+r,t[1]=a*o*s+l*i,t[2]=l*o*s-a*i,t[3]=0,t[4]=o*a*s-l*i,t[5]=a*a*s+r,t[6]=l*a*s+o*i,t[7]=0,t[8]=o*l*s+a*i,t[9]=a*l*s-o*i,t[10]=l*l*s+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function B(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function F(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function j(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=i+i,l=r+r,c=s+s,p=i*a,u=i*l,h=i*c,d=r*l,v=r*c,m=s*c,b=o*a,f=o*l,_=o*c;return t[0]=1-(d+m),t[1]=u+_,t[2]=h-f,t[3]=0,t[4]=u-_,t[5]=1-(p+m),t[6]=v+b,t[7]=0,t[8]=h+f,t[9]=v-b,t[10]=1-(p+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function K(t,e){var n=new f(3),i=-e[0],r=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],p=e[7],u=i*i+r*r+s*s+o*o;return u>0?(n[0]=2*(a*o+p*i+l*s-c*r)/u,n[1]=2*(l*o+p*r+c*i-a*s)/u,n[2]=2*(c*o+p*s+a*r-l*i)/u):(n[0]=2*(a*o+p*i+l*s-c*r),n[1]=2*(l*o+p*r+c*i-a*s),n[2]=2*(c*o+p*s+a*r-l*i)),j(t,e,n),t}function q(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function H(t,e){var n=e[0],i=e[1],r=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],p=e[10];return t[0]=Math.hypot(n,i,r),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(l,c,p),t}function $(t,e){var n=new f(3);H(n,e);var i=1/n[0],r=1/n[1],s=1/n[2],o=e[0]*i,a=e[1]*r,l=e[2]*s,c=e[4]*i,p=e[5]*r,u=e[6]*s,h=e[8]*i,d=e[9]*r,v=e[10]*s,m=o+p+v,b=0;return m>0?(b=2*Math.sqrt(m+1),t[3]=.25*b,t[0]=(u-d)/b,t[1]=(h-l)/b,t[2]=(a-c)/b):o>p&&o>v?(b=2*Math.sqrt(1+o-p-v),t[3]=(u-d)/b,t[0]=.25*b,t[1]=(a+c)/b,t[2]=(h+l)/b):p>v?(b=2*Math.sqrt(1+p-o-v),t[3]=(h-l)/b,t[0]=(a+c)/b,t[1]=.25*b,t[2]=(u+d)/b):(b=2*Math.sqrt(1+v-o-p),t[3]=(a-c)/b,t[0]=(h+l)/b,t[1]=(u+d)/b,t[2]=.25*b),t}function G(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3],l=r+r,c=s+s,p=o+o,u=r*l,h=r*c,d=r*p,v=s*c,m=s*p,b=o*p,f=a*l,_=a*c,g=a*p,w=i[0],x=i[1],y=i[2];return t[0]=(1-(v+b))*w,t[1]=(h+g)*w,t[2]=(d-_)*w,t[3]=0,t[4]=(h-g)*x,t[5]=(1-(u+b))*x,t[6]=(m+f)*x,t[7]=0,t[8]=(d+_)*y,t[9]=(m-f)*y,t[10]=(1-(u+v))*y,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Y(t,e,n,i,r){var s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,p=o+o,u=a+a,h=s*c,d=s*p,v=s*u,m=o*p,b=o*u,f=a*u,_=l*c,g=l*p,w=l*u,x=i[0],y=i[1],C=i[2],P=r[0],E=r[1],M=r[2],k=(1-(m+f))*x,V=(d+w)*x,L=(v-g)*x,A=(d-w)*y,S=(1-(h+f))*y,T=(b+_)*y,z=(v+g)*C,R=(b-_)*C,D=(1-(h+m))*C;return t[0]=k,t[1]=V,t[2]=L,t[3]=0,t[4]=A,t[5]=S,t[6]=T,t[7]=0,t[8]=z,t[9]=R,t[10]=D,t[11]=0,t[12]=n[0]+P-(k*P+A*E+z*M),t[13]=n[1]+E-(V*P+S*E+R*M),t[14]=n[2]+M-(L*P+T*E+D*M),t[15]=1,t}function X(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,l=r+r,c=n*o,p=i*o,u=i*a,h=r*o,d=r*a,v=r*l,m=s*o,b=s*a,f=s*l;return t[0]=1-u-v,t[1]=p+f,t[2]=h-b,t[3]=0,t[4]=p-f,t[5]=1-c-v,t[6]=d+m,t[7]=0,t[8]=h+b,t[9]=d-m,t[10]=1-c-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function W(t,e,n,i,r,s,o){var a=1/(n-e),l=1/(r-i),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function Z(t,e,n,i,r){var s,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(s=1/(i-r),t[10]=(r+i)*s,t[14]=2*r*i*s):(t[10]=-1,t[14]=-2*i),t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Q=Z;function J(t,e,n,i,r){var s,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(s=1/(i-r),t[10]=r*s,t[14]=r*i*s):(t[10]=-1,t[14]=-i),t}function tt(t,e,n,i){var r=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(r+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(r-s)*c*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t}function et(t,e,n,i,r,s,o){var a=1/(e-n),l=1/(i-r),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*l,t[14]=(o+s)*c,t[15]=1,t}var nt=et;function it(t,e,n,i,r,s,o){var a=1/(e-n),l=1/(i-r),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*l,t[14]=s*c,t[15]=1,t}function rt(t,e,n,i){var r,s,o,a,l,c,p,u,h,d,v=e[0],m=e[1],b=e[2],f=i[0],_=i[1],g=i[2],w=n[0],x=n[1],y=n[2];return Math.abs(v-w)<1e-6&&Math.abs(m-x)<1e-6&&Math.abs(b-y)<1e-6?P(t):(p=v-w,u=m-x,h=b-y,r=_*(h*=d=1/Math.hypot(p,u,h))-g*(u*=d),s=g*(p*=d)-f*h,o=f*u-_*p,(d=Math.hypot(r,s,o))?(r*=d=1/d,s*=d,o*=d):(r=0,s=0,o=0),a=u*o-h*s,l=h*r-p*o,c=p*s-u*r,(d=Math.hypot(a,l,c))?(a*=d=1/d,l*=d,c*=d):(a=0,l=0,c=0),t[0]=r,t[1]=a,t[2]=p,t[3]=0,t[4]=s,t[5]=l,t[6]=u,t[7]=0,t[8]=o,t[9]=c,t[10]=h,t[11]=0,t[12]=-(r*v+s*m+o*b),t[13]=-(a*v+l*m+c*b),t[14]=-(p*v+u*m+h*b),t[15]=1,t)}function st(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=i[0],l=i[1],c=i[2],p=r-n[0],u=s-n[1],h=o-n[2],d=p*p+u*u+h*h;d>0&&(p*=d=1/Math.sqrt(d),u*=d,h*=d);var v=l*h-c*u,m=c*p-a*h,b=a*u-l*p;return(d=v*v+m*m+b*b)>0&&(v*=d=1/Math.sqrt(d),m*=d,b*=d),t[0]=v,t[1]=m,t[2]=b,t[3]=0,t[4]=u*b-h*m,t[5]=h*v-p*b,t[6]=p*m-u*v,t[7]=0,t[8]=p,t[9]=u,t[10]=h,t[11]=0,t[12]=r,t[13]=s,t[14]=o,t[15]=1,t}function ot(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function at(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function lt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function ct(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function pt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function ut(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t}function ht(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function dt(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],p=t[8],u=t[9],h=t[10],d=t[11],v=t[12],m=t[13],b=t[14],f=t[15],_=e[0],g=e[1],w=e[2],x=e[3],y=e[4],C=e[5],P=e[6],E=e[7],M=e[8],k=e[9],V=e[10],L=e[11],A=e[12],S=e[13],T=e[14],z=e[15];return Math.abs(n-_)<=1e-6*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-g)<=1e-6*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(r-w)<=1e-6*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(s-x)<=1e-6*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(o-y)<=1e-6*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-C)<=1e-6*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(l-P)<=1e-6*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(c-E)<=1e-6*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(p-M)<=1e-6*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(u-k)<=1e-6*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(h-V)<=1e-6*Math.max(1,Math.abs(h),Math.abs(V))&&Math.abs(d-L)<=1e-6*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(v-A)<=1e-6*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(m-S)<=1e-6*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(b-T)<=1e-6*Math.max(1,Math.abs(b),Math.abs(T))&&Math.abs(f-z)<=1e-6*Math.max(1,Math.abs(f),Math.abs(z))}var vt=L,mt=ct,bt={};t(bt,"create",(function(){return me})),t(bt,"identity",(function(){return be})),t(bt,"setAxisAngle",(function(){return fe})),t(bt,"getAxisAngle",(function(){return _e})),t(bt,"getAngle",(function(){return ge})),t(bt,"dot",(function(){return Xe})),t(bt,"multiply",(function(){return we})),t(bt,"rotateX",(function(){return xe})),t(bt,"rotateY",(function(){return ye})),t(bt,"rotateZ",(function(){return Ce})),t(bt,"calculateW",(function(){return Pe})),t(bt,"exp",(function(){return Ee})),t(bt,"ln",(function(){return Me})),t(bt,"pow",(function(){return ke})),t(bt,"scale",(function(){return Ye})),t(bt,"slerp",(function(){return Ve})),t(bt,"random",(function(){return Le})),t(bt,"invert",(function(){return Ae})),t(bt,"conjugate",(function(){return Se})),t(bt,"fromMat3",(function(){return Te})),t(bt,"fromEuler",(function(){return ze})),t(bt,"str",(function(){return Re})),t(bt,"clone",(function(){return je})),t(bt,"fromValues",(function(){return Ke})),t(bt,"copy",(function(){return qe})),t(bt,"set",(function(){return He})),t(bt,"add",(function(){return $e})),t(bt,"mul",(function(){return Ge})),t(bt,"lerp",(function(){return We})),t(bt,"length",(function(){return Ze})),t(bt,"len",(function(){return Qe})),t(bt,"squaredLength",(function(){return Je})),t(bt,"sqrLen",(function(){return tn})),t(bt,"normalize",(function(){return en})),t(bt,"exactEquals",(function(){return nn})),t(bt,"equals",(function(){return rn})),t(bt,"rotationTo",(function(){return sn})),t(bt,"sqlerp",(function(){return on})),t(bt,"setAxes",(function(){return an}));var ft={};function _t(){var t=new f(3);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function gt(t){var e=new f(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function wt(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function xt(t,e,n){var i=new f(3);return i[0]=t,i[1]=e,i[2]=n,i}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ct(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function Pt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Et(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Mt(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function kt(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Vt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Lt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function At(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function St(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Tt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function zt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Rt(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function Dt(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.hypot(n,i,r)}function Ut(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function Nt(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function It(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Bt(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Ft(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function Ot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function jt(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=r*l-s*a,t[1]=s*o-i*l,t[2]=i*a-r*o,t}function Kt(t,e,n,i){var r=e[0],s=e[1],o=e[2];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t}function qt(t,e,n,i,r,s){var o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),p=o*(3-2*s);return t[0]=e[0]*a+n[0]*l+i[0]*c+r[0]*p,t[1]=e[1]*a+n[1]*l+i[1]*c+r[1]*p,t[2]=e[2]*a+n[2]*l+i[2]*c+r[2]*p,t}function Ht(t,e,n,i,r,s){var o=1-s,a=o*o,l=s*s,c=a*o,p=3*s*a,u=3*l*o,h=l*s;return t[0]=e[0]*c+n[0]*p+i[0]*u+r[0]*h,t[1]=e[1]*c+n[1]*p+i[1]*u+r[1]*h,t[2]=e[2]*c+n[2]*p+i[2]*u+r[2]*h,t}function $t(t,e){e=e||1;var n=2*_()*Math.PI,i=2*_()-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=i*e,t}function Gt(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/o,t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function Yt(t,e,n){var i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}function Xt(t,e,n){var i=n[0],r=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],p=r*c-s*l,u=s*a-i*c,h=i*l-r*a,d=r*h-s*u,v=s*p-i*h,m=i*u-r*p,b=2*o;return p*=b,u*=b,h*=b,d*=2,v*=2,m*=2,t[0]=a+p+d,t[1]=l+u+v,t[2]=c+h+m,t}function Wt(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Zt(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Qt(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Jt(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),c=l&&Ot(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}function te(t){return t[0]=0,t[1]=0,t[2]=0,t}function ee(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function ne(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function ie(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2];return Math.abs(n-s)<=1e-6*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=1e-6*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=1e-6*Math.max(1,Math.abs(r),Math.abs(a))}t(ft,"create",(function(){return _t})),t(ft,"clone",(function(){return gt})),t(ft,"length",(function(){return wt})),t(ft,"fromValues",(function(){return xt})),t(ft,"copy",(function(){return yt})),t(ft,"set",(function(){return Ct})),t(ft,"add",(function(){return Pt})),t(ft,"subtract",(function(){return Et})),t(ft,"multiply",(function(){return Mt})),t(ft,"divide",(function(){return kt})),t(ft,"ceil",(function(){return Vt})),t(ft,"floor",(function(){return Lt})),t(ft,"min",(function(){return At})),t(ft,"max",(function(){return St})),t(ft,"round",(function(){return Tt})),t(ft,"scale",(function(){return zt})),t(ft,"scaleAndAdd",(function(){return Rt})),t(ft,"distance",(function(){return Dt})),t(ft,"squaredDistance",(function(){return Ut})),t(ft,"squaredLength",(function(){return Nt})),t(ft,"negate",(function(){return It})),t(ft,"inverse",(function(){return Bt})),t(ft,"normalize",(function(){return Ft})),t(ft,"len",(function(){return pe})),t(ft,"dot",(function(){return Ot})),t(ft,"cross",(function(){return jt})),t(ft,"lerp",(function(){return Kt})),t(ft,"hermite",(function(){return qt})),t(ft,"bezier",(function(){return Ht})),t(ft,"random",(function(){return $t})),t(ft,"transformMat4",(function(){return Gt})),t(ft,"transformMat3",(function(){return Yt})),t(ft,"transformQuat",(function(){return Xt})),t(ft,"rotateX",(function(){return Wt})),t(ft,"rotateY",(function(){return Zt})),t(ft,"rotateZ",(function(){return Qt})),t(ft,"angle",(function(){return Jt})),t(ft,"zero",(function(){return te})),t(ft,"str",(function(){return ee})),t(ft,"exactEquals",(function(){return ne})),t(ft,"equals",(function(){return ie})),t(ft,"sub",(function(){return se})),t(ft,"mul",(function(){return oe})),t(ft,"div",(function(){return ae})),t(ft,"dist",(function(){return le})),t(ft,"sqrDist",(function(){return ce})),t(ft,"sqrLen",(function(){return ue})),t(ft,"forEach",(function(){return he}));var re,se=Et,oe=Mt,ae=kt,le=Dt,ce=Ut,pe=wt,ue=Nt,he=(re=_t(),function(t,e,n,i,r,s){var o,a;for(e||(e=3),n||(n=0),a=i?Math.min(i*e+n,t.length):t.length,o=n;o<a;o+=e)re[0]=t[o],re[1]=t[o+1],re[2]=t[o+2],r(re,re,s),t[o]=re[0],t[o+1]=re[1],t[o+2]=re[2];return t});function de(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.hypot(e,n,i,r)}function ve(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}!function(){var t,e=(t=new f(4),f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function me(){var t=new f(4);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function be(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function fe(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function _e(t,e){var n=2*Math.acos(e[3]),i=Math.sin(n/2);return i>1e-6?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n}function ge(t,e){var n=Xe(t,e);return Math.acos(2*n*n-1)}function we(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],p=n[3];return t[0]=i*p+o*a+r*c-s*l,t[1]=r*p+o*l+s*a-i*c,t[2]=s*p+o*c+i*l-r*a,t[3]=o*p-i*a-r*l-s*c,t}function xe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*a,t[1]=r*l+s*a,t[2]=s*l-r*a,t[3]=o*l-i*a,t}function ye(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l-s*a,t[1]=r*l+o*a,t[2]=s*l+i*a,t[3]=o*l-r*a,t}function Ce(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*a,t[1]=r*l-i*a,t[2]=s*l+o*a,t[3]=o*l-s*a,t}function Pe(t,e){var n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t}function Ee(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=Math.sqrt(n*n+i*i+r*r),a=Math.exp(s),l=o>0?a*Math.sin(o)/o:0;return t[0]=n*l,t[1]=i*l,t[2]=r*l,t[3]=a*Math.cos(o),t}function Me(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=Math.sqrt(n*n+i*i+r*r),a=o>0?Math.atan2(o,s)/o:0;return t[0]=n*a,t[1]=i*a,t[2]=r*a,t[3]=.5*Math.log(n*n+i*i+r*r+s*s),t}function ke(t,e,n){return Me(t,e),Ye(t,t,n),Ee(t,t),t}function Ve(t,e,n,i){var r,s,o,a,l,c=e[0],p=e[1],u=e[2],h=e[3],d=n[0],v=n[1],m=n[2],b=n[3];return(s=c*d+p*v+u*m+h*b)<0&&(s=-s,d=-d,v=-v,m=-m,b=-b),1-s>1e-6?(r=Math.acos(s),o=Math.sin(r),a=Math.sin((1-i)*r)/o,l=Math.sin(i*r)/o):(a=1-i,l=i),t[0]=a*c+l*d,t[1]=a*p+l*v,t[2]=a*u+l*m,t[3]=a*h+l*b,t}function Le(t){var e=_(),n=_(),i=_(),r=Math.sqrt(1-e),s=Math.sqrt(e);return t[0]=r*Math.sin(2*Math.PI*n),t[1]=r*Math.cos(2*Math.PI*n),t[2]=s*Math.sin(2*Math.PI*i),t[3]=s*Math.cos(2*Math.PI*i),t}function Ae(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;return t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a,t}function Se(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Te(t,e){var n,i=e[0]+e[4]+e[8];if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*s+o]-e[3*o+s])*n,t[s]=(e[3*s+r]+e[3*r+s])*n,t[o]=(e[3*o+r]+e[3*r+o])*n}return t}function ze(t,e,n,i){var r=.5*Math.PI/180;e*=r,n*=r,i*=r;var s=Math.sin(e),o=Math.cos(e),a=Math.sin(n),l=Math.cos(n),c=Math.sin(i),p=Math.cos(i);return t[0]=s*l*p-o*a*c,t[1]=o*a*p+s*l*c,t[2]=o*l*c-s*a*p,t[3]=o*l*p+s*a*c,t}function Re(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var De,Ue,Ne,Ie,Be,Fe,Oe,je=function(t){var e=new f(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Ke=function(t,e,n,i){var r=new f(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r},qe=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},He=function(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t},$e=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},Ge=we,Ye=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},Xe=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},We=function(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a),t},Ze=de,Qe=Ze,Je=ve,tn=Je,en=function(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t},nn=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},rn=function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1],l=e[2],c=e[3];return Math.abs(n-o)<=1e-6*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=1e-6*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-l)<=1e-6*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-c)<=1e-6*Math.max(1,Math.abs(s),Math.abs(c))},sn=(De=_t(),Ue=xt(1,0,0),Ne=xt(0,1,0),function(t,e,n){var i=Ot(e,n);return i<-.999999?(jt(De,Ue,e),pe(De)<1e-6&&jt(De,Ne,e),Ft(De,De),fe(t,De,Math.PI),t):i>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(jt(De,e,n),t[0]=De[0],t[1]=De[1],t[2]=De[2],t[3]=1+i,en(t,t))}),on=(Ie=me(),Be=me(),function(t,e,n,i,r,s){return Ve(Ie,e,r,s),Ve(Be,n,i,s),Ve(t,Ie,Be,2*s*(1-s)),t}),an=(Fe=new f(9),f!=Float32Array&&(Fe[1]=0,Fe[2]=0,Fe[3]=0,Fe[5]=0,Fe[6]=0,Fe[7]=0),Fe[0]=1,Fe[4]=1,Fe[8]=1,Oe=Fe,function(t,e,n,i){return Oe[0]=n[0],Oe[3]=n[1],Oe[6]=n[2],Oe[1]=i[0],Oe[4]=i[1],Oe[7]=i[2],Oe[2]=-e[0],Oe[5]=-e[1],Oe[8]=-e[2],en(t,Te(t,Oe))}),ln={};function cn(){var t=new f(2);return f!=Float32Array&&(t[0]=0,t[1]=0),t}function pn(t){var e=new f(2);return e[0]=t[0],e[1]=t[1],e}function un(t,e){var n=new f(2);return n[0]=t,n[1]=e,n}function hn(t,e){return t[0]=e[0],t[1]=e[1],t}function dn(t,e,n){return t[0]=e,t[1]=n,t}function vn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function mn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function bn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function fn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function _n(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function gn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function wn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function xn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function yn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Cn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Pn(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function En(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.hypot(n,i)}function Mn(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function kn(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Vn(t){var e=t[0],n=t[1];return e*e+n*n}function Ln(t,e){return t[0]=-e[0],t[1]=-e[1],t}function An(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Sn(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t}function Tn(t,e){return t[0]*e[0]+t[1]*e[1]}function zn(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t}function Rn(t,e,n,i){var r=e[0],s=e[1];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t}function Dn(t,e){e=e||1;var n=2*_()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Un(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t}function Nn(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}function In(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}function Bn(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}function Fn(t,e,n,i){var r=e[0]-n[0],s=e[1]-n[1],o=Math.sin(i),a=Math.cos(i);return t[0]=r*a-s*o+n[0],t[1]=r*o+s*a+n[1],t}function On(t,e){var n=t[0],i=t[1],r=e[0],s=e[1],o=Math.sqrt(n*n+i*i)*Math.sqrt(r*r+s*s),a=o&&(n*r+i*s)/o;return Math.acos(Math.min(Math.max(a,-1),1))}function jn(t){return t[0]=0,t[1]=0,t}function Kn(t){return"vec2("+t[0]+", "+t[1]+")"}function qn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Hn(t,e){var n=t[0],i=t[1],r=e[0],s=e[1];return Math.abs(n-r)<=1e-6*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(i-s)<=1e-6*Math.max(1,Math.abs(i),Math.abs(s))}t(ln,"create",(function(){return cn})),t(ln,"clone",(function(){return pn})),t(ln,"fromValues",(function(){return un})),t(ln,"copy",(function(){return hn})),t(ln,"set",(function(){return dn})),t(ln,"add",(function(){return vn})),t(ln,"subtract",(function(){return mn})),t(ln,"multiply",(function(){return bn})),t(ln,"divide",(function(){return fn})),t(ln,"ceil",(function(){return _n})),t(ln,"floor",(function(){return gn})),t(ln,"min",(function(){return wn})),t(ln,"max",(function(){return xn})),t(ln,"round",(function(){return yn})),t(ln,"scale",(function(){return Cn})),t(ln,"scaleAndAdd",(function(){return Pn})),t(ln,"distance",(function(){return En})),t(ln,"squaredDistance",(function(){return Mn})),t(ln,"length",(function(){return kn})),t(ln,"squaredLength",(function(){return Vn})),t(ln,"negate",(function(){return Ln})),t(ln,"inverse",(function(){return An})),t(ln,"normalize",(function(){return Sn})),t(ln,"len",(function(){return $n})),t(ln,"dot",(function(){return Tn})),t(ln,"cross",(function(){return zn})),t(ln,"lerp",(function(){return Rn})),t(ln,"random",(function(){return Dn})),t(ln,"transformMat2",(function(){return Un})),t(ln,"transformMat2d",(function(){return Nn})),t(ln,"transformMat3",(function(){return In})),t(ln,"transformMat4",(function(){return Bn})),t(ln,"rotate",(function(){return Fn})),t(ln,"angle",(function(){return On})),t(ln,"zero",(function(){return jn})),t(ln,"str",(function(){return Kn})),t(ln,"exactEquals",(function(){return qn})),t(ln,"equals",(function(){return Hn})),t(ln,"sub",(function(){return Gn})),t(ln,"mul",(function(){return Yn})),t(ln,"div",(function(){return Xn})),t(ln,"dist",(function(){return Wn})),t(ln,"sqrDist",(function(){return Zn})),t(ln,"sqrLen",(function(){return Qn})),t(ln,"forEach",(function(){return Jn}));var $n=kn,Gn=mn,Yn=bn,Xn=fn,Wn=En,Zn=Mn,Qn=Vn,Jn=function(){var t=cn();return function(e,n,i,r,s,o){var a,l;for(n||(n=2),i||(i=0),l=r?Math.min(r*n+i,e.length):e.length,a=i;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}();class ti{update(t){const e=16/(t+.01);if(this.pointerDown){const t=10*e;this.followPos.x+=(this.pointerPos.x-this.followPos.x)/t,this.followPos.y+=(this.pointerPos.y-this.followPos.y)/t;const n={x:this.followPos.x-this.prevFollowPos.x,y:this.followPos.y-this.prevFollowPos.y};this.prevFollowPos={...this.followPos};const i=.2*e;this.phi=n.x*i,this.theta=n.y*i}else{const t=.96/Math.max(.5*e,1);this.phi*=t,this.theta*=t}const n=[...this.camera.rotation];this.camera.rotation[0]-=this.theta,this.camera.rotation[1]-=this.phi,this.velocity[0]=this.camera.rotation[0]-n[0],this.velocity[1]=this.camera.rotation[1]-n[1];const i=this.maxLatitude,r=this.minLatitude;this.camera.rotation[0]>i?this.camera.rotation[0]=i:this.camera.rotation[0]<r&&(this.camera.rotation[0]=r),bt.fromEuler(this.camera.orbit,this.camera.rotation[0],this.camera.rotation[1],this.camera.rotation[2]),ft.transformQuat(this.camera.position,[0,0,this.camera.distance],this.camera.orbit),this.updateCallback()}constructor(t,e,n){m(this,"maxLatitude",80),m(this,"minLatitude",-80),m(this,"velocity",[0,0]),this.pointerDown=!1,this.pointerDownPos={x:0,y:0},this.pointerPos={x:0,y:0},this.followPos={x:0,y:0},this.prevFollowPos={x:0,y:0},this.phi=0,this.theta=0,this.camera=e,this.updateCallback=n,t.style.touchAction="none",t.addEventListener("pointerdown",(t=>{this.pointerDownPos={x:t.clientX,y:t.clientY},this.followPos={x:t.clientX,y:t.clientY},this.pointerPos={x:t.clientX,y:t.clientY},this.prevFollowPos={x:t.clientX,y:t.clientY},this.pointerDownCameraUp=[...this.camera.up],this.pointerDownRotation=[...this.camera.rotation],this.pointerDown=!0})),t.addEventListener("pointerup",(t=>{this.pointerDown=!1})),t.addEventListener("pointermove",(t=>{this.pointerDown&&(this.pointerPos={x:t.clientX,y:t.clientY})}))}}function ei(t,e,n,i){const r=t.createProgram();if([t.VERTEX_SHADER,t.FRAGMENT_SHADER].forEach(((n,i)=>{const s=function(t,e,n){const i=t.createShader(e);if(t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))return i;console.error(t.getShaderInfoLog(i)),t.deleteShader(i)}(t,n,e[i]);t.attachShader(r,s)})),n&&t.transformFeedbackVaryings(r,n,t.SEPARATE_ATTRIBS),i)for(const e in i)t.bindAttribLocation(r,i[e],e);t.linkProgram(r);if(t.getProgramParameter(r,t.LINK_STATUS))return r;console.error(t.getProgramInfoLog(r)),t.deleteProgram(r)}function ni(t,e,n){const i=t.createVertexArray();t.bindVertexArray(i);for(const[n,i,r]of e)-1!=i&&(t.bindBuffer(t.ARRAY_BUFFER,n),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,r,t.FLOAT,!1,0,0));if(n){const e=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),t.STATIC_DRAW)}return t.bindVertexArray(null),i}function ii(t,e,n){const i=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,e,n),t.bindBuffer(t.ARRAY_BUFFER,null),i}function ri(t,e){const n=t.createTransformFeedback();return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n),e.forEach(((e,n)=>t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,n,e))),n}function si(t,e,n,i){t.bindFramebuffer(t.FRAMEBUFFER,e),t.viewport(0,0,n,i)}function oi(t,e,n,i,r){const s=t.createTexture();return t.bindTexture(t.TEXTURE_2D,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n),s}class ai{update(t=0,e=0){const n=this.gl;n.enable(n.RASTERIZER_DISCARD),n.useProgram(this.program),n.bindVertexArray(this.currentRenderState.computeVAO),n.uniform1f(this.locations.u_deltaTime,e+1e-4),n.uniform1i(this.locations.u_frames,t),n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,this.currentRenderState.transformFeedback),n.beginTransformFeedback(n.POINTS),n.drawArrays(n.POINTS,0,this.NUM_PARTICLES),n.endTransformFeedback(),n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),n.disable(n.RASTERIZER_DISCARD);const i=this.currentRenderState.resultPositionBufferIndex,r=this.currentRenderState;return this.currentRenderState=this.nextRenderState,this.nextRenderState=r,i}constructor(t,n){this.gl=t,this.program=ei(t,[e("#version 300 es\n#define GLSLIFY 1\n\nuniform float u_deltaTime;\nuniform int u_frames;\n\nconst vec3 capsuleA = vec3(0., .5, 0.);\nconst vec3 capsuleB = vec3(0., -.5, 0.);\nconst float capsuleRadius = .5;\n\nin vec3 a_oldPosition;\nin vec3 a_oldVelocity;\n\nout vec3 t_newPosition;\nout vec3 t_newVelocity;\n\n// Capsule SDF from https://www.iquilezles.org/www/articles/distfunctions/distfunctions.htm\nfloat sdCapsule( vec3 p, vec3 a, vec3 b, float r )\n{\n  vec3 pa = p - a, ba = b - a;\n  float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n  return length( pa - ba*h ) - r;\n}\n\nfloat f(vec3 p) {\n    return sdCapsule(p, capsuleA, capsuleB, capsuleRadius);\n}\n\n// https://www.iquilezles.org/www/articles/normalsSDF/normalsSDF.htm\nvec3 sdCapsuleNormal( in vec3 p )\n{\n    const float eps = 0.0001;\n    const vec2 h = vec2(eps,0);\n    return normalize( vec3(f(p+h.xyy) - f(p-h.xyy),\n                           f(p+h.yxy) - f(p-h.yxy),\n                           f(p+h.yyx) - f(p-h.yyx) ) );\n}\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_1(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_1(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_1(vec4 x) {\n     return mod289_1(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise_1(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_0 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_0;\n  vec3 i1 = min( g_0.xyz, l.zxy );\n  vec3 i2 = max( g_0.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_1(i);\n  vec4 p = permute_1( permute_1( permute_1(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nvec3 snoiseVec3( vec3 x ){\n\n  float s  = snoise_1(vec3( x ));\n  float s1 = snoise_1(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n  float s2 = snoise_1(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n  vec3 c = vec3( s , s1 , s2 );\n  return c;\n\n}\n\nvec3 curlNoise( vec3 p ){\n  \n  const float e = .1;\n  vec3 dx = vec3( e   , 0.0 , 0.0 );\n  vec3 dy = vec3( 0.0 , e   , 0.0 );\n  vec3 dz = vec3( 0.0 , 0.0 , e   );\n\n  vec3 p_x0 = snoiseVec3( p - dx );\n  vec3 p_x1 = snoiseVec3( p + dx );\n  vec3 p_y0 = snoiseVec3( p - dy );\n  vec3 p_y1 = snoiseVec3( p + dy );\n  vec3 p_z0 = snoiseVec3( p - dz );\n  vec3 p_z1 = snoiseVec3( p + dz );\n\n  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n  const float divisor = 1.0 / ( 2.0 * e );\n  return normalize( vec3( x , y , z ) * divisor );\n\n}\n\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_0(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289_0(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute_0(vec3 x) {\n  return mod289_0(((x*34.0)+1.0)*x);\n}\n\nfloat snoise_0(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289_0(i); // Avoid truncation effects in permutation\n  vec3 p = permute_0( permute_0( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nvoid main() {\n    vec3 i = a_oldPosition * .95;\n    float n2 = snoise_0(a_oldPosition.xz + float(u_frames) * 0.005);\n    n2 *= .6;\n    vec3 velocity = (a_oldVelocity + curlNoise(vec3(i.x, i.y + n2, i.z) * 2. - 1.) * 0.0007);\n    vec3 delta = velocity * u_deltaTime;\n    vec3 pos = a_oldPosition + delta;\n\n    // use the capsule SDF to restrict the movement of the particles\n    vec3 sdNormal = sdCapsuleNormal(pos);\n    float d = dot(sdNormal, delta);\n    float offset = capsuleRadius * .1;\n    float sd = min(1., max(f(pos), -offset));\n    float rs = sd / offset;\n    vec3 o = sdNormal * (1. + rs);\n    vec3 nPos = pos - o * d;\n    vec3 vPos = pos - o * 40.;\n\n    t_newPosition = nPos;\n    t_newVelocity = normalize(vPos - a_oldPosition) * length(a_oldVelocity);\n}\n"),e("#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\n\nvoid main() {}\n")],["t_newPosition","t_newVelocity"]),this.locations={a_oldPosition:t.getAttribLocation(this.program,"a_oldPosition"),a_oldVelocity:t.getAttribLocation(this.program,"a_oldVelocity"),u_deltaTime:t.getUniformLocation(this.program,"u_deltaTime"),u_frames:t.getUniformLocation(this.program,"u_frames")},this.NUM_PARTICLES=n;const i=new Float32Array(Array(this.NUM_PARTICLES).fill(0).map((t=>Array(3).fill(0).map((t=>.1*(2*Math.random()-1))))).flat()),r=new Float32Array(Array(this.NUM_PARTICLES).fill(0).map((t=>Array(3).fill(0).map((t=>.001*(2*Math.random()-1))))).flat());this.positionBuffers=[ii(t,i,t.DYNAMIC_DRAW),ii(t,i,t.DYNAMIC_DRAW)],this.velocityBuffers=[ii(t,r,t.DYNAMIC_DRAW),ii(t,r,t.DYNAMIC_DRAW)],this.compute1VAO=ni(t,[[this.positionBuffers[0],this.locations.a_oldPosition,3],[this.velocityBuffers[0],this.locations.a_oldVelocity,3]]),this.compute2VAO=ni(t,[[this.positionBuffers[1],this.locations.a_oldPosition,3],[this.velocityBuffers[1],this.locations.a_oldVelocity,3]]),this.transformFeedback1=ri(t,[this.positionBuffers[0],this.velocityBuffers[0]]),this.transformFeedback2=ri(t,[this.positionBuffers[1],this.velocityBuffers[1]]),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.TRANSFORM_FEEDBACK_BUFFER,null),this.currentRenderState={resultPositionBufferIndex:1,computeVAO:this.compute1VAO,transformFeedback:this.transformFeedback2},this.nextRenderState={resultPositionBufferIndex:0,computeVAO:this.compute2VAO,transformFeedback:this.transformFeedback1},this.positionBuffer=this.currentRenderState.resultPositionBuffer}}class li{constructor(t,e,n,i,r){r=isNaN(r)?1:Math.max(1,Math.floor(r)),t=isNaN(t)?1:t,e=isNaN(e)?1:e,n=isNaN(n)?1:n,i=isNaN(i)?.15:i;const s=t/2-(i=Math.min(i,Math.min(t,Math.min(e,Math.min(n)))/2)),o=e/2-i,a=n/2-i,l=r+1,c=l*r+1<<3,p=new Float32Array(3*c),u=new Float32Array(3*c);let h=[],d=[],v=(ft.create(),ft.create()),m=[],b=[],f=[],_=l*r,g=l*r+1,w=[ft.fromValues(1,1,1),ft.fromValues(1,1,-1),ft.fromValues(-1,1,-1),ft.fromValues(-1,1,1),ft.fromValues(1,-1,1),ft.fromValues(1,-1,-1),ft.fromValues(-1,-1,-1),ft.fromValues(-1,-1,1)];for(let t=0;t<8;t++)h.push([]),d.push([]);let x=Math.PI/2,y=ft.fromValues(s,o,a);for(let t=0;t<=r;t++){let e=t/r*x,n=Math.cos(e),s=Math.sin(e);if(t!=r)for(let t=0;t<=r;t++){let e=t/r*x;v[0]=n*Math.cos(e),v[1]=s,v[2]=n*Math.sin(e);let o=ft.clone(v);ft.scale(o,o,i),ft.add(o,o,y),h[0].push(o),m.push(o);let a=ft.normalize(ft.create(),ft.clone(v));d[0].push(a),b.push(a)}else{ft.set(v,0,1,0);let t=ft.clone(v);ft.scale(t,t,i),ft.add(t,t,y),h[0].push(t),m.push(t);let e=ft.normalize(ft.create(),v);d[0].push(e),b.push(e)}}for(let t=1;t<8;t++)for(let e=0;e<h[0].length;e++){let n=ft.multiply(ft.create(),h[0][e],w[t]);h[t].push(n),m.push(n);let i=ft.multiply(ft.create(),d[0][e],w[t]);d[t].push(i),b.push(i)}let C=_,P=_+g,E=_+2*g,M=_+3*g;f.push(C),f.push(P),f.push(E),f.push(C),f.push(E),f.push(M),C=_+4*g,P=_+5*g,E=_+6*g,M=_+7*g,f.push(C),f.push(E),f.push(P),f.push(C),f.push(M),f.push(E),C=0,P=g,E=4*g,M=5*g,f.push(C),f.push(E),f.push(P),f.push(P),f.push(E),f.push(M),C=2*g,P=3*g,E=6*g,M=7*g,f.push(C),f.push(E),f.push(P),f.push(P),f.push(E),f.push(M),C=r,P=r+3*g,E=r+4*g,M=r+7*g,f.push(C),f.push(P),f.push(E),f.push(P),f.push(M),f.push(E),C=r+g,P=r+2*g,E=r+5*g,M=r+6*g,f.push(C),f.push(E),f.push(P),f.push(P),f.push(E),f.push(M);let k=[!0,!1,!0,!1,!1,!0,!1,!0],V=l*(r-1);for(let t=0;t<8;t++){let e=g*t;for(let n=0;n<r-1;n++){let i=n*l,s=(n+1)*l;for(let n=0;n<r;n++){let r=n+1,o=e+i+n,a=e+i+r,l=e+s+n,c=e+s+r;k[t]?(f.push(o),f.push(l),f.push(a),f.push(a),f.push(l),f.push(c)):(f.push(o),f.push(a),f.push(l),f.push(a),f.push(c),f.push(l))}}for(let n=0;n<r;n++){let i=e+V+n,r=e+V+n+1,s=e+_;k[t]?(f.push(i),f.push(s),f.push(r)):(f.push(i),f.push(r),f.push(s))}}for(let t=0;t<4;t++){let e=t*g,n=4*g+e,i=!0&t;for(let t=0;t<r;t++){let r=t+1,s=e+t,o=e+r,a=n+t,l=n+r;i?(f.push(s),f.push(a),f.push(o),f.push(o),f.push(a),f.push(l)):(f.push(s),f.push(o),f.push(a),f.push(o),f.push(l),f.push(a))}}let L=r-1,A=[0,1,4,5],S=[3,2,7,6],T=[0,1,1,0];for(let t=0;t<4;t++){let e=A[t]*g,n=S[t]*g;for(let i=0;i<=L;i++){let s=e+r+i*l,o=e+(i!=L?r+(i+1)*l:g-1),a=n+r+i*l,c=n+(i!=L?r+(i+1)*l:g-1);T[t]?(f.push(s),f.push(a),f.push(o),f.push(o),f.push(a),f.push(c)):(f.push(s),f.push(o),f.push(a),f.push(o),f.push(c),f.push(a))}}let z=[0,2,4,6],R=[1,3,5,7];for(let t=0;t<4;t++){let e=g*z[t],n=g*R[t],i=1>=t;for(let t=0;t<r;t++){let r=t*l,s=(t+1)*l,o=e+r,a=e+s,c=n+r,p=n+s;i?(f.push(o),f.push(c),f.push(a),f.push(a),f.push(c),f.push(p)):(f.push(o),f.push(a),f.push(c),f.push(a),f.push(p),f.push(c))}}let D=0;for(let t=0;t<m.length;t++)p.set(m[t],3*D),u.set(b[t],3*D),D++;this.vertices=p,this.normals=u,this.indices=f,this.count=f.length}}var ci=new WeakMap,pi=new WeakMap,ui=new WeakMap,hi=new WeakMap,di=new WeakSet,vi=new WeakSet,mi=new WeakSet,bi=new WeakSet,fi=new WeakSet,_i=new WeakSet,gi=new WeakSet,wi=new WeakSet,xi=new WeakSet;class yi{resize(){const t=this.gl;(function(t){const e=t.clientWidth,n=t.clientHeight,i=t.width!==e||t.height!==n;return i&&(t.width=e,t.height=n),i})(t.canvas)&&(t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),d(this,fi,Vi).call(this,t)),d(this,gi,Ai).call(this,t)}run(t=0){this.fpsGraph.begin(),h(this,ui,Math.min(32,t-c(this,ci))),h(this,ci,t),h(this,pi,c(this,pi)+c(this,ui)/16),c(this,hi)||(this.particlesPositionBufferIndex=this.particles.update(c(this,pi),c(this,ui)),this.control.update(c(this,ui)),d(this,di,Ci).call(this),this.fpsGraph.end(),requestAnimationFrame((t=>this.run(t))))}destroy(){h(this,hi,!0)}constructor(t,e,n=null){v(this,di),v(this,vi),v(this,mi),v(this,bi),v(this,fi),v(this,_i),v(this,gi),v(this,wi),v(this,xi),m(this,"oninit",void 0),u(this,ci,{writable:!0,value:0}),u(this,pi,{writable:!0,value:0}),u(this,ui,{writable:!0,value:0}),u(this,hi,{writable:!0,value:!1}),m(this,"camera",{matrix:b.create(),near:80,far:150,distance:120,orbit:bt.create(),position:ft.create(),rotation:ft.create(),up:ft.fromValues(0,1,0)}),this.canvas=t,this.pane=e,this.oninit=n,d(this,vi,Pi).call(this)}}function Ci(){const t=this.gl;t.useProgram(this.particleProgram),si(t,this.particleFBO,this.particleFBOSize[0],this.particleFBOSize[1]),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.DST_ALPHA),t.uniformMatrix4fv(this.particleLocations.u_worldMatrix,!1,this.drawUniforms.u_worldMatrix),t.uniformMatrix4fv(this.particleLocations.u_viewMatrix,!1,this.drawUniforms.u_viewMatrix),t.uniformMatrix4fv(this.particleLocations.u_projectionMatrix,!1,this.drawUniforms.u_projectionMatrix),t.bindVertexArray(this.particleVAOs[this.particlesPositionBufferIndex]),t.drawArrays(t.POINTS,0,this.particles.NUM_PARTICLES),t.disable(t.BLEND),t.enable(t.DEPTH_TEST),t.enable(t.CULL_FACE),si(t,null,t.canvas.clientWidth,t.canvas.clientHeight),t.useProgram(this.colorProgram),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.uniformMatrix4fv(this.colorLocations.u_viewMatrix,!1,this.drawUniforms.u_viewMatrix),t.uniformMatrix4fv(this.colorLocations.u_projectionMatrix,!1,this.drawUniforms.u_projectionMatrix),t.uniform3f(this.colorLocations.u_cameraPosition,this.camera.position[0],this.camera.position[1],this.camera.position[2]);const e=b.create();b.invert(e,this.drawUniforms.u_worldMatrix),b.transpose(e,e),t.uniformMatrix4fv(this.colorLocations.u_worldMatrix,!1,this.drawUniforms.u_worldMatrix),t.uniformMatrix4fv(this.colorLocations.u_worldInverseTransposeMatrix,!1,e),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.particleTexture),t.uniform1i(this.colorLocations.u_particleTexture,0),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.envMapTexture),t.uniform1i(this.colorLocations.u_envMapTexture,1),t.bindVertexArray(this.capsuleVAO),t.drawElements(t.TRIANGLES,this.capsuleBuffers.numElem,t.UNSIGNED_SHORT,0)}function Pi(){this.gl=this.canvas.getContext("webgl2",{antialias:!1,alpha:!1});const t=this.gl;if(!t)throw new Error("No WebGL 2 context!");this.particles=new ai(t,8e3),this.colorProgram=ei(t,[e("#version 300 es\n#define GLSLIFY 1\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_worldInverseTransposeMatrix;\nuniform vec3 u_cameraPosition;\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec3 v_position;\nout vec3 v_viewPosition;\nout vec3 v_normal;\nout vec3 v_viewNormal;\nout vec2 v_uv;\nout vec3 v_surfaceToView;\n\nvoid main() {\n    v_uv = a_uv;\n    v_normal = (u_worldInverseTransposeMatrix * vec4(a_normal, 0.)).xyz;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    v_surfaceToView = u_cameraPosition - worldPosition.xyz;\n    v_position = a_position.xyz;\n    v_viewPosition = viewPosition.xyz;\n    v_viewNormal = (u_viewMatrix * vec4(v_normal, 0.)).xyz;\n}\n"),e("#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D u_particleTexture;\nuniform sampler2D u_envMapTexture;\nuniform float u_frames;\n\nin vec3 v_position;\nin vec3 v_normal;\nin vec3 v_viewNormal;\nin vec2 v_uv;\nin vec3 v_surfaceToView;\nin vec3 v_viewPosition;\n\nout vec4 outColor;\n\n#define PI 3.1415926535\n\nvoid main() {\n    vec3 pos = v_position;\n    vec3 N = normalize(v_normal);\n    vec3 VN = normalize(v_viewNormal);\n    vec3 V = normalize(v_surfaceToView);\n    vec3 L = normalize(vec3(0., 1., 0.4));\n    float NdL = dot(N, L);\n\n    // calculate the reflection vector\n    float NdV = dot(N, V);\n    vec3 R = NdV * N * 2. - V;\n    R = normalize(R);\n\n    // calculate the half vector\n    vec3 H = normalize(V + N);\n\n    // base color\n    vec3 albedo = vec3(0.0, 0.04, 0.1);\n\n    // ambient ligthing\n    vec3 ambient = vec3(0., 0.8, 2.0) * 0.1;\n\n    // env ligthing\n    float phi   = atan(R.z, R.x);\n\tfloat theta = acos(R.y);\n    vec2 equiPos = vec2(phi / (2. * PI), theta / PI);\n    vec3 env = texture(u_envMapTexture, equiPos).rgb;\n\n    // fresnel term\n    float fresnel = min(1., pow(1. - NdV, 2.));\n\n    // diffuse shading\n    float diffuse = max(0., NdL) * 0.55;\n\n    // specular shading\n    float specular = pow(max(0., dot(H, L)), 60.) * 0.9;\n\n    // color\n    vec3 color = albedo + ambient * fresnel * .4 + specular * .1 + diffuse;\n\n    vec4 hullColor = vec4(vec3(0., 0.8, 2.0) * diffuse + ambient, fresnel + 0.1);\n    hullColor += vec4(env * env * env, env.r) * .5;\n\n    vec2 uv = vec2(gl_FragCoord) / vec2(textureSize(u_particleTexture, 0));\n    vec2 RF = refract(normalize(v_viewPosition), VN, 1. / 1.33).xy * .1;\n    vec2 chromaOffset = (RF * RF) * 5.;\n    vec4 particleColor = vec4(\n        texture(u_particleTexture, uv + RF + chromaOffset).r,\n        texture(u_particleTexture, uv + RF).g,\n        texture(u_particleTexture, uv + RF - chromaOffset).b,\n        1.\n    );\n\n    outColor = hullColor * hullColor.a + particleColor * (1. - hullColor.a);\n}\n")],null,{a_position:0,a_normal:1,a_uv:2}),this.particleProgram=ei(t,[e("#version 300 es\n#define GLSLIFY 1\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n\nin vec3 a_position;\n\nout float v_size;\n\nvoid main() {\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    float size = 1. - ((gl_Position.z / gl_Position.w) * .5 + .5);\n    size *= max(0.1, 1. - length(a_position * vec3(1., 0.5, 1.)));\n    gl_PointSize = size * 500.;\n    v_size = size;\n}\n"),e("#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\n\nout vec4 outColor;\n\nin float v_size;\n\nvoid main() {\n    vec2 c = gl_PointCoord * 2. - 1.;\n    float colorMask1 = 1. - smoothstep(0., 1., length(c));\n    float colorMask2 = 1. - smoothstep(0., .1, length(c));\n    vec3 baseColor1 = vec3(0., 0.2, 0.5) * .001;\n    vec3 baseColor2 = vec3(0., 0.2, 0.4);\n    vec4 color = vec4(baseColor1 + vec3(v_size) * colorMask1, colorMask1 * 0.035);\n    color += vec4(baseColor2 + vec3(v_size) * colorMask2, colorMask2 * 0.18);\n    outColor = color;\n}\n")],null,{a_position:0}),this.colorLocations={a_position:t.getAttribLocation(this.colorProgram,"a_position"),a_normal:t.getAttribLocation(this.colorProgram,"a_normal"),a_uv:t.getAttribLocation(this.colorProgram,"a_uv"),u_worldMatrix:t.getUniformLocation(this.colorProgram,"u_worldMatrix"),u_viewMatrix:t.getUniformLocation(this.colorProgram,"u_viewMatrix"),u_projectionMatrix:t.getUniformLocation(this.colorProgram,"u_projectionMatrix"),u_worldInverseTransposeMatrix:t.getUniformLocation(this.colorProgram,"u_worldInverseTransposeMatrix"),u_cameraPosition:t.getUniformLocation(this.colorProgram,"u_cameraPosition"),u_particleTexture:t.getUniformLocation(this.colorProgram,"u_particleTexture"),u_envMapTexture:t.getUniformLocation(this.colorProgram,"u_envMapTexture")},this.particleLocations={a_position:t.getAttribLocation(this.particleProgram,"a_position"),u_worldMatrix:t.getUniformLocation(this.particleProgram,"u_worldMatrix"),u_viewMatrix:t.getUniformLocation(this.particleProgram,"u_viewMatrix"),u_projectionMatrix:t.getUniformLocation(this.particleProgram,"u_projectionMatrix")},this.drawUniforms={u_worldMatrix:b.create(),u_viewMatrix:b.create(),u_projectionMatrix:b.create(),u_worldInverseTransposeMatrix:b.create()},b.rotate(this.drawUniforms.u_worldMatrix,this.drawUniforms.u_worldMatrix,0,[1,0,0]),b.scale(this.drawUniforms.u_worldMatrix,this.drawUniforms.u_worldMatrix,[30,30,30]),b.translate(this.drawUniforms.u_worldMatrix,this.drawUniforms.u_worldMatrix,[0,0,0]),this.particleVAOs=[ni(this.gl,[[this.particles.positionBuffers[0],this.particleLocations.a_position,3]]),ni(this.gl,[[this.particles.positionBuffers[1],this.particleLocations.a_position,3]])];const n=[-1,-1,3,-1,-1,3];this.quadBuffers={position:ii(t,new Float32Array(n),t.STATIC_DRAW),numElem:n.length/2},this.quadVAO=ni(t,[[this.quadBuffers.position,this.colorLocations.a_position,2]]),this.capsuleGeometry=new li(1,2,1,.5,20),this.capsuleBuffers={position:ii(t,this.capsuleGeometry.vertices,t.STATIC_DRAW),normal:ii(t,this.capsuleGeometry.normals,t.STATIC_DRAW),numElem:this.capsuleGeometry.count},this.capsuleVAO=ni(t,[[this.capsuleBuffers.position,this.colorLocations.a_position,3],[this.capsuleBuffers.normal,this.colorLocations.a_normal,3]],this.capsuleGeometry.indices);const i=ln.fromValues(t.canvas.clientWidth,t.canvas.clientHeight);this.particleFBOSize=ln.clone(i),this.particleTexture=oi(t,t.LINEAR,t.LINEAR,t.REPEAT,t.REPEAT),t.bindTexture(t.TEXTURE_2D,this.particleTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.particleFBOSize[0],this.particleFBOSize[1],0,t.RGBA,t.UNSIGNED_BYTE,null),this.particleFBO=function(t,e,n){const i=t.createFramebuffer(),r=[];return t.bindFramebuffer(t.FRAMEBUFFER,i),e.forEach(((e,n)=>{const i=t[`COLOR_ATTACHMENT${n}`];t.framebufferTexture2D(t.FRAMEBUFFER,i,t.TEXTURE_2D,e,0),r.push(i)})),n&&t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,n,0),t.drawBuffers(r),t.checkFramebufferStatus(t.FRAMEBUFFER)!=t.FRAMEBUFFER_COMPLETE&&console.error("could not complete render framebuffer setup",t.checkFramebufferStatus(t.FRAMEBUFFER)),t.bindFramebuffer(t.FRAMEBUFFER,null),i}(t,[this.particleTexture]),this.resize(),d(this,mi,Mi).call(this),d(this,_i,Li).call(this),d(this,gi,Ai).call(this,t),d(this,bi,ki).call(this),d(this,wi,Si).call(this),this.oninit&&this.oninit(this)}var Ei;function Mi(){const t=this.gl;this.envMapTexture=oi(t,t.LINEAR,t.LINEAR,t.MIRRORED_REPEAT,t.MIRRORED_REPEAT),t.bindTexture(t.TEXTURE_2D,this.envMapTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,100,500,0,t.RGBA,t.UNSIGNED_BYTE,null);const e=new Image;e.src=new URL(Ei),e.addEventListener("load",(()=>{t.bindTexture(t.TEXTURE_2D,this.envMapTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,100,500,0,t.RGBA,t.UNSIGNED_BYTE,e)}))}function ki(){this.control=new ti(this.canvas,this.camera,(()=>d(this,_i,Li).call(this)))}function Vi(t){const e=ln.fromValues(t.canvas.clientWidth,t.canvas.clientHeight);this.particleFBOSize=ln.clone(e),t.bindTexture(t.TEXTURE_2D,this.particleTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.particleFBOSize[0],this.particleFBOSize[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindTexture(t.TEXTURE_2D,null)}function Li(){b.targetTo(this.camera.matrix,this.camera.position,[0,0,0],this.camera.up),b.invert(this.drawUniforms.u_viewMatrix,this.camera.matrix)}function Ai(t){const e=t.canvas.clientWidth/t.canvas.clientHeight;b.perspective(this.drawUniforms.u_projectionMatrix,Math.PI/4,e,this.camera.near,this.camera.far)}function Si(){if(this.pane){const t=200;this.fpsGraph=this.pane.addBlade({view:"fpsgraph",label:"fps",lineCount:1,maxValue:120,minValue:0});const e=this.pane.addFolder({title:"Camera"});d(this,xi,Ti).call(this,e,this.camera,"near","near",1,t,null,(()=>d(this,gi,Ai).call(this,this.gl))),d(this,xi,Ti).call(this,e,this.camera,"far","far",1,t,null,(()=>d(this,gi,Ai).call(this,this.gl)))}}function Ti(t,e,n,i,r,s,o=null,a){t.addBlade({view:"slider",label:i,min:r,max:s,step:o,value:e[n]}).on("change",(t=>{e[n]=t.value,a&&a()}))}Ei=new URL(s("kyEFX").resolve("4MRyY"),import.meta.url).toString();const zi=window.location.search;let Ri,Di,Ui=null!==new URLSearchParams(zi).get("debug");window.addEventListener("load",(()=>{const t=document.body.querySelector("#c");let e;Ui&&(e=new o.Pane({title:"Settings"}),e.registerPlugin(a)),Ri=new yi(t,e,(t=>{t.run()}))})),window.addEventListener("resize",(()=>{Ri&&(Di&&clearTimeout(Di),Di=setTimeout((()=>{Di=null,Ri.resize()}),300))}));
//# sourceMappingURL=index.eb863459.js.map
