{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-07cc0a34f67a95a5.js","node_modules/@swc/helpers/src/_assert_this_initialized.js","node_modules/@swc/helpers/src/_class_call_check.js","node_modules/@swc/helpers/src/_class_extract_field_descriptor.js","node_modules/@swc/helpers/src/_class_private_field_get.js","node_modules/@swc/helpers/src/_class_apply_descriptor_get.js","node_modules/@swc/helpers/src/_check_private_redeclaration.js","node_modules/@swc/helpers/src/_class_private_field_init.js","node_modules/@swc/helpers/src/_class_private_field_set.js","node_modules/@swc/helpers/src/_class_apply_descriptor_set.js","node_modules/@swc/helpers/src/_class_private_method_get.js","node_modules/@swc/helpers/src/_class_private_method_init.js","node_modules/@swc/helpers/src/_set_prototype_of.js","node_modules/@swc/helpers/src/_construct.js","node_modules/@swc/helpers/src/_create_class.js","node_modules/@swc/helpers/src/_get_prototype_of.js","node_modules/@swc/helpers/src/_possible_constructor_return.js","node_modules/@swc/helpers/src/_type_of.js","node_modules/@swc/helpers/src/_create_super.js","node_modules/@swc/helpers/src/_is_native_reflect_construct.js","node_modules/@swc/helpers/src/_define_property.js","node_modules/@swc/helpers/src/_get.js","node_modules/@swc/helpers/src/_super_prop_base.js","node_modules/@swc/helpers/src/_inherits.js","node_modules/@swc/helpers/src/_iterable_to_array.js","node_modules/@swc/helpers/src/_array_like_to_array.js","node_modules/@swc/helpers/src/_unsupported_iterable_to_array.js","node_modules/@swc/helpers/src/_sliced_to_array.js","node_modules/@swc/helpers/src/_array_with_holes.js","node_modules/@swc/helpers/src/_non_iterable_rest.js","node_modules/@swc/helpers/src/_to_consumable_array.js","node_modules/@swc/helpers/src/_array_without_holes.js","node_modules/@swc/helpers/src/_non_iterable_spread.js","node_modules/tweakpane/dist/tweakpane.js","node_modules/@tweakpane/plugin-essentials/dist/tweakpane-plugin-essentials.js","node_modules/gl-matrix/esm/common.js","node_modules/gl-matrix/esm/mat4.js","node_modules/gl-matrix/esm/mat3.js","node_modules/gl-matrix/esm/vec3.js","node_modules/gl-matrix/esm/vec4.js","node_modules/gl-matrix/esm/quat.js","node_modules/gl-matrix/esm/vec2.js","src/utils/orbit-control.js","node_modules/@swc/helpers/src/_object_spread.js","src/utils/webgl-utils.js","src/particles.js","src/shader/compute.vert","src/shader/compute.frag","src/utils/rounded-box-geometry.js","src/luciferin.js","<<jsx-config-pragma.js>>","src/shader/color.vert","src/shader/color.frag","src/shader/particle.vert","src/shader/particle.frag","node_modules/@parcel/runtime-js/lib/runtime-4cb75aab21f9c804.js","src/app.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"7EiNB\\\":\\\"index.40823946.js\\\",\\\"jXc8V\\\":\\\"studio024.20e5a2d1.jpg\\\"}\"));","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n  return privateMap.get(receiver);\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor';\nimport classApplyDescriptorGet from './_class_apply_descriptor_get';\n\nexport default function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return classApplyDescriptorGet(receiver, descriptor);\n}\n","export default function _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n  return descriptor.value;\n}\n","export default function _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\n","import _checkPrivateRedeclaration from \"./_check_private_redeclaration\";\n\nexport default function _classPrivateFieldInit(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor';\nimport classApplyDescriptorSet from './_class_apply_descriptor_set';\n\nexport default function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}\n","export default function _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      // This should only throw in strict mode, but class bodies are\n      // always strict and private fields can only be used inside\n      // class bodies.\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n    descriptor.value = value;\n  }\n}\n","export default function _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return fn;\n}\n","import _checkPrivateRedeclaration from \"./_check_private_redeclaration\";\n\nexport default function _classPrivateMethodInit(obj, privateSet) {\n  _checkPrivateRedeclaration(obj, privateSet);\n  privateSet.add(obj);\n}\n","function setPrototypeOf(o, p) {\n  setPrototypeOf = Object.setPrototypeOf || function setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return setPrototypeOf(o, p);\n}\n\nexport default function _setPrototypeOf(o, p) {\n  return setPrototypeOf(o, p);\n}\n","import _setPrototypeOf from \"./_set_prototype_of\";\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    construct = Reflect.construct;\n  } else {\n    construct = function construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return construct.apply(null, arguments);\n}\n\nexport default function _construct(Parent, args, Class) {\n  return construct.apply(null, arguments);\n}\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","function getPrototypeOf(o) {\n  getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return getPrototypeOf(o);\n}\n\nexport default function _getPrototypeOf(o) {\n  return getPrototypeOf(o);\n}","import assertThisInitialized from './_assert_this_initialized';\nimport _typeof from './_type_of';\n\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n","export default function _typeof(obj) {\n    \"@swc/helpers - typeof\";\n    return obj && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n};\n","import _isNativeReflectConstruct from \"./_is_native_reflect_construct\";\nimport _getPrototypeOf from \"./_get_prototype_of\";\nimport _possibleConstructorReturn from './_possible_constructor_return';\n\nexport default function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n    return function _createSuperInternal() {\n        var Super = _getPrototypeOf(Derived),\n            result;\n        if (hasNativeReflectConstruct) {\n            var NewTarget = _getPrototypeOf(this).constructor;\n            result = Reflect.construct(Super, arguments, NewTarget);\n        } else {\n            result = Super.apply(this, arguments);\n        }\n        return _possibleConstructorReturn(this, result);\n    };\n}","export default function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n    try {\n        Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { }));\n        return true;\n    } catch (e) {\n        return false;\n    }\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","import superPropBase from './_super_prop_base';\n\nfunction get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    get = Reflect.get;\n  } else {\n    get = function get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver || target);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return get(target, property, receiver);\n}\n\nexport default function _get(target, property, reciever) {\n  return get(target, property, reciever);\n}\n","import getPrototypeOf from './_get_prototype_of';\n\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n","import setPrototypeOf from './_set_prototype_of';\n\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\n","import _arrayLikeToArray from './_array_like_to_array';\n\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return _arrayLikeToArray(o, minLen);\n}\n","import arrayWithHoles from './_array_with_holes';\nimport iterableToArrayLimit from './_iterable_to_array';\nimport nonIterableRest from './_non_iterable_rest';\nimport unsupportedIterableToArray from './_unsupported_iterable_to_array';\n\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","import arrayWithoutHoles from './_array_without_holes';\nimport iterableToArray from './_iterable_to_array';\nimport nonIterableSpread from './_non_iterable_spread';\nimport unsupportedIterableToArray from './_unsupported_iterable_to_array';\n\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n","import _arrayLikeToArray from './_array_like_to_array';\n\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","/*! Tweakpane 3.0.8 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$p = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return new Function('return this')();\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser ? canvasElement.getContext('2d') : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$o = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$o());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$o('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$o(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$o(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$o('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            const onExpand = () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            };\n            bindValueMap(this, 'expanded', onExpand);\n            bindValueMap(this, 'temporaryExpanded', onExpand);\n        }\n        cleanUpTransition() {\n            this.set('shouldFixHeight', false);\n            this.set('expandedHeight', null);\n            this.set('completed', true);\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.cleanUpTransition();\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params || {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(blade) {\n            var _a;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = blade !== null && blade !== void 0 ? blade : null;\n            (_a = this.blade_) === null || _a === void 0 ? void 0 : _a.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            if (bc.parent) {\n                bc.parent.remove(bc);\n            }\n            bc['parent_'] = this;\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            bc['parent_'] = null;\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack(config.root ? undefined : config.blade);\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            this.className_ = ClassName(config.viewName || 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.rackController.rack.emitter.on('add', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.rackController.rack.emitter.on('remove', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$n = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$n('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$m = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$m(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const itemsElem = doc.createElement('div');\n            itemsElem.classList.add(className$k('i'));\n            this.element.appendChild(itemsElem);\n            this.itemsElement = itemsElem;\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const empty = createValue(true);\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onPageSelectedChange_ = this.onPageSelectedChange_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.empty_ = empty;\n            this.applyPages_();\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index !== null && opt_index !== void 0 ? opt_index : this.pageSet_.items.length);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        applyPages_() {\n            this.keepSelection_();\n            this.empty_.rawValue = this.pageSet_.items.length === 0;\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            pc.props.value('selected').emitter.on('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            this.rackController.rack.remove(pc.contentController);\n            pc.props\n                .value('selected')\n                .emitter.off('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        keepSelection_() {\n            if (this.pageSet_.items.length === 0) {\n                return;\n            }\n            const firstSelIndex = this.pageSet_.items.findIndex((pc) => pc.props.get('selected'));\n            if (firstSelIndex < 0) {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === 0);\n                });\n            }\n            else {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === firstSelIndex);\n                });\n            }\n        }\n        onPageSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.pageSet_.items.findIndex((pc) => pc.props.value('selected') === ev.sender);\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === index);\n                });\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.options = options;\n        }\n        constrain(value) {\n            const opts = this.options;\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step) {\n            this.step = step;\n        }\n        constrain(value) {\n            const r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        return (parseLiteral(text, cursor) || parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            y: ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.originRawValue_ + dx * this.props.get('draggingScale');\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findListItems(constraint) {\n        const c = constraint\n            ? findConstraint(constraint, ListConstraint)\n            : null;\n        if (!c) {\n            return null;\n        }\n        return c.options;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$5(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$5(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHsl(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgb(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsv(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgb(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsv(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHsl(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsv,\n            rgb: hslToRgb,\n        },\n        hsv: {\n            hsl: hsvToHsl,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgb,\n        },\n        rgb: {\n            hsl: rgbToHsl,\n            hsv: rgbToHsv,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function convertColorMode(components, fromMode, toMode) {\n        return MODE_CONVERTER_MAP[fromMode][toMode](...components);\n    }\n\n    const CONSTRAINT_MAP = {\n        hsl: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        hsv: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        rgb: (comps) => {\n            var _a;\n            return [\n                constrainRange(comps[0], 0, 255),\n                constrainRange(comps[1], 0, 255),\n                constrainRange(comps[2], 0, 255),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n    };\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        constructor(comps, mode) {\n            this.mode_ = mode;\n            this.comps_ = CONSTRAINT_MAP[mode](comps);\n        }\n        static black() {\n            return new Color([0, 0, 0], 'rgb');\n        }\n        static fromObject(obj) {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb');\n        }\n        static toRgbaObject(color) {\n            return color.toRgbaObject();\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode_ !== v2.mode_) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        get mode() {\n            return this.mode_;\n        }\n        getComponents(opt_mode) {\n            return appendAlphaComponent(convertColorMode(removeAlphaComponent(this.comps_), this.mode_, opt_mode || this.mode_), this.comps_[3]);\n        }\n        toRgbaObject() {\n            const rgbComps = this.getComponents('rgb');\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    const NOTATION_TO_PARSER_MAP = {\n        'func.rgb': (text) => {\n            const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.rgba': (text) => {\n            const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.hsl': (text) => {\n            const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'func.hsla': (text) => {\n            const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'hex.rgb': (text) => {\n            const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                ], 'rgb');\n            }\n            return null;\n        },\n        'hex.rgba': (text) => {\n            const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                    mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                    mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            return null;\n        },\n    };\n    function getColorNotation(text) {\n        const notations = Object.keys(NOTATION_TO_PARSER_MAP);\n        return notations.reduce((result, notation) => {\n            if (result) {\n                return result;\n            }\n            const subparser = NOTATION_TO_PARSER_MAP[notation];\n            return subparser(text) ? notation : null;\n        }, null);\n    }\n    const CompositeColorParser = (text) => {\n        const notation = getColorNotation(text);\n        return notation ? NOTATION_TO_PARSER_MAP[notation](text) : null;\n    };\n    function hasAlphaComponent(notation) {\n        return (notation === 'func.hsla' ||\n            notation === 'func.rgba' ||\n            notation === 'hex.rgba');\n    }\n    function colorFromString(value) {\n        if (typeof value === 'string') {\n            const cv = CompositeColorParser(value);\n            if (cv) {\n                return cv;\n            }\n        }\n        return Color.black();\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value) {\n        const formatter = createNumberFormatter(0);\n        const comps = removeAlphaComponent(value.getComponents('rgb')).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function colorToFunctionalRgbaString(value) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(0);\n        const comps = value.getComponents('rgb').map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    const NOTATION_TO_STRINGIFIER_MAP = {\n        'func.hsl': colorToFunctionalHslString,\n        'func.hsla': colorToFunctionalHslaString,\n        'func.rgb': colorToFunctionalRgbString,\n        'func.rgba': colorToFunctionalRgbaString,\n        'hex.rgb': colorToHexRgbString,\n        'hex.rgba': colorToHexRgbaString,\n    };\n    function getColorStringifier(notation) {\n        return NOTATION_TO_STRINGIFIER_MAP[notation];\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    const FORMATTER = createNumberFormatter(0);\n    const MODE_TO_CONSTRAINT_MAP = {\n        rgb: () => {\n            return new RangeConstraint({ min: 0, max: 255 });\n        },\n        hsl: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n        hsv: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n    };\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: 1,\n                formatter: FORMATTER,\n            }),\n            value: createValue(0, {\n                constraint: MODE_TO_CONSTRAINT_MAP[config.colorMode](index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 359);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgb(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new RangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value);\n        }\n        return Color.black();\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(notation) {\n        const stringify = getColorStringifier(notation);\n        return (target, value) => {\n            writePrimitive(target, stringify(value));\n        };\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha) {\n        return supportsAlpha ? writeRgbaColorObject : writeRgbColorObject;\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        return 'alpha' in inputParams && inputParams.alpha === true;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!('view' in params)) {\n                return null;\n            }\n            if (params.view !== 'color') {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromObject,\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue)),\n        },\n        controller: (args) => {\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: formatter,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const notation = getColorNotation(value);\n            if (!notation) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromString,\n            equals: Color.equals,\n            writer: (args) => {\n                const notation = getColorNotation(args.initialValue);\n                if (!notation) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return createColorStringWriter(notation);\n            },\n        },\n        controller: (args) => {\n            const notation = getColorNotation(args.initialValue);\n            if (!notation) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = getColorStringifier(notation);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: hasAlphaComponent(notation),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function createConstraint$4(params) {\n        const constraints = [];\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function findRange(constraint) {\n        const c = constraint ? findConstraint(constraint, RangeConstraint) : null;\n        if (!c) {\n            return [undefined, undefined];\n        }\n        return [c.minValue, c.maxValue];\n    }\n    function estimateSuitableRange(constraint) {\n        const [min, max] = findRange(constraint);\n        return [min !== null && min !== void 0 ? min : 0, max !== null && max !== void 0 ? max : 100];\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a, _b;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_b = ('format' in args.params ? args.params.format : undefined)) !== null && _b !== void 0 ? _b : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            if (c && findConstraint(c, RangeConstraint)) {\n                const [min, max] = estimateSuitableRange(c);\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: ValueMap.fromObject({\n                        maxValue: max,\n                        minValue: min,\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint$2(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$3(params) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint$2('x' in params ? params.x : undefined),\n                createDimensionConstraint$2('y' in params ? params.y : undefined),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const rc = constraint && findConstraint(constraint, RangeConstraint);\n        if (rc) {\n            return Math.max(Math.abs(rc.minValue || 0), Math.abs(rc.maxValue || 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createDimensionConstraint$1(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$2(params) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint$1('x' in params ? params.x : undefined),\n                createDimensionConstraint$1('y' in params ? params.y : undefined),\n                createDimensionConstraint$1('z' in params ? params.z : undefined),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$1(value.rawValue.x, c.components[0]),\n                    createAxis$1(value.rawValue.y, c.components[1]),\n                    createAxis$1(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createDimensionConstraint(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$1(params) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined),\n                createDimensionConstraint('y' in params ? params.y : undefined),\n                createDimensionConstraint('z' in params ? params.z : undefined),\n                createDimensionConstraint('w' in params ? params.w : undefined),\n            ],\n        });\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class GraphCursor {\n        constructor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        get index() {\n            return this.index_;\n        }\n        set index(index) {\n            const changed = this.index_ !== index;\n            if (changed) {\n                this.index_ = index;\n                this.emitter.emit('change', {\n                    index: index,\n                    sender: this,\n                });\n            }\n        }\n    }\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.minValue_;\n            const max = this.maxValue_;\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.index = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.index = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.index = -1;\n                return;\n            }\n            this.cursor_.index = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.index = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n            minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function createInputBindingController(plugin, args) {\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = p.optional.string(args.params.label).value;\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label || args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const P = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = P.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = P.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = P.optional.boolean(args.params.disabled).value;\n        const hidden = P.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = (_c = P.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : args.target.key;\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result ||\n                createInputBindingController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result ||\n                createMonitorBindingController(plugin, {\n                    document: document,\n                    params: params,\n                    target: target,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                createBladeController(plugin, {\n                    document: document,\n                    params: params,\n                }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                plugin.api({\n                    controller: bc,\n                    pool: this,\n                }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const ic = new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: normalizeListOptions(args.params.options),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach((target) => {\n            const value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const v = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: ValueMap.fromObject({\n                    maxValue: args.params.max,\n                    minValue: args.params.min,\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, v),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(v),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a;\n            const config = opt_config || {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = config.container || createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.0.8');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.TweakpaneEssentialsPlugin = {}));\n}(this, (function (exports) { 'use strict';\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose$1(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose$1(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$g = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$g('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$g('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$f = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$f(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$f(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$e = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$e('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$e(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$e(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$e('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            bindValueMap(this, 'expanded', () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            });\n        }\n    }\n    function createFoldable(expanded) {\n        return Foldable.create(expanded);\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.set('shouldFixHeight', false);\n            foldable.set('expandedHeight', null);\n            foldable.set('completed', true);\n        });\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const className$d = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$d(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step) {\n            this.step = step;\n        }\n        constrain(value) {\n            const r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        }\n    }\n\n    const className$c = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$c(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$b = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$b('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        return (parseLiteral(text, cursor) || parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset(ev, elem) {\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            y: ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_);\n            element.addEventListener('touchmove', this.onTouchMove_);\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n\n    const className$a = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a(), className$a(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$a(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$a('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$a());\n            this.inputElement.classList.add(className$a('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$a('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$a('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$a('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$a('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$a(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$a(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.originRawValue_ + dx * this.props.get('draggingScale');\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$9 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$9('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    class GraphCursor {\n        constructor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        get index() {\n            return this.index_;\n        }\n        set index(index) {\n            const changed = this.index_ !== index;\n            if (changed) {\n                this.index_ = index;\n                this.emitter.emit('change', {\n                    index: index,\n                    sender: this,\n                });\n            }\n        }\n    }\n\n    const className$8 = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$8('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className$8('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.minValue_;\n            const max = this.maxValue_;\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className$8('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className$8('t', 'a'))) {\n                tooltipElem.classList.add(className$8('t', 'a'), className$8('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className$8('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.index = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.index = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.index = -1;\n                return;\n            }\n            this.cursor_.index = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.index = -1;\n        }\n    }\n\n    class ButtonCellApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class TpButtonGridEvent extends TpEvent {\n        constructor(target, cell, index) {\n            super(target);\n            this.cell = cell;\n            this.index = index;\n        }\n    }\n\n    class ButtonGridApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.cellToApiMap_ = new Map();\n            this.emitter_ = new Emitter();\n            const gc = this.controller_.valueController;\n            gc.cellControllers.forEach((cc, i) => {\n                const api = new ButtonCellApi(cc);\n                this.cellToApiMap_.set(cc, api);\n                cc.emitter.on('click', () => {\n                    const x = i % gc.size[0];\n                    const y = Math.floor(i / gc.size[0]);\n                    this.emitter_.emit('click', {\n                        event: new TpButtonGridEvent(this, api, [x, y]),\n                    });\n                });\n            });\n        }\n        cell(x, y) {\n            const gc = this.controller_.valueController;\n            const cc = gc.cellControllers[y * gc.size[0] + x];\n            return this.cellToApiMap_.get(cc);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class ButtonGridController {\n        constructor(doc, config) {\n            this.size = config.size;\n            const [w, h] = this.size;\n            const bcs = [];\n            for (let y = 0; y < h; y++) {\n                for (let x = 0; x < w; x++) {\n                    const bc = new ButtonController(doc, {\n                        props: ValueMap.fromObject(Object.assign({}, config.cellConfig(x, y))),\n                        viewProps: ViewProps.create(),\n                    });\n                    bcs.push(bc);\n                }\n            }\n            this.cellCs_ = bcs;\n            this.viewProps = ViewProps.create();\n            this.viewProps.handleDispose(() => {\n                this.cellCs_.forEach((c) => {\n                    c.viewProps.set('disposed', true);\n                });\n            });\n            this.view = new PlainView(doc, {\n                viewProps: this.viewProps,\n                viewName: 'btngrid',\n            });\n            this.view.element.style.gridTemplateColumns = `repeat(${w}, 1fr)`;\n            this.cellCs_.forEach((bc) => {\n                this.view.element.appendChild(bc.view.element);\n            });\n        }\n        get cellControllers() {\n            return this.cellCs_;\n        }\n    }\n\n    const ButtonGridBladePlugin = {\n        id: 'buttongrid',\n        type: 'blade',\n        // TODO:\n        css: '.tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                cells: p.required.function,\n                size: p.required.array(p.required.number),\n                view: p.required.constant('buttongrid'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonGridController(args.document, {\n                    cellConfig: args.params.cells,\n                    size: args.params.size,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonGridController)) {\n                return null;\n            }\n            return new ButtonGridApi(args.controller);\n        },\n    };\n\n    class CubicBezierApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.controller_.valueController.value.emitter.on(eventName, (ev) => {\n                bh(new TpChangeEvent(this, ev.rawValue, undefined, ev.options.last));\n            });\n            return this;\n        }\n    }\n\n    function interpolate(x1, x2, t) {\n        return x1 * (1 - t) + x2 * t;\n    }\n    const MAX_ITERATION = 20;\n    const X_DELTA = 0.001;\n    const CACHE_RESOLUTION = 100;\n    function y(cb, x) {\n        let dt = 0.25;\n        let t = 0.5;\n        let y = -1;\n        for (let i = 0; i < MAX_ITERATION; i++) {\n            const [tx, ty] = cb.curve(t);\n            t += dt * (tx < x ? +1 : -1);\n            y = ty;\n            dt *= 0.5;\n            if (Math.abs(x - tx) < X_DELTA) {\n                break;\n            }\n        }\n        return y;\n    }\n    class CubicBezier {\n        constructor(x1 = 0, y1 = 0, x2 = 1, y2 = 1) {\n            this.cache_ = [];\n            this.comps_ = [x1, y1, x2, y2];\n        }\n        get x1() {\n            return this.comps_[0];\n        }\n        get y1() {\n            return this.comps_[1];\n        }\n        get x2() {\n            return this.comps_[2];\n        }\n        get y2() {\n            return this.comps_[3];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            if (!Array.isArray(obj)) {\n                return false;\n            }\n            return (typeof obj[0] === 'number' &&\n                typeof obj[1] === 'number' &&\n                typeof obj[2] === 'number' &&\n                typeof obj[3] === 'number');\n        }\n        static equals(v1, v2) {\n            return (v1.x1 === v2.x1 && v1.y1 === v2.y1 && v1.x2 === v2.x2 && v1.y2 === v2.y2);\n        }\n        curve(t) {\n            const x01 = interpolate(0, this.x1, t);\n            const y01 = interpolate(0, this.y1, t);\n            const x12 = interpolate(this.x1, this.x2, t);\n            const y12 = interpolate(this.y1, this.y2, t);\n            const x23 = interpolate(this.x2, 1, t);\n            const y23 = interpolate(this.y2, 1, t);\n            const xr0 = interpolate(x01, x12, t);\n            const yr0 = interpolate(y01, y12, t);\n            const xr1 = interpolate(x12, x23, t);\n            const yr1 = interpolate(y12, y23, t);\n            return [interpolate(xr0, xr1, t), interpolate(yr0, yr1, t)];\n        }\n        y(x) {\n            if (this.cache_.length === 0) {\n                const cache = [];\n                for (let i = 0; i < CACHE_RESOLUTION; i++) {\n                    cache.push(y(this, mapRange(i, 0, CACHE_RESOLUTION - 1, 0, 1)));\n                }\n                this.cache_ = cache;\n            }\n            return this.cache_[Math.round(mapRange(constrainRange(x, 0, 1), 0, 1, 0, CACHE_RESOLUTION - 1))];\n        }\n        toObject() {\n            return [this.comps_[0], this.comps_[1], this.comps_[2], this.comps_[3]];\n        }\n    }\n    const CubicBezierAssembly = {\n        toComponents: (p) => p.toObject(),\n        fromComponents: (comps) => new CubicBezier(...comps),\n    };\n\n    function cubicBezierToString(cb) {\n        const formatter = createNumberFormatter(2);\n        const comps = cb.toObject().map((c) => formatter(c));\n        return `cubic-bezier(${comps.join(', ')})`;\n    }\n    const COMPS_EMPTY = [0, 0.5, 0.5, 1];\n    function cubicBezierFromString(text) {\n        const m = text.match(/^cubic-bezier\\s*\\(\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*\\)$/);\n        if (!m) {\n            return new CubicBezier(...COMPS_EMPTY);\n        }\n        const comps = [m[1], m[2], m[3], m[4]].reduce((comps, comp) => {\n            if (!comps) {\n                return null;\n            }\n            const n = Number(comp);\n            if (isNaN(n)) {\n                return null;\n            }\n            return [...comps, n];\n        }, []);\n        return new CubicBezier(...(comps !== null && comps !== void 0 ? comps : COMPS_EMPTY));\n    }\n\n    const className$7 = ClassName('cbz');\n    class CubicBezierView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindClassModifiers(this.element);\n            config.foldable.bindExpandedClass(this.element, className$7(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$7(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$7('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$7('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            const iconElem = doc.createElementNS(SVG_NS, 'svg');\n            iconElem.innerHTML = '<path d=\"M2 13C8 13 8 3 14 3\"/>';\n            buttonElem.appendChild(iconElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$7('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$7('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$6 = ClassName('cbzp');\n    class CubicBezierPickerView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const graphElem = doc.createElement('div');\n            graphElem.classList.add(className$6('g'));\n            this.element.appendChild(graphElem);\n            this.graphElement = graphElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$6('t'));\n            this.element.appendChild(textElem);\n            this.textElement = textElem;\n        }\n    }\n\n    function waitToBeAddedToDom(elem, callback) {\n        const ob = new MutationObserver((ml) => {\n            for (const m of ml) {\n                if (m.type !== 'childList') {\n                    continue;\n                }\n                m.addedNodes.forEach((elem) => {\n                    if (!elem.contains(elem)) {\n                        return;\n                    }\n                    callback();\n                    ob.disconnect();\n                });\n            }\n        });\n        const doc = elem.ownerDocument;\n        ob.observe(doc.body, {\n            attributes: true,\n            childList: true,\n            subtree: true,\n        });\n    }\n\n    const className$5 = ClassName('cbzg');\n    // TODO: Apply to core\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    class CubicBezierGraphView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$5('p'));\n            this.element.appendChild(previewElem);\n            this.previewElement = previewElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$5('g'));\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'path');\n            guideElem.classList.add(className$5('u'));\n            this.svgElem_.appendChild(guideElem);\n            this.guideElem_ = guideElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            lineElem.classList.add(className$5('l'));\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            this.handleElems_ = [doc.createElement('div'), doc.createElement('div')];\n            this.handleElems_.forEach((elem) => {\n                elem.classList.add(className$5('h'));\n                this.element.appendChild(elem);\n            });\n            this.vectorElems_ = [\n                doc.createElementNS(SVG_NS, 'line'),\n                doc.createElementNS(SVG_NS, 'line'),\n            ];\n            this.vectorElems_.forEach((elem) => {\n                elem.classList.add(className$5('v'));\n                this.svgElem_.appendChild(elem);\n            });\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_.bind(this));\n            this.sel_ = config.selection;\n            this.handleElems_.forEach((elem, index) => {\n                bindValue(this.sel_, compose((selection) => selection === index, valueToClassName(elem, className$5('h', 'sel'))));\n            });\n            waitToBeAddedToDom(this.element, () => {\n                this.refresh();\n            });\n        }\n        getVertMargin_(h) {\n            return h * 0.25;\n        }\n        valueToPosition(x, y) {\n            const bounds = this.element.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const vm = this.getVertMargin_(h);\n            return {\n                x: mapRange(x, 0, 1, 0, w),\n                y: mapRange(y, 0, 1, h - vm, vm),\n            };\n        }\n        positionToValue(x, y) {\n            const bounds = this.element.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const vm = this.getVertMargin_(h);\n            return {\n                x: constrainRange(mapRange(x, 0, w, 0, 1), 0, 1),\n                y: mapRange(y, h - vm, vm, 0, 1),\n            };\n        }\n        refresh() {\n            this.guideElem_.setAttributeNS(null, 'd', [0, 1]\n                .map((index) => {\n                const p1 = this.valueToPosition(0, index);\n                const p2 = this.valueToPosition(1, index);\n                return [`M ${p1.x},${p1.y}`, `L ${p2.x},${p2.y}`].join(' ');\n            })\n                .join(' '));\n            const bezier = this.value_.rawValue;\n            const points = [];\n            let t = 0;\n            for (;;) {\n                const p = this.valueToPosition(...bezier.curve(t));\n                points.push([p.x, p.y].join(','));\n                if (t >= 1) {\n                    break;\n                }\n                t = Math.min(t + 0.05, 1);\n            }\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const obj = bezier.toObject();\n            [0, 1].forEach((index) => {\n                const p1 = this.valueToPosition(index, index);\n                const p2 = this.valueToPosition(obj[index * 2], obj[index * 2 + 1]);\n                const vElem = this.vectorElems_[index];\n                vElem.setAttributeNS(null, 'x1', String(p1.x));\n                vElem.setAttributeNS(null, 'y1', String(p1.y));\n                vElem.setAttributeNS(null, 'x2', String(p2.x));\n                vElem.setAttributeNS(null, 'y2', String(p2.y));\n                const hElem = this.handleElems_[index];\n                hElem.style.left = `${p2.x}px`;\n                hElem.style.top = `${p2.y}px`;\n            });\n        }\n        onValueChange_() {\n            this.refresh();\n        }\n    }\n\n    const TICK_COUNT = 24;\n    const PREVIEW_DELAY = 400;\n    const PREVIEW_DURATION = 1000;\n    const className$4 = ClassName('cbzprv');\n    class CubicBezierPreviewView {\n        constructor(doc, config) {\n            this.stopped_ = true;\n            this.startTime_ = -1;\n            this.onDispose_ = this.onDispose_.bind(this);\n            this.onTimer_ = this.onTimer_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$4('g'));\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const ticksElem = doc.createElementNS(SVG_NS, 'path');\n            ticksElem.classList.add(className$4('t'));\n            this.svgElem_.appendChild(ticksElem);\n            this.ticksElem_ = ticksElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$4('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_);\n            config.viewProps.handleDispose(this.onDispose_);\n            waitToBeAddedToDom(this.element, () => {\n                this.refresh();\n            });\n        }\n        play() {\n            this.stop();\n            this.updateMarker_(0);\n            this.markerElem_.classList.add(className$4('m', 'a'));\n            this.startTime_ = new Date().getTime() + PREVIEW_DELAY;\n            this.stopped_ = false;\n            requestAnimationFrame(this.onTimer_);\n        }\n        stop() {\n            this.stopped_ = true;\n            this.markerElem_.classList.remove(className$4('m', 'a'));\n        }\n        onDispose_() {\n            this.stop();\n        }\n        updateMarker_(progress) {\n            const p = this.value_.rawValue.y(constrainRange(progress, 0, 1));\n            this.markerElem_.style.left = `${p * 100}%`;\n        }\n        refresh() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const ds = [];\n            const bezier = this.value_.rawValue;\n            for (let i = 0; i < TICK_COUNT; i++) {\n                const px = mapRange(i, 0, TICK_COUNT - 1, 0, 1);\n                const x = mapRange(bezier.y(px), 0, 1, 0, w);\n                ds.push(`M ${x},0 v${h}`);\n            }\n            this.ticksElem_.setAttributeNS(null, 'd', ds.join(' '));\n        }\n        onTimer_() {\n            if (this.startTime_ === null) {\n                return;\n            }\n            const dt = new Date().getTime() - this.startTime_;\n            const p = dt / PREVIEW_DURATION;\n            this.updateMarker_(p);\n            if (dt > PREVIEW_DURATION + PREVIEW_DELAY) {\n                this.stop();\n            }\n            if (!this.stopped_) {\n                requestAnimationFrame(this.onTimer_);\n            }\n        }\n        onValueChange_() {\n            this.refresh();\n            this.play();\n        }\n    }\n\n    function getDistance(x1, y1, x2, y2) {\n        const dx = x2 - x1;\n        const dy = y2 - y1;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n    function lockAngle(x1, y1, x2, y2) {\n        const d = getDistance(x1, y1, x2, y2);\n        const a = Math.atan2(y2 - y1, x2 - x1);\n        const la = (Math.round(a / (Math.PI / 4)) * Math.PI) / 4;\n        return {\n            x: x1 + Math.cos(la) * d,\n            y: y1 + Math.sin(la) * d,\n        };\n    }\n    class CubicBezierGraphController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.sel_ = createValue(0);\n            this.viewProps = config.viewProps;\n            this.view = new CubicBezierGraphView(doc, {\n                selection: this.sel_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n            this.prevView_ = new CubicBezierPreviewView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.prevView_.element.addEventListener('mousedown', (ev) => {\n                ev.stopImmediatePropagation();\n                ev.preventDefault();\n                this.prevView_.play();\n            });\n            this.view.previewElement.appendChild(this.prevView_.element);\n            const ptHandler = new PointerHandler(this.view.element);\n            ptHandler.emitter.on('down', this.onPointerDown_);\n            ptHandler.emitter.on('move', this.onPointerMove_);\n            ptHandler.emitter.on('up', this.onPointerUp_);\n        }\n        refresh() {\n            this.view.refresh();\n            this.prevView_.refresh();\n            this.prevView_.play();\n        }\n        updateValue_(point, locksAngle, opts) {\n            const index = this.sel_.rawValue;\n            const comps = this.value.rawValue.toObject();\n            const vp = this.view.positionToValue(point.x, point.y);\n            const v = locksAngle ? lockAngle(index, index, vp.x, vp.y) : vp;\n            comps[index * 2] = v.x;\n            comps[index * 2 + 1] = v.y;\n            this.value.setRawValue(new CubicBezier(...comps), opts);\n        }\n        onPointerDown_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            const bezier = this.value.rawValue;\n            const p1 = this.view.valueToPosition(bezier.x1, bezier.y1);\n            const d1 = getDistance(data.point.x, data.point.y, p1.x, p1.y);\n            const p2 = this.view.valueToPosition(bezier.x2, bezier.y2);\n            const d2 = getDistance(data.point.x, data.point.y, p2.x, p2.y);\n            this.sel_.rawValue = d1 <= d2 ? 0 : 1;\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const index = this.sel_.rawValue;\n            const comps = this.value.rawValue.toObject();\n            comps[index * 2] += getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            comps[index * 2 + 1] += getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            this.value.setRawValue(new CubicBezier(...comps), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const xStep = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            const yStep = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (xStep === 0 && yStep === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class CubicBezierPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CubicBezierPickerView(doc, {\n                viewProps: this.viewProps,\n            });\n            this.gc_ = new CubicBezierGraphController(doc, {\n                baseStep: config.axis.baseStep,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.graphElement.appendChild(this.gc_.view.element);\n            const xAxis = Object.assign(Object.assign({}, config.axis), { constraint: new RangeConstraint({ max: 1, min: 0 }) });\n            const yAxis = Object.assign(Object.assign({}, config.axis), { constraint: undefined });\n            this.tc_ = new PointNdTextController(doc, {\n                assembly: CubicBezierAssembly,\n                axes: [xAxis, yAxis, xAxis, yAxis],\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.tc_.view.element);\n        }\n        get allFocusableElements() {\n            return [\n                this.gc_.view.element,\n                ...this.tc_.view.textViews.map((v) => v.inputElement),\n            ];\n        }\n        refresh() {\n            this.gc_.refresh();\n        }\n    }\n\n    class CubicBezierController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = createFoldable(config.expanded);\n            this.view = new CubicBezierView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('blur', this.onButtonBlur_);\n            this.view.buttonElement.addEventListener('click', this.onButtonClick_);\n            this.tc_ = new TextController(doc, {\n                parser: cubicBezierFromString,\n                props: ValueMap.fromObject({\n                    formatter: cubicBezierToString,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.tc_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new CubicBezierPickerController(doc, {\n                axis: config.axis,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                bindValue(this.popC_.shows, (shows) => {\n                    if (shows) {\n                        pickerC.refresh();\n                    }\n                });\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onButtonBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const nextTarget = forceCast(ev.relatedTarget);\n            if (!nextTarget || !this.popC_.view.element.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                // Next target is in the popup\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                // Next target is the trigger button\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n    }\n\n    function createConstraint$1() {\n        return new PointNdConstraint({\n            assembly: CubicBezierAssembly,\n            components: [0, 1, 2, 3].map((index) => index % 2 === 0\n                ? new RangeConstraint({\n                    min: 0,\n                    max: 1,\n                })\n                : undefined),\n        });\n    }\n    const CubicBezierBladePlugin = {\n        id: 'cubic-bezier',\n        type: 'blade',\n        css: '.tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                value: p.required.array(p.required.number),\n                view: p.required.constant('cubicbezier'),\n                expanded: p.optional.boolean,\n                label: p.optional.string,\n                picker: p.optional.custom((v) => {\n                    return v === 'inline' || v === 'popup' ? v : undefined;\n                }),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const rv = new CubicBezier(...args.params.value);\n            const v = createValue(rv, {\n                constraint: createConstraint$1(),\n                equals: CubicBezier.equals,\n            });\n            const vc = new CubicBezierController(args.document, {\n                axis: {\n                    baseStep: 0.1,\n                    textProps: ValueMap.fromObject({\n                        draggingScale: 0.01,\n                        formatter: createNumberFormatter(2),\n                    }),\n                },\n                expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n                pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n                value: v,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof CubicBezierController)) {\n                return null;\n            }\n            return new CubicBezierApi(args.controller);\n        },\n    };\n\n    class FpsGraphBladeApi extends BladeApi {\n        begin() {\n            this.controller_.valueController.begin();\n        }\n        end() {\n            this.controller_.valueController.end();\n        }\n    }\n\n    const MAX_TIMESTAMPS = 20;\n    class Fpswatch {\n        constructor() {\n            this.start_ = null;\n            this.duration_ = 0;\n            this.fps_ = null;\n            this.frameCount_ = 0;\n            this.timestamps_ = [];\n        }\n        get duration() {\n            return this.duration_;\n        }\n        get fps() {\n            return this.fps_;\n        }\n        begin(now) {\n            this.start_ = now.getTime();\n        }\n        calculateFps_(nowTime) {\n            if (this.timestamps_.length === 0) {\n                return null;\n            }\n            const ts = this.timestamps_[0];\n            return (1000 * (this.frameCount_ - ts.frameCount)) / (nowTime - ts.time);\n        }\n        compactTimestamps_() {\n            if (this.timestamps_.length <= MAX_TIMESTAMPS) {\n                return;\n            }\n            const len = this.timestamps_.length - MAX_TIMESTAMPS;\n            this.timestamps_.splice(0, len);\n            const df = this.timestamps_[0].frameCount;\n            this.timestamps_.forEach((ts) => {\n                ts.frameCount -= df;\n            });\n            this.frameCount_ -= df;\n        }\n        end(now) {\n            if (this.start_ === null) {\n                return;\n            }\n            const t = now.getTime();\n            this.duration_ = t - this.start_;\n            this.start_ = null;\n            this.fps_ = this.calculateFps_(t);\n            this.timestamps_.push({\n                frameCount: this.frameCount_,\n                time: t,\n            });\n            ++this.frameCount_;\n            this.compactTimestamps_();\n        }\n    }\n\n    const className$3 = ClassName('fps');\n    class FpsView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            config.viewProps.bindClassModifiers(this.element);\n            this.graphElement = doc.createElement('div');\n            this.graphElement.classList.add(className$3('g'));\n            this.element.appendChild(this.graphElement);\n            const labelElement = doc.createElement('div');\n            labelElement.classList.add(className$3('l'));\n            this.element.appendChild(labelElement);\n            const valueElement = doc.createElement('span');\n            valueElement.classList.add(className$3('v'));\n            valueElement.textContent = '--';\n            labelElement.appendChild(valueElement);\n            this.valueElement = valueElement;\n            const unitElement = doc.createElement('span');\n            unitElement.classList.add(className$3('u'));\n            unitElement.textContent = 'FPS';\n            labelElement.appendChild(unitElement);\n        }\n    }\n\n    class FpsGraphController {\n        constructor(doc, config) {\n            this.stopwatch_ = new Fpswatch();\n            this.onTick_ = this.onTick_.bind(this);\n            this.ticker_ = config.ticker;\n            this.ticker_.emitter.on('tick', this.onTick_);\n            this.value_ = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new FpsView(doc, {\n                viewProps: this.viewProps,\n            });\n            this.graphC_ = new GraphLogController(doc, {\n                formatter: createNumberFormatter(0),\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value_,\n                viewProps: this.viewProps,\n            });\n            this.view.graphElement.appendChild(this.graphC_.view.element);\n            this.viewProps.handleDispose(() => {\n                this.graphC_.viewProps.set('disposed', true);\n                this.ticker_.dispose();\n            });\n        }\n        begin() {\n            this.stopwatch_.begin(new Date());\n        }\n        end() {\n            this.stopwatch_.end(new Date());\n        }\n        onTick_() {\n            const fps = this.stopwatch_.fps;\n            if (fps !== null) {\n                const buffer = this.value_.rawValue;\n                this.value_.rawValue = createPushedBuffer(buffer, fps);\n                this.view.valueElement.textContent = fps.toFixed(0);\n            }\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    const FpsGraphBladePlugin = {\n        id: 'fpsgraph',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('fpsgraph'),\n                interval: p.optional.number,\n                label: p.optional.string,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b, _c, _d;\n            const interval = (_a = args.params.interval) !== null && _a !== void 0 ? _a : 500;\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new FpsGraphController(args.document, {\n                    lineCount: (_b = args.params.lineCount) !== null && _b !== void 0 ? _b : 2,\n                    maxValue: (_c = args.params.max) !== null && _c !== void 0 ? _c : 90,\n                    minValue: (_d = args.params.min) !== null && _d !== void 0 ? _d : 0,\n                    ticker: createTicker(args.document, interval),\n                    value: initializeBuffer(80),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof FpsGraphController)) {\n                return null;\n            }\n            return new FpsGraphBladeApi(args.controller);\n        },\n    };\n\n    class Interval {\n        constructor(min, max) {\n            this.min = min;\n            this.max = max;\n        }\n        static isObject(obj) {\n            if (typeof obj !== 'object' || obj === null) {\n                return false;\n            }\n            const min = obj.min;\n            const max = obj.max;\n            if (typeof min !== 'number' || typeof max !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.min === v2.min && v1.max === v2.max;\n        }\n        get length() {\n            return this.max - this.min;\n        }\n        toObject() {\n            return {\n                min: this.min,\n                max: this.max,\n            };\n        }\n    }\n    const IntervalAssembly = {\n        fromComponents: (comps) => new Interval(comps[0], comps[1]),\n        toComponents: (p) => [p.min, p.max],\n    };\n\n    class IntervalConstraint {\n        constructor(edge) {\n            this.edge = edge;\n        }\n        constrain(value) {\n            var _a, _b, _c, _d, _e, _f, _g, _h;\n            if (value.min <= value.max) {\n                return new Interval((_b = (_a = this.edge) === null || _a === void 0 ? void 0 : _a.constrain(value.min)) !== null && _b !== void 0 ? _b : value.min, (_d = (_c = this.edge) === null || _c === void 0 ? void 0 : _c.constrain(value.max)) !== null && _d !== void 0 ? _d : value.max);\n            }\n            const c = (value.min + value.max) / 2;\n            return new Interval((_f = (_e = this.edge) === null || _e === void 0 ? void 0 : _e.constrain(c)) !== null && _f !== void 0 ? _f : c, (_h = (_g = this.edge) === null || _g === void 0 ? void 0 : _g.constrain(c)) !== null && _h !== void 0 ? _h : c);\n        }\n    }\n\n    const className$2 = ClassName('rsltxt');\n    class RangeSliderTextView {\n        constructor(doc, config) {\n            this.sliderView_ = config.sliderView;\n            this.textView_ = config.textView;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$2('s'));\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$2('t'));\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    const className$1 = ClassName('rsl');\n    class RangeSliderView {\n        constructor(doc, config) {\n            this.maxValue_ = config.maxValue;\n            this.minValue_ = config.minValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_.bind(this));\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$1('t'));\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$1('b'));\n            trackElem.appendChild(barElem);\n            this.barElement = barElem;\n            const knobElems = ['min', 'max'].map((modifier) => {\n                const elem = doc.createElement('div');\n                elem.classList.add(className$1('k'), className$1('k', modifier));\n                trackElem.appendChild(elem);\n                return elem;\n            });\n            this.knobElements = [knobElems[0], knobElems[1]];\n            this.update();\n        }\n        valueToX_(value) {\n            return (constrainRange(mapRange(value, this.minValue_, this.maxValue_, 0, 1), 0, 1) * 100);\n        }\n        update() {\n            const v = this.value_.rawValue;\n            if (v.length === 0) {\n                this.element.classList.add(className$1(undefined, 'zero'));\n            }\n            else {\n                this.element.classList.remove(className$1(undefined, 'zero'));\n            }\n            const xs = [this.valueToX_(v.min), this.valueToX_(v.max)];\n            this.barElement.style.left = `${xs[0]}%`;\n            this.barElement.style.right = `${100 - xs[1]}%`;\n            this.knobElements.forEach((elem, index) => {\n                elem.style.left = `${xs[index]}%`;\n            });\n        }\n        onValueChange_() {\n            this.update();\n        }\n    }\n\n    class RangeSliderController {\n        constructor(doc, config) {\n            this.grabbing_ = null;\n            this.grabOffset_ = 0;\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.maxValue_ = config.maxValue;\n            this.minValue_ = config.minValue;\n            this.viewProps = config.viewProps;\n            this.value = config.value;\n            this.view = new RangeSliderView(doc, {\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: config.viewProps,\n            });\n            const ptHandler = new PointerHandler(this.view.trackElement);\n            ptHandler.emitter.on('down', this.onPointerDown_);\n            ptHandler.emitter.on('move', this.onPointerMove_);\n            ptHandler.emitter.on('up', this.onPointerUp_);\n        }\n        ofs_() {\n            if (this.grabbing_ === 'min') {\n                return this.view.knobElements[0].getBoundingClientRect().width / 2;\n            }\n            if (this.grabbing_ === 'max') {\n                return -this.view.knobElements[1].getBoundingClientRect().width / 2;\n            }\n            return 0;\n        }\n        valueFromData_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const p = (data.point.x + this.ofs_()) / data.bounds.width;\n            return mapRange(p, 0, 1, this.minValue_, this.maxValue_);\n        }\n        onPointerDown_(ev) {\n            if (!ev.data.point) {\n                return;\n            }\n            const p = ev.data.point.x / ev.data.bounds.width;\n            const v = this.value.rawValue;\n            const pmin = mapRange(v.min, this.minValue_, this.maxValue_, 0, 1);\n            const pmax = mapRange(v.max, this.minValue_, this.maxValue_, 0, 1);\n            if (Math.abs(pmax - p) <= 0.025) {\n                this.grabbing_ = 'max';\n            }\n            else if (Math.abs(pmin - p) <= 0.025) {\n                this.grabbing_ = 'min';\n            }\n            else if (p >= pmin && p <= pmax) {\n                this.grabbing_ = 'length';\n                this.grabOffset_ = mapRange(p - pmin, 0, 1, 0, this.maxValue_ - this.minValue_);\n            }\n            else if (p < pmin) {\n                this.grabbing_ = 'min';\n                this.onPointerMove_(ev);\n            }\n            else if (p > pmax) {\n                this.grabbing_ = 'max';\n                this.onPointerMove_(ev);\n            }\n        }\n        applyPointToValue_(data, opts) {\n            const v = this.valueFromData_(data);\n            if (v === null) {\n                return;\n            }\n            if (this.grabbing_ === 'min') {\n                this.value.setRawValue(new Interval(v, this.value.rawValue.max), opts);\n            }\n            else if (this.grabbing_ === 'max') {\n                this.value.setRawValue(new Interval(this.value.rawValue.min, v), opts);\n            }\n            else if (this.grabbing_ === 'length') {\n                const len = this.value.rawValue.length;\n                let min = v - this.grabOffset_;\n                let max = min + len;\n                if (min < this.minValue_) {\n                    min = this.minValue_;\n                    max = this.minValue_ + len;\n                }\n                else if (max > this.maxValue_) {\n                    min = this.maxValue_ - len;\n                    max = this.maxValue_;\n                }\n                this.value.setRawValue(new Interval(min, max), opts);\n            }\n        }\n        onPointerMove_(ev) {\n            this.applyPointToValue_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.applyPointToValue_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n            this.grabbing_ = null;\n        }\n    }\n\n    class RangeSliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sc_ = new RangeSliderController(doc, config);\n            const axis = {\n                baseStep: config.baseStep,\n                constraint: config.constraint,\n                textProps: ValueMap.fromObject({\n                    draggingScale: config.draggingScale,\n                    formatter: config.formatter,\n                }),\n            };\n            this.tc_ = new PointNdTextController(doc, {\n                assembly: IntervalAssembly,\n                axes: [axis, axis],\n                parser: config.parser,\n                value: this.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new RangeSliderTextView(doc, {\n                sliderView: this.sc_.view,\n                textView: this.tc_.view,\n            });\n        }\n        get textController() {\n            return this.tc_;\n        }\n    }\n\n    function intervalFromUnknown(value) {\n        return Interval.isObject(value)\n            ? new Interval(value.min, value.max)\n            : new Interval(0, 0);\n    }\n    function writeInterval(target, value) {\n        target.writeProperty('max', value.max);\n        target.writeProperty('min', value.min);\n    }\n\n    function createConstraint(params) {\n        const constraints = [];\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        return new IntervalConstraint(new CompositeConstraint(constraints));\n    }\n    const IntervalInputPlugin = {\n        id: 'input-interval',\n        type: 'input',\n        css: '.tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept: (exValue, params) => {\n            if (!Interval.isObject(exValue)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: new Interval(exValue.min, exValue.max),\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => intervalFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            equals: Interval.equals,\n            writer: (_args) => writeInterval,\n        },\n        controller(args) {\n            var _a;\n            const v = args.value;\n            const c = args.constraint;\n            if (!(c instanceof IntervalConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const midValue = (v.rawValue.min + v.rawValue.max) / 2;\n            const formatter = (_a = args.params.format) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(c.edge, midValue));\n            const rc = c.edge && findConstraint(c.edge, RangeConstraint);\n            if ((rc === null || rc === void 0 ? void 0 : rc.minValue) !== undefined && (rc === null || rc === void 0 ? void 0 : rc.maxValue) !== undefined) {\n                return new RangeSliderTextController(args.document, {\n                    baseStep: getBaseStep(c.edge),\n                    constraint: c.edge,\n                    draggingScale: getSuitableDraggingScale(rc, midValue),\n                    formatter: formatter,\n                    maxValue: rc.maxValue,\n                    minValue: rc.minValue,\n                    parser: parseNumber,\n                    value: v,\n                    viewProps: args.viewProps,\n                });\n            }\n            const axis = {\n                baseStep: getBaseStep(c.edge),\n                constraint: c.edge,\n                textProps: ValueMap.fromObject({\n                    draggingScale: midValue,\n                    formatter: formatter,\n                }),\n            };\n            return new PointNdTextController(args.document, {\n                assembly: IntervalAssembly,\n                axes: [axis, axis],\n                parser: parseNumber,\n                value: v,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class RadioCellApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n    }\n\n    class TpRadioGridChangeEvent extends TpChangeEvent {\n        constructor(target, cell, index, value, presetKey) {\n            super(target, value, presetKey);\n            this.cell = cell;\n            this.index = index;\n        }\n    }\n\n    class RadioGridApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.cellToApiMap_ = new Map();\n            const gc = this.controller_.valueController;\n            gc.cellControllers.forEach((cc) => {\n                const api = new RadioCellApi(cc);\n                this.cellToApiMap_.set(cc, api);\n            });\n        }\n        get value() {\n            return this.controller_.value;\n        }\n        cell(x, y) {\n            const gc = this.controller_.valueController;\n            const cc = gc.cellControllers[y * gc.size[0] + x];\n            return this.cellToApiMap_.get(cc);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.controller_.value.emitter.on(eventName, (ev) => {\n                const gc = this.controller_.valueController;\n                const cc = gc.findCellByValue(ev.rawValue);\n                if (!cc) {\n                    return;\n                }\n                const capi = this.cellToApiMap_.get(cc);\n                if (!capi) {\n                    return;\n                }\n                const i = gc.cellControllers.indexOf(cc);\n                bh(new TpRadioGridChangeEvent(this, capi, [i % gc.size[0], Math.floor(i / gc.size[0])], ev.rawValue, undefined));\n            });\n        }\n    }\n\n    const className = ClassName('rad');\n    class RadioView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className('i'));\n            inputElem.name = config.name;\n            inputElem.type = 'radio';\n            config.viewProps.bindDisabled(inputElem);\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            const bodyElem = doc.createElement('div');\n            bodyElem.classList.add(className('b'));\n            labelElem.appendChild(bodyElem);\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className('t'));\n            bodyElem.appendChild(titleElem);\n            bindValueMap(config.props, 'title', (title) => {\n                titleElem.textContent = title;\n            });\n        }\n    }\n\n    class RadioController {\n        constructor(doc, config) {\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new RadioView(doc, {\n                name: config.name,\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class RadioGridController {\n        constructor(doc, config) {\n            this.cellCs_ = [];\n            this.cellValues_ = [];\n            this.onCellInputChange_ = this.onCellInputChange_.bind(this);\n            this.size = config.size;\n            const [w, h] = this.size;\n            for (let y = 0; y < h; y++) {\n                for (let x = 0; x < w; x++) {\n                    const bc = new RadioController(doc, {\n                        name: config.groupName,\n                        props: ValueMap.fromObject(Object.assign({}, config.cellConfig(x, y))),\n                        viewProps: ViewProps.create(),\n                    });\n                    this.cellCs_.push(bc);\n                    this.cellValues_.push(config.cellConfig(x, y).value);\n                }\n            }\n            this.value = config.value;\n            bindValue(this.value, (value) => {\n                const cc = this.findCellByValue(value);\n                if (!cc) {\n                    return;\n                }\n                cc.view.inputElement.checked = true;\n            });\n            this.viewProps = ViewProps.create();\n            this.view = new PlainView(doc, {\n                viewProps: this.viewProps,\n                viewName: 'radgrid',\n            });\n            this.view.element.style.gridTemplateColumns = `repeat(${w}, 1fr)`;\n            this.cellCs_.forEach((bc) => {\n                bc.view.inputElement.addEventListener('change', this.onCellInputChange_);\n                this.view.element.appendChild(bc.view.element);\n            });\n        }\n        get cellControllers() {\n            return this.cellCs_;\n        }\n        findCellByValue(value) {\n            const index = this.cellValues_.findIndex((v) => v === value);\n            if (index < 0) {\n                return null;\n            }\n            return this.cellCs_[index];\n        }\n        onCellInputChange_(ev) {\n            const inputElem = ev.currentTarget;\n            const index = this.cellCs_.findIndex((c) => c.view.inputElement === inputElem);\n            if (index < 0) {\n                return;\n            }\n            this.value.rawValue = this.cellValues_[index];\n        }\n    }\n\n    const RadioGridBladePlugin = (function () {\n        return {\n            id: 'radiogrid',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    cells: p.required.function,\n                    groupName: p.required.string,\n                    size: p.required.array(p.required.number),\n                    value: p.required.raw,\n                    view: p.required.constant('radiogrid'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: new RadioGridController(args.document, {\n                        groupName: args.params.groupName,\n                        cellConfig: args.params.cells,\n                        size: args.params.size,\n                        value: createValue(args.params.value),\n                    }),\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof RadioGridController)) {\n                    return null;\n                }\n                return new RadioGridApi(args.controller);\n            },\n        };\n    })();\n\n    const RadioGridNumberInputPlugin = {\n        id: 'input-radiogrid',\n        type: 'input',\n        accept(value, params) {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                cells: p.required.function,\n                groupName: p.required.string,\n                size: p.required.array(p.required.number),\n                view: p.required.constant('radiogrid'),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            return new RadioGridController(args.document, {\n                cellConfig: args.params.cells,\n                groupName: args.params.groupName,\n                size: args.params.size,\n                value: args.value,\n            });\n        },\n    };\n\n    const plugins = [\n        ButtonGridBladePlugin,\n        CubicBezierBladePlugin,\n        FpsGraphBladePlugin,\n        IntervalInputPlugin,\n        RadioGridBladePlugin,\n        RadioGridNumberInputPlugin,\n    ];\n\n    exports.CubicBezier = CubicBezier;\n    exports.plugins = plugins;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import { quat, vec3 } from 'gl-matrix';\n\nexport class OrbitControl {\n\n    // latitue thresholds in degrees\n    maxLatitude = 80;\n    minLatitude = -80;\n\n    // angular velocity in degrees / deltaTime [longitude, latitude]\n    velocity = [0, 0];\n\n    constructor(canvas, camera, updateCallback) {\n        this.pointerDown = false;\n        this.pointerDownPos = { x: 0, y: 0 };\n        this.pointerPos = { x: 0, y: 0 };\n        this.followPos = { x: 0, y: 0 };\n        this.prevFollowPos = {x: 0, y: 0};\n        this.phi = 0.;\n        this.theta = 0.;\n        this.camera = camera;\n        this.updateCallback = updateCallback;\n\n        canvas.style.touchAction = 'none';\n\n        canvas.addEventListener('pointerdown', e => {\n            this.pointerDownPos = { x: e.clientX, y: e.clientY }\n            this.followPos = { x: e.clientX, y: e.clientY }\n            this.pointerPos = { x: e.clientX, y: e.clientY }\n            this.prevFollowPos = { x: e.clientX, y: e.clientY }\n            this.pointerDownCameraUp = [...this.camera.up];\n            this.pointerDownRotation = [...this.camera.rotation];\n            this.pointerDown = true;\n        });\n        canvas.addEventListener('pointerup', e => {\n            this.pointerDown = false;\n        });\n        canvas.addEventListener('pointermove', e => {\n            if (this.pointerDown) {\n                this.pointerPos = { x: e.clientX, y: e.clientY }\n            }\n        });\n    }\n\n    update(deltaTime) {\n        const timeScale = 16 / (deltaTime + 0.01);\n\n        if (this.pointerDown) {\n            const damping = 10 * timeScale;\n            this.followPos.x += (this.pointerPos.x - this.followPos.x) / damping;\n            this.followPos.y += (this.pointerPos.y - this.followPos.y) / damping;\n\n            const delta = {\n                x: this.followPos.x - this.prevFollowPos.x,\n                y: this.followPos.y - this.prevFollowPos.y\n            };\n            this.prevFollowPos = { ...this.followPos };\n\n            const speed = 0.2 * timeScale;\n            this.phi = delta.x * speed;\n            this.theta = delta.y * speed;\n        } else {\n            const decc = 0.96 / Math.max(.5 * timeScale, 1);\n            this.phi *= decc;\n            this.theta *= decc;\n        }\n\n        const prevRotation = [...this.camera.rotation];\n\n        this.camera.rotation[0] -= this.theta;\n        this.camera.rotation[1] -= this.phi;\n\n        this.velocity[0] = this.camera.rotation[0] - prevRotation[0];\n        this.velocity[1] = this.camera.rotation[1] - prevRotation[1];\n\n        const thetaLimitUp = this.maxLatitude;\n        const thetaLimitDown = this.minLatitude;\n        if (this.camera.rotation[0] > thetaLimitUp) {\n            this.camera.rotation[0] = thetaLimitUp;\n        } else if (this.camera.rotation[0] < thetaLimitDown) {\n            this.camera.rotation[0] = thetaLimitDown;\n        }\n\n        quat.fromEuler(this.camera.orbit, this.camera.rotation[0], this.camera.rotation[1], this.camera.rotation[2]);\n        vec3.transformQuat(this.camera.position, [0, 0, this.camera.distance], this.camera.orbit);\n\n        this.updateCallback();\n    }\n\n}","import defineProperty from './_define_property';\n\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export function createShader(gl, type, source) {\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n    if (success) {\n        return shader;\n    }\n\n    console.error(gl.getShaderInfoLog(shader));\n    gl.deleteShader(shader);\n}\n\nexport function createProgram(gl, shaderSources, transformFeedbackVaryings, attribLocations) {\n    const program = gl.createProgram();\n\n    [gl.VERTEX_SHADER, gl.FRAGMENT_SHADER].forEach((type, ndx) => {\n        const shader = createShader(gl, type, shaderSources[ndx]);\n        gl.attachShader(program, shader);\n    });\n\n    if (transformFeedbackVaryings) {\n        gl.transformFeedbackVaryings(program, transformFeedbackVaryings, gl.SEPARATE_ATTRIBS);\n    }\n\n    if (attribLocations) {\n        for(const attrib in attribLocations) {\n            gl.bindAttribLocation(program, attribLocations[attrib], attrib);\n        }\n    }\n\n    gl.linkProgram(program);\n    const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n    if (success) {\n        return program;\n    }\n\n    console.error(gl.getProgramInfoLog(program));\n    gl.deleteProgram(program);\n}\n\nexport function makeVertexArray(gl, bufLocNumElmPairs, indices) {\n    const va = gl.createVertexArray();\n    gl.bindVertexArray(va);\n    for (const [buffer, loc, numElem] of bufLocNumElmPairs) {\n        if(loc == -1) continue;\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.enableVertexAttribArray(loc);\n        gl.vertexAttribPointer(\n            loc,      // attribute location\n            numElem,        // number of elements\n            gl.FLOAT, // type of data\n            false,    // normalize\n            0,        // stride (0 = auto)\n            0,        // offset\n        );\n    }\n    if (indices) {\n        const indexBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\n    }\n    gl.bindVertexArray(null);\n    return va;\n}\n\nexport function resizeCanvasToDisplaySize(canvas) {\n    // Lookup the size the browser is displaying the canvas in CSS pixels.\n    const displayWidth  = canvas.clientWidth;\n    const displayHeight = canvas.clientHeight;\n   \n    // Check if the canvas is not the same size.\n    const needResize = canvas.width  !== displayWidth ||\n                       canvas.height !== displayHeight;\n   \n    if (needResize) {\n      // Make the canvas the same size\n      canvas.width  = displayWidth;\n      canvas.height = displayHeight;\n    }\n   \n    return needResize;\n}\n\nexport function makeBuffer(gl, sizeOrData, usage) {\n    const buf = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buf);\n    gl.bufferData(gl.ARRAY_BUFFER, sizeOrData, usage);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    return buf;\n}\n\nexport function makeTransformFeedback(gl, buffers) {\n    const tf = gl.createTransformFeedback();\n    gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, tf);\n    buffers.forEach((buffer, ndx) => \n        gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, ndx, buffer)\n    );\n    return tf;\n}\n\nexport function createFramebuffer(gl, colorAttachements, depthAttachement) {\n    const fbo = gl.createFramebuffer();\n    const drawBuffers = [];\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n    colorAttachements.forEach((texture, ndx) => {\n        const attachmentPoint = gl[`COLOR_ATTACHMENT${ndx}`];\n        gl.framebufferTexture2D(\n            gl.FRAMEBUFFER,\n            attachmentPoint,\n            gl.TEXTURE_2D, \n            texture,\n            0);\n        drawBuffers.push(attachmentPoint);\n    });\n    if (depthAttachement) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, depthAttachement, 0);\n    }\n    gl.drawBuffers(drawBuffers);\n\n    if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n        console.error('could not complete render framebuffer setup', gl.checkFramebufferStatus(gl.FRAMEBUFFER))\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    return fbo;\n}\n\nexport function setFramebuffer(gl, fbo, width, height) {\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo); // all draw commands will affect the framebuffer\n    gl.viewport(0, 0, width, height);\n}\n\nexport function createAndSetupTexture(gl, minFilter, magFilter, wrapS, wrapT) {\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\n    return texture;\n}","\nimport { vec3 } from 'gl-matrix';\nimport computeFragmentShaderSource from './shader/compute.frag';\nimport computeVertexShaderSource from './shader/compute.vert';\nimport { createProgram, makeBuffer, makeTransformFeedback, makeVertexArray } from './utils/webgl-utils';\n\nexport class Particles {\n\n    settings = {\n        velocity: 1,\n        curl: 1,\n        noise: 1\n    }\n\n    constructor(gl, count) {\n        this.gl = gl;\n        \n        // setup programs\n        this.program = createProgram(gl, [computeVertexShaderSource, computeFragmentShaderSource], ['t_newPosition', 't_newVelocity']);\n\n        // find the locations\n        this.locations = {\n            a_oldPosition: gl.getAttribLocation(this.program, 'a_oldPosition'),\n            a_oldVelocity: gl.getAttribLocation(this.program, 'a_oldVelocity'),\n            u_deltaTime: gl.getUniformLocation(this.program, 'u_deltaTime'),\n            u_frames: gl.getUniformLocation(this.program, 'u_frames'),\n            u_velocity: gl.getUniformLocation(this.program, 'u_velocity'),\n            u_noiseStrength: gl.getUniformLocation(this.program, 'u_noiseStrength'),\n            u_curlStrength: gl.getUniformLocation(this.program, 'u_curlStrength')\n        };\n\n        // init the positions and velocities\n        this.NUM_PARTICLES = count;\n        const s = .5;\n        const positions = new Float32Array(Array(this.NUM_PARTICLES).fill(0).map(_ => \n            Array.from(vec3.scale(\n                vec3.create(),\n                vec3.normalize(\n                    vec3.create(), \n                    vec3.fromValues(\n                        (Math.random() * 2 - 1),\n                        (Math.random() * 2 - 1),\n                        (Math.random() * 2 - 1)\n                    )),\n                s\n            ))\n        ).flat());\n        const velocities = new Float32Array(Array(this.NUM_PARTICLES).fill(0).map(_ => Array(3).fill(0).map(_ => (Math.random() * 2 - 1) * 0.0003 )).flat());\n\n        // make the buffers\n        this.positionBuffers = [\n            makeBuffer(gl, positions, gl.DYNAMIC_DRAW),\n            makeBuffer(gl, positions, gl.DYNAMIC_DRAW)\n        ];\n        this.velocityBuffers = [\n            makeBuffer(gl, velocities, gl.DYNAMIC_DRAW),\n            makeBuffer(gl, velocities, gl.DYNAMIC_DRAW)\n        ];\n\n        // create the compute VAOs\n        this.compute1VAO = makeVertexArray(gl, [\n            [this.positionBuffers[0], this.locations.a_oldPosition, 3],\n            [this.velocityBuffers[0], this.locations.a_oldVelocity, 3]\n        ]);\n        this.compute2VAO = makeVertexArray(gl, [\n            [this.positionBuffers[1], this.locations.a_oldPosition, 3],\n            [this.velocityBuffers[1], this.locations.a_oldVelocity, 3]\n        ]);\n\n        // make the transform feedbacks\n        this.transformFeedback1 = makeTransformFeedback(gl, [this.positionBuffers[0], this.velocityBuffers[0]]);\n        this.transformFeedback2 = makeTransformFeedback(gl, [this.positionBuffers[1], this.velocityBuffers[1]]);\n\n        // unbind left over stuff\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        gl.bindBuffer(gl.TRANSFORM_FEEDBACK_BUFFER, null);\n\n        // this are the render states\n        this.currentRenderState = {\n            resultPositionBufferIndex: 1,\n            computeVAO: this.compute1VAO,\n            transformFeedback: this.transformFeedback2\n        };\n        this.nextRenderState = {\n            resultPositionBufferIndex: 0,\n            computeVAO: this.compute2VAO,\n            transformFeedback: this.transformFeedback1\n        };\n\n        this.positionBuffer = this.currentRenderState.resultPositionBuffer;\n    }\n\n    update(frames = 0, deltaTime = 0) {\n        /** @type {WebGlRenderingContext} */\n        const gl = this.gl;\n\n        // compute\n        gl.enable(gl.RASTERIZER_DISCARD);\n        gl.useProgram(this.program);\n        gl.bindVertexArray(this.currentRenderState.computeVAO);\n        gl.uniform1f(this.locations.u_deltaTime, (deltaTime + 0.0001));\n        gl.uniform1f(this.locations.u_velocity, this.settings.velocity);\n        gl.uniform1f(this.locations.u_noiseStrength, this.settings.noise);\n        gl.uniform1f(this.locations.u_curlStrength, this.settings.curl);\n        gl.uniform1i(this.locations.u_frames, frames);\n        gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, this.currentRenderState.transformFeedback);\n        gl.beginTransformFeedback(gl.POINTS);\n        gl.drawArrays(gl.POINTS, 0, this.NUM_PARTICLES);\n        gl.endTransformFeedback();\n        gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, null);\n        gl.disable(gl.RASTERIZER_DISCARD);\n\n        const resultPositionBufferIndex = this.currentRenderState.resultPositionBufferIndex;\n\n        // swap the render states\n        const currentState = this.currentRenderState;\n        this.currentRenderState = this.nextRenderState;\n        this.nextRenderState = currentState;\n\n        return resultPositionBufferIndex;\n    }\n}\n","#version 300 es\n\nuniform float u_deltaTime;\nuniform int u_frames;\nuniform float u_velocity;\nuniform float u_noiseStrength;\nuniform float u_curlStrength;\n\nconst vec3 capsuleA = vec3(0., .5, 0.);\nconst vec3 capsuleB = vec3(0., -.5, 0.);\nconst float capsuleRadius = .5;\n\nin vec3 a_oldPosition;\nin vec3 a_oldVelocity;\n\nout vec3 t_newPosition;\nout vec3 t_newVelocity;\n\n// Capsule SDF from https://www.iquilezles.org/www/articles/distfunctions/distfunctions.htm\nfloat sdCapsule( vec3 p, vec3 a, vec3 b, float r )\n{\n  vec3 pa = p - a, ba = b - a;\n  float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n  return length( pa - ba*h ) - r;\n}\n\nfloat f(vec3 p) {\n    return sdCapsule(p, capsuleA, capsuleB, capsuleRadius);\n}\n\n// https://www.iquilezles.org/www/articles/normalsSDF/normalsSDF.htm\nvec3 sdCapsuleNormal( in vec3 p )\n{\n    const float eps = 0.0001;\n    const vec2 h = vec2(eps,0);\n    return normalize( vec3(f(p+h.xyy) - f(p-h.xyy),\n                           f(p+h.yxy) - f(p-h.yxy),\n                           f(p+h.yyx) - f(p-h.yyx) ) );\n}\n\n#pragma glslify: curlNoise = require(glsl-curl-noise) \n#pragma glslify: cnoise2 = require(glsl-noise/simplex/2d)\n\nvoid main() {\n    // combine a noise velocity with curl noise velocity\n    vec3 i = a_oldPosition * 1.2;\n    vec3 noiseVelocity = vec3(\n        cnoise2(a_oldPosition.xz + float(u_frames) * 0.005),\n        cnoise2(a_oldPosition.xz + float(u_frames) * 0.001),\n        cnoise2(a_oldPosition.xz + float(u_frames) * 0.008)\n    ) * 0.00002;\n    vec3 curlVelocity = a_oldVelocity + normalize(curlNoise(vec3(i.x, i.y * 0.8, i.z)) ) * 0.0001;\n    vec3 velocity = (a_oldVelocity + noiseVelocity * u_noiseStrength + curlVelocity * u_curlStrength) * u_velocity;\n    vec3 delta = velocity * u_deltaTime;\n    vec3 pos = a_oldPosition + delta;\n\n    // use the capsule SDF to restrict the movement of the particles\n    vec3 sdNormal = sdCapsuleNormal(pos);\n    float d = dot(sdNormal, delta);\n    float offset = capsuleRadius * .2;\n    float sd = min(1., max(f(pos), -offset));\n    float rs = sd / offset;\n    vec3 o = sdNormal * (1. + rs);\n    vec3 nPos = pos - o * d;\n    vec3 vPos = pos - o * 1.;\n\n    t_newPosition = nPos;\n    t_newVelocity = normalize(vPos - a_oldPosition) * length(a_oldVelocity);\n}\n","#version 300 es\n\nprecision highp float;\n\nvoid main() {}\n","import { vec3 } from 'gl-matrix';\n\n// Credits: https://github.com/pailhead/three-rounded-box/blob/master/index.js\nexport class RoundedBoxGeometry {\n\n    constructor( \n        width, \n        height, \n        depth, \n        radius, \n        radiusSegments\n    ) {\n        //validate params ===================================\n    \n        radiusSegments = !isNaN( radiusSegments ) ? Math.max( 1, Math.floor( radiusSegments ) ) : 1 ;\n    \n        width =  !isNaN(width)  ? width  : 1;\n        height = !isNaN(height) ? height : 1;\n        depth =  !isNaN(depth)  ? depth  : 1;\n    \n        radius = !isNaN(radius) ? radius : .15;\n    \n        radius = Math.min( radius , Math.min( width , Math.min( height , Math.min( depth ) ) ) / 2 );\n    \n        const edgeHalfWidth =  width / 2 - radius;\n        const edgeHalfHeight = height / 2 - radius;\n        const edgeHalfDepth =  depth / 2 - radius;\n    \n        //calculate vertices count ==========================\n    \n        const rs1 =  radiusSegments + 1; //radius segments + 1 \n    \n        const totalVertexCount = ( rs1 * radiusSegments + 1 ) << 3; \n    \n    \n        //make buffers ======================================\n    \n        const positions = new Float32Array( totalVertexCount * 3 );\n        \n        const normals = new Float32Array( totalVertexCount * 3 );\n        \n    \n        //some vars =========================================\n    \n        let \n            cornerVerts = [], \n            cornerNormals = [],\n            normal = vec3.create(),\n            vertex = vec3.create(),\n            vertexPool = [],\n            normalPool = [],\n            indices = []\n        ;\n    \n        let\n            lastVertex = rs1 * radiusSegments,\n            cornerVertNumber = rs1 * radiusSegments + 1\n        ;\n    \n        //////////////////// VERTICES\n    \n        //corner offsets\n        let cornerLayout = [\n            vec3.fromValues(  1 ,  1 ,  1 ),\n            vec3.fromValues(  1 ,  1 , -1 ),\n            vec3.fromValues( -1 ,  1 , -1 ),\n            vec3.fromValues( -1 ,  1 ,  1 ),\n            vec3.fromValues(  1 , -1 ,  1 ),\n            vec3.fromValues(  1 , -1 , -1 ),\n            vec3.fromValues( -1 , -1 , -1 ),\n            vec3.fromValues( -1 , -1 ,  1 )\n        ];\n\n        //corner holder \n        for ( let j = 0 ; j < 8 ; j ++ ){\n\n            cornerVerts.push([]); \n            cornerNormals.push([]); \n\n        }\n\n        //construct 1/8 sphere ==============================\n\n        let PIhalf = Math.PI / 2;\n\n        let cornerOffset = vec3.fromValues( edgeHalfWidth , edgeHalfHeight , edgeHalfDepth );\n\n        for ( let y = 0; y <= radiusSegments; y ++ ) {\n\n            let v = y / radiusSegments;\n\n            let va = v * PIhalf; //arrange in 90 deg\n\n            let cosVa = Math.cos( va ); //scale of vertical angle \n\n            let sinVa = Math.sin( va );\n\n            if( y == radiusSegments ){\n\n                vec3.set(vertex, 0, 1, 0);\n\n                let vert = vec3.clone(vertex);\n                vec3.scale(vert, vert, radius);\n                vec3.add(vert, vert, cornerOffset);\n                \n                cornerVerts[0].push( vert );\n\n                vertexPool.push( vert );\n                \n                let norm = vec3.normalize(vec3.create(), vertex);\n\n                cornerNormals[0].push( norm );\n\n                normalPool.push( norm );\n\n                continue; //skip row loop\n            \n            } \t\n\n            for ( let x = 0; x <= radiusSegments; x ++ ) {\n\n                let u = x / radiusSegments;\n\n                let ha = u * PIhalf;\n\n                //make 1/8 sphere points\n                vertex[0] = cosVa * Math.cos( ha );\n                vertex[1] = sinVa;\n                vertex[2] = cosVa * Math.sin( ha );\n\n                //copy sphere point, scale by radius, offset by half whd\n                let vert = vec3.clone(vertex);\n                vec3.scale(vert, vert, radius);\n                vec3.add(vert, vert, cornerOffset);\n\n                cornerVerts[0].push( vert );\n\n                vertexPool.push( vert );\n                \n                //sphere already normalized, just clone\n\n                let norm = vec3.normalize(vec3.create(), vec3.clone(vertex));\n\n                cornerNormals[0].push( norm );\n                normalPool.push( norm );\n\n            }\n\n        }\n\n        //distribute corner verts ===========================\n\n        for ( let i = 1 ; i < 8 ; i ++ ){\n\n            for( let j = 0 ; j < cornerVerts[0].length ; j ++ ){\n\n                let vert = vec3.multiply(vec3.create(), cornerVerts[0][j], cornerLayout[i]);\n\n                cornerVerts[i].push( vert );\n                \n                vertexPool.push( vert );\n\n                let norm = vec3.multiply(vec3.create(), cornerNormals[0][j], cornerLayout[i]);\n\n                cornerNormals[i].push( norm );\n\n                normalPool.push( norm );\n\n            }\n\n        }\t\n\n        //////////////////// FACES\n\n        //top\n        let a = lastVertex;// + cornerVertNumber * 0;\n        let b = lastVertex + cornerVertNumber;// * 1;\n        let c = lastVertex + cornerVertNumber * 2;\n        let d = lastVertex + cornerVertNumber * 3;\n\n        indices.push( a );\n        indices.push( b );\n        indices.push( c );\n        indices.push( a );\n        indices.push( c );\n        indices.push( d );\n\n        //bottom\n        a = lastVertex + cornerVertNumber * 4;// + cornerVertNumber * 0;\n        b = lastVertex + cornerVertNumber * 5;// * 1;\n        c = lastVertex + cornerVertNumber * 6;\n        d = lastVertex + cornerVertNumber * 7;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( a );\n        indices.push( d );\n        indices.push( c );\n\n        //left \n        a = 0;\n        b = cornerVertNumber;\n        c = cornerVertNumber * 4;\n        d = cornerVertNumber * 5;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( b );\n        indices.push( c );\n        indices.push( d );\n\n        //right \n        a = cornerVertNumber * 2;\n        b = cornerVertNumber * 3;\n        c = cornerVertNumber * 6;\n        d = cornerVertNumber * 7;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( b );\n        indices.push( c );\n        indices.push( d );\n\n        //front \n        a = radiusSegments;\n        b = radiusSegments + cornerVertNumber * 3;\n        c = radiusSegments + cornerVertNumber * 4;\n        d = radiusSegments + cornerVertNumber * 7;\n\n        indices.push( a );\n        indices.push( b );\n        indices.push( c );\n        indices.push( b );\n        indices.push( d );\n        indices.push( c );\n\n        //back \n        a = radiusSegments + cornerVertNumber;\n        b = radiusSegments + cornerVertNumber * 2;\n        c = radiusSegments + cornerVertNumber * 5;\n        d = radiusSegments + cornerVertNumber * 6;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( b );\n        indices.push( c );\n        indices.push( d );\n    \n        //////////////////// CORNERS\n        \n        let indexInd = 0;\n\n\n        let flips = [\n            true,\n            false,\n            true,\n            false,\n            false,\n            true,\n            false,\n            true\n        ];\n\n        let lastRowOffset = rs1 * ( radiusSegments - 1 );\n\n        for ( let i = 0 ; i < 8 ; i ++ ){\n\n            let cornerOffset = cornerVertNumber * i;\n\n            for ( let v = 0 ; v < radiusSegments - 1 ; v ++ ){\n\n                let r1 = v * rs1; \t\t//row offset\n                let r2 = (v + 1) * rs1; //next row\n\n                for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                    let u1 = u + 1;\n                    let a = cornerOffset + r1 + u;\n                    let b = cornerOffset + r1 + u1;\n                    let c = cornerOffset + r2 + u;\n                    let d = cornerOffset + r2 + u1;\n\n                    if( !flips[i] ){\n\n                        indices.push( a );\n                        indices.push( b );\n                        indices.push( c );\n\n                        indices.push( b );\n                        indices.push( d );\n                        indices.push( c );\n\n                    } else {\n\n                        indices.push( a );\n                        indices.push( c );\n                        indices.push( b );\n\n                        indices.push( b );\n                        indices.push( c );\n                        indices.push( d );\n\n                    }\n\n                }\n\n            }\n            \n            for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                let a = cornerOffset + lastRowOffset + u;\n                let b = cornerOffset + lastRowOffset + u + 1;\n                let c = cornerOffset + lastVertex;\n\n                if( !flips[i] ){\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n\n                } else {\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n\n                }\n\n            }\n\n        }\n    \n        //////////////////// HEIGHT EDGES\n\n        for ( let i = 0 ; i < 4 ; i ++ ){\n\n            let cOffset = i * cornerVertNumber;\n            let cRowOffset = 4 * cornerVertNumber + cOffset;\n            let needsFlip = i & 1 === 1;\n            for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                let u1 = u + 1;\n                let a = cOffset + u;\n                let b = cOffset + u1;\n                let c = cRowOffset + u;\n                let d = cRowOffset + u1;\n\n                if( !needsFlip ){\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( d );\n                    indices.push( c );\n\n                } else {\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( d );\n\n                }\n\n            }\n\n        }\n\n        //////////////////// WIDTH EDGES\n\n        let end = radiusSegments - 1;\n\n        let cStartsW = [ 0 , 1 , 4 , 5 ];\n        let cEndsW =   [ 3 , 2 , 7 , 6 ];\n        let needsFlip = [0,1,1,0];\n\n        for ( let i = 0 ; i < 4 ; i ++ ){\n\n            let cStart = cStartsW[i] * cornerVertNumber;\n            let cEnd = cEndsW[i] * cornerVertNumber;\n            \n\n            for ( let u = 0 ; u <= end ; u ++ ){\n\n                // let dInd = u != end ? radiusSegments + u * rs1 : cornerVertNumber - 1;\n\n                let a = cStart + radiusSegments + u * rs1;\n                let b = cStart + (u != end ? radiusSegments + (u + 1) * rs1 : cornerVertNumber - 1);\n\n                let c = cEnd + radiusSegments + u * rs1;\n                let d = cEnd + (u != end ? radiusSegments + (u + 1) * rs1 : cornerVertNumber - 1);\n\n                if( !needsFlip[i] ){\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( d );\n                    indices.push( c );\n\n                } \n                else {\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( d );\n\n                }\n\n            }\n\n        }\n\n        //////////////////// DEPTH EDGES\n\n        let cStartsD = [ 0 , 2 , 4 , 6 ];\n        let cEndsD =   [ 1 , 3 , 5 , 7 ];\n            \n        for ( let i = 0 ; i < 4 ; i ++ ){\n\n            let cStartD = cornerVertNumber * cStartsD[ i ];\n            let cEndD =   cornerVertNumber * cEndsD[ i ];\n\n            let needsFlip = 1 >= i;\n\n            for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                let urs1 =  u * rs1;\n                let u1rs1 = (u+1) * rs1;\n\n                let a = cStartD + urs1;\n                let b = cStartD + u1rs1;\n                let c = cEndD + urs1;\n                let d = cEndD + u1rs1\n\n                if( needsFlip ){\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( d );\n\n                } else {\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( d );\n                    indices.push( c );\n\n                }\n\n            }\n\n        }\n    \n        //fill buffers ======================================\n    \n        let index = 0;\n    \n        for ( let i = 0 ; i < vertexPool.length ; i ++ ){\n    \n            positions.set(vertexPool[i], index * 3);\n    \n            normals.set(normalPool[i], index * 3);\n    \n            index++;\n    \n        }\n    \n        this.vertices = positions;\n        this.normals = normals;\n        this.indices = indices;\n        this.count = indices.length;\n        \n    };\n}","import { mat4, quat, vec2, vec3 } from 'gl-matrix';\nimport { OrbitControl } from './utils/orbit-control';\nimport { Particles } from './particles';\nimport { createAndSetupTexture, createFramebuffer, createProgram, makeBuffer, makeVertexArray, resizeCanvasToDisplaySize, setFramebuffer } from './utils/webgl-utils';\nimport { RoundedBoxGeometry } from './utils/rounded-box-geometry';\n\nimport colorVertShaderSource from './shader/color.vert';\nimport colorFragShaderSource from './shader/color.frag';\nimport particleVertShaderSource from './shader/particle.vert';\nimport particleFragShaderSource from './shader/particle.frag';\n\nexport class Luciferin {\n    oninit;\n\n    #time = 0;\n    #frames = 0;\n    #deltaTime = 0;\n    #isDestroyed = false;\n\n    camera = {\n        matrix: mat4.create(),\n        near: 90,\n        far: 140,\n        distance: 120,\n        orbit: quat.create(),\n        position: vec3.create(),\n        rotation: vec3.create(),\n        up: vec3.fromValues(0, 1, 0)\n    };\n\n    refractionSettings = {\n        strength: .3,\n        dispersion: 1.\n    }\n\n    constructor(canvas, pane, oninit = null) {\n        this.canvas = canvas;\n        this.pane = pane;\n        this.oninit = oninit;\n\n        this.#init();\n    }\n\n    resize() {\n        const gl = this.gl;\n\n        const needsResize = resizeCanvasToDisplaySize(gl.canvas);\n        \n        if (needsResize) {\n            gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n            this.#resizeTextures(gl);\n        }\n        \n        this.#updateProjectionMatrix(gl);\n    }\n\n    run(time = 0) {\n        this.fpsGraph.begin();\n\n        this.#deltaTime = Math.min(32, time - this.#time);\n        this.#time = time;\n        this.#frames += this.#deltaTime / 16;\n\n        if (this.#isDestroyed) return;\n\n        this.particlesPositionBufferIndex = this.particles.update(this.#frames, this.#deltaTime);\n        this.control.update(this.#deltaTime);\n\n        this.#render();\n\n        this.fpsGraph.end();\n\n        requestAnimationFrame((t) => this.run(t));\n    }\n\n    #render() {\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n\n        // draw the particles\n        gl.useProgram(this.particleProgram);\n        setFramebuffer(gl, this.particleFBO, this.particleFBOSize[0], this.particleFBOSize[1]);\n        gl.clearColor(0, 0, 0, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.disable(gl.DEPTH_TEST);\n        gl.disable(gl.CULL_FACE);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.SRC_ALPHA, gl.DST_ALPHA);\n        gl.uniformMatrix4fv(this.particleLocations.u_worldMatrix, false, this.drawUniforms.u_worldMatrix);\n        gl.uniformMatrix4fv(this.particleLocations.u_viewMatrix, false, this.drawUniforms.u_viewMatrix);\n        gl.uniformMatrix4fv(this.particleLocations.u_projectionMatrix, false, this.drawUniforms.u_projectionMatrix);\n        gl.bindVertexArray(this.particleVAOs[this.particlesPositionBufferIndex]);\n        gl.drawArrays(gl.POINTS, 0, this.particles.NUM_PARTICLES);\n        gl.disable(gl.BLEND);\n        gl.enable(gl.DEPTH_TEST);\n        gl.enable(gl.CULL_FACE);\n        setFramebuffer(gl, null, gl.canvas.clientWidth, gl.canvas.clientHeight);\n\n        // draw capsule\n        gl.useProgram(this.colorProgram);\n        gl.clearColor(0, 0, 0, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.uniformMatrix4fv(this.colorLocations.u_viewMatrix, false, this.drawUniforms.u_viewMatrix);\n        gl.uniformMatrix4fv(this.colorLocations.u_projectionMatrix, false, this.drawUniforms.u_projectionMatrix);\n        gl.uniform3f(this.colorLocations.u_cameraPosition, this.camera.position[0], this.camera.position[1], this.camera.position[2]);\n        const worldInverseTransposeMatrix = mat4.create();\n        mat4.invert(worldInverseTransposeMatrix, this.drawUniforms.u_worldMatrix);\n        mat4.transpose(worldInverseTransposeMatrix, worldInverseTransposeMatrix);\n        gl.uniformMatrix4fv(this.colorLocations.u_worldMatrix, false, this.drawUniforms.u_worldMatrix);\n        gl.uniformMatrix4fv(this.colorLocations.u_worldInverseTransposeMatrix, false, worldInverseTransposeMatrix);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.particleTexture);\n        gl.uniform1i(this.colorLocations.u_particleTexture, 0);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, this.envMapTexture);\n        gl.uniform1i(this.colorLocations.u_envMapTexture, 1);\n        gl.uniform1f(this.colorLocations.u_refractionStrength, this.refractionSettings.strength);\n        gl.uniform1f(this.colorLocations.u_dispersion, this.refractionSettings.dispersion);\n        gl.bindVertexArray(this.capsuleVAO);\n        gl.drawElements(gl.TRIANGLES, this.capsuleBuffers.numElem, gl.UNSIGNED_SHORT, 0);\n    }\n\n    destroy() {\n        this.#isDestroyed = true;\n    }\n\n    #init() {\n        this.gl = this.canvas.getContext('webgl2', { antialias: false, alpha: false });\n\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        if (!gl) {\n            throw new Error('No WebGL 2 context!')\n        }\n\n\n        /////////////////////////////////// PARTICLES SETUP\n\n        this.particles = new Particles(gl, 8000);\n\n        ///////////////////////////////////  PROGRAM SETUP\n\n        // setup programs\n        this.colorProgram = createProgram(gl, [colorVertShaderSource, colorFragShaderSource], null, { a_position: 0, a_normal: 1, a_uv: 2 });\n        this.particleProgram = createProgram(gl, [particleVertShaderSource, particleFragShaderSource], null, { a_position: 0 });\n\n        // find the locations\n        this.colorLocations = {\n            a_position: gl.getAttribLocation(this.colorProgram, 'a_position'),\n            a_normal: gl.getAttribLocation(this.colorProgram, 'a_normal'),\n            a_uv: gl.getAttribLocation(this.colorProgram, 'a_uv'),\n            u_worldMatrix: gl.getUniformLocation(this.colorProgram, 'u_worldMatrix'),\n            u_viewMatrix: gl.getUniformLocation(this.colorProgram, 'u_viewMatrix'),\n            u_projectionMatrix: gl.getUniformLocation(this.colorProgram, 'u_projectionMatrix'),\n            u_worldInverseTransposeMatrix: gl.getUniformLocation(this.colorProgram, 'u_worldInverseTransposeMatrix'),\n            u_cameraPosition: gl.getUniformLocation(this.colorProgram, 'u_cameraPosition'),\n            u_particleTexture: gl.getUniformLocation(this.colorProgram, 'u_particleTexture'),\n            u_envMapTexture: gl.getUniformLocation(this.colorProgram, 'u_envMapTexture'),\n            u_refractionStrength: gl.getUniformLocation(this.colorProgram, 'u_refractionStrength'),\n            u_dispersion: gl.getUniformLocation(this.colorProgram, 'u_dispersion')\n        };\n        this.particleLocations = {\n            a_position: gl.getAttribLocation(this.particleProgram, 'a_position'),\n            u_worldMatrix: gl.getUniformLocation(this.particleProgram, 'u_worldMatrix'),\n            u_viewMatrix: gl.getUniformLocation(this.particleProgram, 'u_viewMatrix'),\n            u_projectionMatrix: gl.getUniformLocation(this.particleProgram, 'u_projectionMatrix')\n        };\n        \n        // setup uniforms\n        this.drawUniforms = {\n            u_worldMatrix: mat4.create(),\n            u_viewMatrix: mat4.create(),\n            u_projectionMatrix: mat4.create(),\n            u_worldInverseTransposeMatrix: mat4.create()\n        };\n\n        mat4.rotate(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, 0, [1, 0, 0]);\n        mat4.scale(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, [30, 30, 30]);\n        mat4.translate(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, [0, 0, 0]);\n\n        /////////////////////////////////// GEOMETRY / MESH SETUP\n\n        // create the particles draw VAOs\n        this.particleVAOs = [\n            makeVertexArray(this.gl, [\n                [this.particles.positionBuffers[0], this.particleLocations.a_position, 3]\n            ]),\n            makeVertexArray(this.gl, [\n                [this.particles.positionBuffers[1], this.particleLocations.a_position, 3]\n            ])\n        ];\n\n        // create quad VAO\n        const quadPositions = [\n            -1, -1,\n            3, -1,\n            -1, 3\n        ];\n        this.quadBuffers = {\n            position: makeBuffer(gl, new Float32Array(quadPositions), gl.STATIC_DRAW),\n            numElem: quadPositions.length / 2\n        };\n        this.quadVAO = makeVertexArray(gl, [[this.quadBuffers.position, this.colorLocations.a_position, 2]]);\n\n        // create capsule VAO\n        this.capsuleGeometry = new RoundedBoxGeometry(1, 2, 1, .5, 20);\n        this.capsuleBuffers = { \n            position: makeBuffer(gl, this.capsuleGeometry.vertices, gl.STATIC_DRAW),\n            normal: makeBuffer(gl, this.capsuleGeometry.normals, gl.STATIC_DRAW),\n            numElem: this.capsuleGeometry.count\n        };\n        this.capsuleVAO = makeVertexArray(gl, [\n            [this.capsuleBuffers.position, this.colorLocations.a_position, 3],\n            [this.capsuleBuffers.normal, this.colorLocations.a_normal, 3]\n        ], this.capsuleGeometry.indices);\n\n        /////////////////////////////////// FRAMEBUFFER SETUP\n\n        // initial client dimensions\n        const clientSize = vec2.fromValues(gl.canvas.clientWidth, gl.canvas.clientHeight);\n        this.particleFBOSize = vec2.clone(clientSize);\n\n        this.particleTexture = createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR, gl.REPEAT, gl.REPEAT);\n        gl.bindTexture(gl.TEXTURE_2D, this.particleTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.particleFBOSize[0], this.particleFBOSize[1], 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.particleFBO = createFramebuffer(gl, [this.particleTexture]);\n\n        this.resize();\n\n        this.#initEnvMap();\n        this.#updateCameraMatrix();\n        this.#updateProjectionMatrix(gl);\n\n        this.#initOrbitControls();\n        this.#initTweakpane();\n\n        if (this.oninit) this.oninit(this);\n    }\n\n    #initEnvMap() {\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        this.envMapTexture = createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR, gl.MIRRORED_REPEAT, gl.MIRRORED_REPEAT);\n        gl.bindTexture(gl.TEXTURE_2D, this.envMapTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 100, 500, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        const img = new Image();\n        img.src = new URL('./assets/studio024.jpg', import.meta.url);\n        img.addEventListener('load', () => {\n            gl.bindTexture(gl.TEXTURE_2D, this.envMapTexture);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 100, 500, 0, gl.RGBA, gl.UNSIGNED_BYTE, img);\n        });\n    }\n\n    #initOrbitControls() {\n        this.control = new OrbitControl(this.canvas, this.camera, () => this.#updateCameraMatrix());\n    }\n\n    #resizeTextures(gl) {\n        const clientSize = vec2.fromValues(gl.canvas.clientWidth, gl.canvas.clientHeight);\n        this.particleFBOSize = vec2.clone(clientSize);\n        \n        // resize particle texture\n        gl.bindTexture(gl.TEXTURE_2D, this.particleTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.particleFBOSize[0], this.particleFBOSize[1], 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        // reset bindings\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n\n    #updateCameraMatrix() {\n        mat4.targetTo(this.camera.matrix, this.camera.position, [0, 0, 0], this.camera.up);\n        mat4.invert(this.drawUniforms.u_viewMatrix, this.camera.matrix);\n    }\n\n    #updateProjectionMatrix(gl) {\n        const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n        mat4.perspective(this.drawUniforms.u_projectionMatrix, Math.PI / 4, aspect, this.camera.near, this.camera.far);\n    }\n\n    #initTweakpane() {\n        if (this.pane) {\n            const maxFar = 200;\n\n            this.fpsGraph = this.pane.addBlade({\n                view: 'fpsgraph',\n                label: 'fps',\n                lineCount: 1,\n                maxValue: 120,\n                minValue: 0\n            });\n\n            const cameraFolder = this.pane.addFolder({ title: 'Camera' });\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'near', 'near', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'far', 'far', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n\n            const particlesFolder = this.pane.addFolder({ title: 'Particles' });\n            this.#createTweakpaneSlider(particlesFolder, this.particles.settings, 'velocity', 'velocity', 0, 10, null);\n            this.#createTweakpaneSlider(particlesFolder, this.particles.settings, 'curl', 'curl', 0, 10, null);\n            this.#createTweakpaneSlider(particlesFolder, this.particles.settings, 'noise', 'noise', 0, 10, null);\n\n            const refractionFolder = this.pane.addFolder({ title: 'Refraction' });\n            this.#createTweakpaneSlider(refractionFolder, this.refractionSettings, 'strength', 'strength', 0, 1, null);\n            this.#createTweakpaneSlider(refractionFolder, this.refractionSettings, 'dispersion', 'dispersion', 0, 10, null);\n        }\n    }\n\n    #createTweakpaneSlider(folder, obj, propName, label, min, max, stepSize = null, callback) {\n        const slider = folder.addBlade({\n            view: 'slider',\n            label,\n            min,\n            max,\n            step: stepSize,\n            value: obj[propName],\n        });\n        slider.on('change', e => {\n            obj[propName] = e.value;\n            if(callback) callback();\n        });\n    }\n}\n",null,"#version 300 es\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_worldInverseTransposeMatrix;\nuniform vec3 u_cameraPosition;\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec3 v_position;\nout vec3 v_viewPosition;\nout vec3 v_normal;\nout vec3 v_viewNormal;\nout vec2 v_uv;\nout vec3 v_surfaceToView;\n\nvoid main() {\n    v_uv = a_uv;\n    v_normal = (u_worldInverseTransposeMatrix * vec4(a_normal, 0.)).xyz;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    v_surfaceToView = u_cameraPosition - worldPosition.xyz;\n    v_position = a_position.xyz;\n    v_viewPosition = viewPosition.xyz;\n    v_viewNormal = (u_viewMatrix * vec4(v_normal, 0.)).xyz;\n}\n","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_particleTexture;\nuniform sampler2D u_envMapTexture;\nuniform float u_frames;\nuniform float u_refractionStrength;\nuniform float u_dispersion;\n\nin vec3 v_position;\nin vec3 v_normal;\nin vec3 v_viewNormal;\nin vec2 v_uv;\nin vec3 v_surfaceToView;\nin vec3 v_viewPosition;\n\nout vec4 outColor;\n\n#define PI 3.1415926535\n\nvoid main() {\n    vec3 pos = v_position;\n    vec3 N = normalize(v_normal);\n    vec3 VN = normalize(v_viewNormal);\n    vec3 V = normalize(v_surfaceToView);\n    vec3 L = normalize(vec3(0., 1., 0.4));\n    float NdL = max(0., dot(N, L));\n\n    // calculate the reflection vector\n    float NdV = max(0., dot(N, V));\n    vec3 R = NdV * N * 2. - V;\n    R = normalize(R);\n\n    // calculate the half vector\n    vec3 H = normalize(V + N);\n\n    // base color\n    vec3 albedo = vec3(0.0, 0.04, 0.1);\n\n    // ambient ligthing\n    vec3 ambient = vec3(0., 0.8, 2.0) * 0.1;\n\n    // env ligthing\n    float phi   = atan(R.z, R.x);\n\tfloat theta = acos(R.y);\n    vec2 equiPos = vec2(phi / (2. * PI), theta / PI);\n    vec3 env = texture(u_envMapTexture, equiPos).rgb;\n\n    // fresnel term\n    float fresnel = min(1., pow(1. - NdV, 2.));\n\n    // diffuse shading\n    float diffuse = NdL * 0.55;\n\n    // specular shading\n    float specular = pow(max(0., max(0., dot(H, L))), 60.) * 0.9;\n\n    // color\n    vec3 color = albedo + ambient * fresnel * .4 + specular * .1 + diffuse;\n\n    vec4 hullColor = vec4(vec3(0., 0.8, 2.0) * diffuse + ambient, fresnel + 0.1);\n    hullColor += vec4(env * env * env, env.r) * .5;\n\n    vec2 texelSize = 1. / vec2(textureSize(u_particleTexture, 0));\n    vec2 uv = vec2(gl_FragCoord) * texelSize;\n    vec3 RR = refract(normalize(v_viewPosition), VN, 1. / 1.33);\n    vec2 RF = (RR.xy * u_refractionStrength) * texelSize * 1000.;\n    vec2 chromaOffset = (RF * RF) * u_dispersion;\n    vec4 particleColor = vec4(\n        texture(u_particleTexture, uv + RF + chromaOffset).r,\n        texture(u_particleTexture, uv + RF).g,\n        texture(u_particleTexture, uv + RF - chromaOffset).b,\n        1.\n    );\n\n    outColor = hullColor * hullColor.a + particleColor * (1. - hullColor.a);\n}\n","#version 300 es\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n\nin vec3 a_position;\n\nout float v_size;\n\nvoid main() {\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    float size = 1. - ((gl_Position.z / gl_Position.w) * .5 + .5);\n    size *= max(0.1, 1. - length(a_position * vec3(1., 0.5, 1.)));\n    gl_PointSize = size * 500.;\n    v_size = size;\n}\n","#version 300 es\n\nprecision highp float;\n\nout vec4 outColor;\n\nin float v_size;\n\nvoid main() {\n    vec2 c = gl_PointCoord * 2. - 1.;\n    float colorMask1 = 1. - smoothstep(0., 1., length(c));\n    float colorMask2 = 1. - smoothstep(0., .1, length(c));\n    vec3 baseColor1 = vec3(0., 0.2, 0.5) * .001;\n    vec3 baseColor2 = vec3(0., 0.2, 0.4);\n    vec4 color = vec4(baseColor1 + vec3(v_size) * colorMask1, colorMask1 * 0.03);\n    color += vec4(baseColor2 + vec3(v_size) * colorMask2, colorMask2 * 0.03);\n    outColor = color;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('7EiNB') + require('./helpers/bundle-manifest').resolve(\"jXc8V\");","import { Pane } from 'tweakpane';\nimport * as EssentialsPlugin from '@tweakpane/plugin-essentials';\nimport { Luciferin } from './luciferin';\n\nconst queryString = window.location.search;\nconst urlParams = new URLSearchParams(queryString);\nconst debugParam = urlParams.get('debug');\n\nlet DEBUG = debugParam !== null;\n\nif (process.env.NODE_ENV !== 'production') {\n    // Only runs in development and will be stripped in production builds.\n    DEBUG = true;\n}\n\nlet sketch;\nlet resizeTimeoutId;\n\nwindow.addEventListener('load', () => {\n    const canvas = document.body.querySelector('#c');\n\n    let pane;\n    if (DEBUG) {\n        pane = new Pane({ title: 'Settings' });\n        pane.registerPlugin(EssentialsPlugin);\n    }\n\n    sketch = new Luciferin(canvas, pane, (sketch) => {\n        sketch.run(); \n    });\n});\n\nwindow.addEventListener('resize', () => {\n    if (sketch) {\n        if (resizeTimeoutId)\n            clearTimeout(resizeTimeoutId);\n\n        resizeTimeoutId = setTimeout(() => {\n            resizeTimeoutId = null;\n            sketch.resize();\n        }, 300);\n    }\n});\n\n\n"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$08b63c45f54847ee$export$2e2bcd8739ae039","self","ReferenceError","$b07b5082a7b10ea2$export$2e2bcd8739ae039","instance","Constructor","TypeError","$dcece6133d76b55a$export$2e2bcd8739ae039","receiver","privateMap","action","has","get","$8670bb7693f1be6c$export$2e2bcd8739ae039","descriptor","call","$9bafa38f312dd07c$export$2e2bcd8739ae039","$17b70ab68c8af51d$export$2e2bcd8739ae039","obj","privateCollection","$326c47cca3a8ac7e$export$2e2bcd8739ae039","set","$ddc213466441343f$export$2e2bcd8739ae039","writable","$61cb80bdd8ccaed6$export$2e2bcd8739ae039","$45c6f556fa958784$export$2e2bcd8739ae039","privateSet","fn","$09958fbc0dfbe0ad$export$2e2bcd8739ae039","add","$ac93fd2313270fd8$var$setPrototypeOf","o1","p1","setPrototypeOf","o","p","__proto__","$ac93fd2313270fd8$export$2e2bcd8739ae039","$fb222e0933d810ce$var$isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","e","$fb222e0933d810ce$var$construct","Parent1","args1","Class1","Parent","args","Class","a","push","apply","Function","bind","arguments","$fb222e0933d810ce$export$2e2bcd8739ae039","$e5f9bd0c37e9914c$var$_defineProperties","target","props","enumerable","configurable","defineProperty","key","$e5f9bd0c37e9914c$export$2e2bcd8739ae039","protoProps","staticProps","$7dc24fd3d8e84af6$var$getPrototypeOf","getPrototypeOf","$7dc24fd3d8e84af6$export$2e2bcd8739ae039","$87fe16ba8ff029a3$export$2e2bcd8739ae039","constructor","Symbol","$995f9dda6ee7c4ee$export$2e2bcd8739ae039","Derived","hasNativeReflectConstruct","Boolean","valueOf","$d60c94504fa4a111$export$2e2bcd8739ae039","result","Super","NewTarget","this","$7dbcf7086e8d10dc$export$2e2bcd8739ae039","$5f25f83067750fb9$var$get","target1","property1","receiver1","property","base","object","hasOwnProperty","$3ff79f9fa52f36c6$export$2e2bcd8739ae039","desc","getOwnPropertyDescriptor","$bc25518f39dadcf6$export$2e2bcd8739ae039","subClass","superClass","create","$8664303016091545$export$2e2bcd8739ae039","iter","iterator","Array","from","$a735c72dc00321c4$export$2e2bcd8739ae039","arr","len","arr2","$09f7b49357d6407d$export$2e2bcd8739ae039","minLen","n","slice","name","test","$d8de0eb6e0dd5f0d$export$2e2bcd8739ae039","isArray","$6e00726c30bb8aa8$export$2e2bcd8739ae039","$9e1e3aff84b72d71$export$2e2bcd8739ae039","$44ff19cc49d55455$export$2e2bcd8739ae039","$c0e5c3a46846db0d$export$2e2bcd8739ae039","$9a10eb5a4ae3d243$export$2e2bcd8739ae039","exports","Semver","text","ref","split","core","prerelease","coreComps","major","parseInt","minor","patch","join","BladeApi","controller","controller_","viewProps","disabled","hidden","TpEvent","TpChangeEvent","presetKey","last","_this","TpUpdateEvent","TpFoldEvent","expanded","forceCast","v","isEmpty","deepEqualsArray","a1","a2","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","context","concat","nomatchingcontroller","nomatchingview","stringify","params","notbindable","propertynotfound","shouldneverhappen","TpError","config","_a","message","type","BindingTarget","opt_id","obj_","key_","presetKey_","valueObj","read","isBindable","notBindable","propertyNotFound","ButtonApi","label","valueController","title","eventName","handler","bh","emitter","on","Emitter","observers_","observers","filter","observer","event","forEach","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","compose","h1","h2","input","extractValue","ev","rawValue","bindValue","applyValue","bindValueMap","valueMap","applyClass","elem","className","active","classList","remove","valueToClassName","bindValueToTextContent","textContent","className$q","ButtonView","doc","element","createElement","bindClassModifiers","buttonElem","bindDisabled","appendChild","buttonElement","titleElem","ButtonController","onClick_","view","addEventListener","emit","sender","BoundValue","initialValue","constraint_","constraint","equals_","equals","v1","v2","rawValue_","setRawValue","forceEmit","options","opts","constrainedValue","constrain","PrimitiveValue","value_","createValue","ValueMap","valMap_","_this1","_loop","reduce","assign","createCore","parseObject","keyToParserMap","tmp","undefined","parser","succeeded","parseArray","parseItem","item","isObject","createParamsParserBuilder","optional","createParamsParserBuilders","custom","boolean","number","string","function","constant","raw","array","itemParser","ParamsParsers","required","parseParams","disposeElement","parentElement","removeChild","getAllBladePositions","className$p","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent_","blade","pos","handleDispose","SVG_NS","forceReflow","offsetHeight","disableTransitionTemporarily","callback","t","style","transition","supportsTouch","ontouchstart","getGlobalObject","getWindowDocument","document","getCanvasContext","canvasElement","win","ownerDocument","defaultView","getContext","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","index","insertBefore","children","removeElement","removeChildElements","removeChildNodes","childNodes","findNextTarget","relatedTarget","explicitOriginalTarget","className$o","createLabelNode","frag","createDocumentFragment","map","line","createTextNode","lineNode","LabelView","labelElem","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","accept","fromObject","api","ValueBladeController","createBlade","positions","Foldable","ValueMap1","styleExpanded","exHeight","expandedClassName","onExpand","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","computeExpandedFolderHeight","folder","containerElement","height","clientHeight","applyHeight","foldable","styleHeight","bindFoldable","propertyName","cleanUpTransition","RackLikeApi","rackApi","rackApi_","addButtonAsBlade","addBlade","addFolderAsBlade","addSeparatorAsBlade","opt_params","addTabAsBlade","NestedOrderedSet","extract","items_","cache_","Set","onSubListAdd_","onSubListRemove_","extract_","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","allItems","next","done","return","item1","opt_index","includes","shouldNeverHappen","splice","subList","root","indexOf","delete","off","InputBindingApi","onBindingChange_","emitter_","binding","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","dispose","findSubBladeApiSet","RackApi","getApiByController","apiSet","api1","find","createBindingTarget","pool","onRackAdd_","onRackRemove_","onRackInputChange_","onRackMonitorUpdate_","apiSet_","pool_","rack","bc","setUpApi_","createInput","createMonitor","gapi","createBladeApi","bladeController","isRoot","api3","FolderApi","rackController","addInput","addMonitor","addFolder","addButton","addSeparator","addTab","RackLikeController","PlainView","findInputBindingController","bcs","b","findMonitorBindingController","findValueBladeController","findSubRack","RackController","findSubBladeControllerSet","BladeRack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onChildViewPropsChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","blade_","bcSet_","items","parent","controllerClass","updatePositions_","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","_","bladeContainerClassName","FolderView","className_","foldable_","bindExpandedClass","titleElement","markElem","containerElem","FolderController","rc","onTitleClick_","FolderBladePlugin","LabeledValueController","SeparatorApi","className$n","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$m","valueToModifier","modifier","ViewProps","ValueMap2","tabIndex","disposed","opt_initialValue","_b","className$l","TabItemView","selected","TabItemController","TabPageController","onItemClick_","ic_","itemProps","cc_","itemController","contentController","TabPageApi","contentRackApi","TabApi","onPageAdd_","onPageRemove_","pageApiMap_","Map","pageSet","pc","setUpPageApi_","api4","className$k","TabView","empty","itemsElem","itemsElement","contentsElem","contentsElement","TabController","cr","onPageSelectedChange_","pageSet_","empty_","applyPages_","keepSelection_","firstSelIndex","findIndex","TabBladePlugin","pages","c","createBladeController","plugin","ac","ManualTicker","IntervalTicker","interval","disabled_","timerId_","onTick_","doc_","interval_","setTimer_","inactive","clearTimer_","clearInterval","setInterval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","RangeConstraint","maxValue","max","minValue","min","Math","StepConstraint","step","round","className$j","ListView","onValueChange_","props_","selectElem","optionElem","dataset","String","selectElement","update_","ListController","onSelectChange_","optElem","currentTarget","selectedOptions","itemIndex","Number","className$i","PopupView","shows","PopupController","className$h","TextView","onChange_","inputElem","inputElement","refresh","formatter","TextController","onInputChange_","parser_","parsedValue","boolToString","boolFromUnknown","BooleanFormatter","NumberLiteralNode","BINARY_OPERATION_MAP","pow","BinaryOperationNode","operator","left","right","op","evaluate","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","m","substr","readNonZeroDigit","ch","readDecimalDigits","readSignedInteger","ds","sign","sds","readExponentPart","toLowerCase","si","readDecimalIntegerLiteral","nzd","readDecimalLiteral1","dil","dot","dds","readDecimalLiteral2","readDecimalLiteral3","readDecimalLiteral","parseBinaryDigits","readBinaryIntegerLiteral","prefix","bds","readOctalDigits","readOctalIntegerLiteral","ods","readHexDigits","readHexIntegerLiteral","hds","readNonDecimalIntegerLiteral","readNumericLiteral","parseLiteral","num","evaluable","parseParenthesizedExpression","parseExpression","cl","parsePrimaryExpression","parseUnaryExpression","readBinaryOperator","ops","op1","startsWith","createBinaryOperationExpressionParser","exprParser","firstExpr","nextExpr","parseBinaryOperationExpression","parseEcmaNumberExpression","parseNumber","r","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","createPushedBuffer","newValue","newBuffer","connectValues","param","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isVerticalArrowKey","isArrowKey","computeOffset$1","rect","getBoundingClientRect","x","pageX","scrollX","y","pageY","scrollY","top","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","passive","offset","bounds","width","point","preventDefault","focus","data","computePosition_","removeEventListener","touch","targetTouches","clientX","clientY","mapRange","start1","end1","start2","end2","getDecimalDigits","constrainRange","loopRange","className$g","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","baseStep_","ph","dx","computeDraggingValue_","className$f","SliderView","trackElem","bindTabIndex","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","d","handlePointerEvent_","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","sliderProps","textC_","textProps","writePrimitive","write","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","findListItems","findStep","getSuitableDecimalDigits","getBaseStep","getSuitableDraggingScale","abs","floor","log10","className$d","CheckboxView","wrapperElem","checked","CheckboxController","createConstraint$5","lc","BooleanInputPlugin","reader","_args","writer","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","rgbToHsl","g","rp","gp","bp","cmax","cmin","h","s","l","hslToRgb","hp","sp","lp","ref1","ref2","ref3","ref4","ref5","rgbToHsv","hsvToRgb","vp","ref6","ref7","ref8","ref9","ref10","hslToHsv","sd","hsvToHsl","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","hsv","rgb","convertColorMode","components","fromMode","toMode","_fromMode","CONSTRAINT_MAP","isRgbColorComponent","Color","mode","mode_","comps_","opt_mode","rgbComps","getComponents","color","toRgbaObject","isRgbColorObject","comps1","comps2","className$b","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","alphaViews","palette","aElem","apElem","atElem","elems","modeSelectElement","textViews","parseColorInputParams","picker","getBaseStepForColor","forAlpha","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","NOTATION_TO_PARSER_MAP","isNaN","mRgb","mRrggbb","getColorNotation","notation","subparser","CompositeColorParser","hasAlphaComponent","colorFromString","cv","black","zerofill","comp","hex","colorToHexRgbString","hexes","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","colorToFunctionalHslString","formatters","colorToFunctionalHslaString","NOTATION_TO_STRINGIFIER_MAP","getColorStringifier","className$a","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","backgroundColor","APaletteController","className$9","createModeSelectElement","ColorTextView","modeElem","modeElem_","modeMarkerElem","textsElem","textsElem_","textViews_","applyTextViews_","colorMode","compElem","FORMATTER","MODE_TO_CONSTRAINT_MAP","createComponentController","draggingScale","ColorTextController","onModeSelectChange_","ccs_","createComponentControllers_","cc","ccs","cs","_this2","pickedMode","className$8","HPaletteView","HPaletteController","hue","className$7","CANVAS_RESOL","SvPaletteView","canvasElem","ctx","hsvComps","imgData","getImageData","iy","ix","putImageData","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","allFocusableElements","pickerC_","nextTarget","contains","colorFromObject","isColorObject","colorToRgbNumber","colorToRgbaNumber","numberToRgbColor","numberToRgbaColor","colorFromRgbNumber","colorFromRgbaNumber","createColorStringWriter","createColorNumberWriter","colorToNumber","writeRgbaColorObject","writeProperty","writeRgbColorObject","createColorObjectWriter","shouldSupportAlpha$1","inputParams","createFormatter$1","NumberColorInputPlugin","shouldSupportAlpha","isRgbaColorObject","ObjectColorInputPlugin","StringColorInputPlugin","stringifier","PointNdConstraint","asm_","assembly","toComponents","fromComponents","className$5","PointNdTextView","axisElem","createAxisController","axes","PointNdTextController","acs_","createStepConstraint","createRangeConstraint","createConstraint$4","findRange","estimateSuitableRange","NumberInputPlugin","format","Point2d","Point2dAssembly","className$4","Point2dView","className$3","Point2dPickerView","onFoldableChange_","invertsY_","invertsY","maxValue_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","px","py","ipy","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","baseSteps_","dy","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","point2dFromUnknown","writePoint2d","createDimensionConstraint$2","createConstraint$3","getSuitableMaxDimensionValue","getSuitableMaxValue","xc","yc","xr","yr","createAxis$2","shouldInvertY","yParams","inverted","Point2dInputPlugin","Point3d","z","Point3dAssembly","point3dFromUnknown","writePoint3d","createDimensionConstraint$1","createConstraint$2","createAxis$1","Point3dInputPlugin","Point4d","w","Point4dAssembly","point4dFromUnknown","writePoint4d","createDimensionConstraint","createConstraint$1","createAxis","Point4dInputPlugin","createConstraint","StringInputPlugin","Constants","monitor","defaultInterval","defaultLineCount","className$2","MultiLogView","onValueUpdate_","formatter_","textareaElem","lineCount","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","MultiLogController","className$1","SingleLogView","values","lastValue","SingleLogController","BooleanMonitorPlugin","GraphCursor","index_","className1","GraphLogView","onCursorChange_","minValue_","cursor_","maxIndex","points","tx","ty","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","offsetX","createFormatter","createTextMonitor","createGraphMonitor","_c","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","StringMonitorPlugin","multiline","InputBinding","targetValue","write_","createInputBindingController","valueArgs","MonitorBinding","reader_","createTicker","createMonitorBindingController","P","bindingArgs","PluginPool","pluginsMap_","blades","inputs","monitors","unshift","createDefaultPluginPool","ListApi","SliderApi","sliderController","TextApi","ListBladePlugin","ic","exportPresetJson","targets","importPresetJson","preset","RootApi","ibc","mbc","RootController","SliderBladePlugin","vc","TextBladePlugin","createDefaultWrapperElement","body","embedStyle","css","querySelector","styleElem","tpStyle","head","Pane","opt_config","rootController","containerElem_","container","usesDefaultWrapper_","setUpDefaultPlugins_","alreadyDisposed","reciever","parentElem","bundle","plugins","embedPluginStyle_","getAll","registerPlugin","VERSION","factory","$ad914f4ec673f32c$exports","compose$1","createFoldable","ButtonCellApi","TpButtonGridEvent","cell","ButtonGridApi","cellToApiMap_","gc","cellControllers","size","ButtonGridController","_size","cellConfig","cellCs_","gridTemplateColumns","ButtonGridBladePlugin","cells","CubicBezierApi","interpolate","x1","x2","MAX_ITERATION","X_DELTA","CACHE_RESOLUTION","y1","cb","dt","curve","CubicBezier","y2","x01","y01","x12","y12","x23","y23","xr0","yr0","xr1","yr1","cache","CubicBezierAssembly","toObject","cubicBezierToString","COMPS_EMPTY","cubicBezierFromString","CubicBezierView","iconElem","CubicBezierPickerView","graphElem","graphElement","waitToBeAddedToDom","elem1","ob","MutationObserver","ml","addedNodes","disconnect","observe","attributes","childList","subtree","CubicBezierGraphView","previewElement","guideElem_","handleElems_","vectorElems_","sel_","selection","vm","getVertMargin_","valueToPosition","p2","bezier","vElem","TICK_COUNT","PREVIEW_DELAY","PREVIEW_DURATION","CubicBezierPreviewView","stopped_","startTime_","onDispose_","onTimer_","ticksElem","ticksElem_","stop","updateMarker_","getTime","requestAnimationFrame","progress","play","getDistance","sqrt","lockAngle","atan2","la","cos","sin","CubicBezierGraphController","prevView_","stopImmediatePropagation","ptHandler","locksAngle","positionToValue","d1","d2","updateValue_","xStep","yStep","CubicBezierPickerController","gc_","axis","xAxis","yAxis","tc_","CubicBezierController","CubicBezierBladePlugin","FpsGraphBladeApi","begin","end","MAX_TIMESTAMPS","Fpswatch","start_","duration_","fps_","frameCount_","timestamps_","now","nowTime","ts","frameCount","time","df","calculateFps_","compactTimestamps_","FpsView","unitElement","FpsGraphController","stopwatch_","ticker_","graphC_","fps","FpsGraphBladePlugin","_d","Interval","IntervalAssembly","IntervalConstraint","edge","_e","_f","_g","_h","RangeSliderTextView","RangeSliderView","barElement","knobElems","knobElements","update","xs","valueToX_","RangeSliderController","grabbing_","grabOffset_","ofs_","pmin","pmax","valueFromData_","applyPointToValue_","RangeSliderTextController","sc_","intervalFromUnknown","writeInterval","IntervalInputPlugin","exValue","midValue","RadioCellApi","TpRadioGridChangeEvent","RadioGridApi","findCellByValue","capi","RadioView","RadioController","RadioGridController","cellValues_","onCellInputChange_","groupName","RadioGridBladePlugin","$e60fda73b1c81260$exports","$bddce99c0c610ba2$export$fd293b15f47e270","$bddce99c0c610ba2$export$b67359430d3b1b2","Float32Array","$bddce99c0c610ba2$export$5ada478c8a628231","random","$2e616e7f2b93d8b0$export$185802fd694ee1f5","out","$2e616e7f2b93d8b0$export$9cd59f9826255e47","$2e616e7f2b93d8b0$export$784d13d8ee351f07","$2e616e7f2b93d8b0$export$a82be99ed2a44a7d","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","$2e616e7f2b93d8b0$export$adaa4cf7ef1b65be","$2e616e7f2b93d8b0$export$f0954fd7d5368655","$2e616e7f2b93d8b0$export$9cb09a71b7d66923","a01","a02","a03","a12","a13","a23","$2e616e7f2b93d8b0$export$6897c284b6f9f4dc","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","$2e616e7f2b93d8b0$export$33f3c024b4ae00a1","$2e616e7f2b93d8b0$export$a04698f914c55ed9","$2e616e7f2b93d8b0$export$2060d2db72cce88f","b0","b1","b2","b3","$2e616e7f2b93d8b0$export$d73ee8ef04f5226a","$2e616e7f2b93d8b0$export$dcdf75081b88279d","$2e616e7f2b93d8b0$export$bb628a54ab399bc9","b12","b20","b21","b22","hypot","$2e616e7f2b93d8b0$export$a59c8716592e09af","$2e616e7f2b93d8b0$export$cf71e4d4ca4d1cfd","$2e616e7f2b93d8b0$export$ea6eae3365de5b9c","$2e616e7f2b93d8b0$export$bc9e79e74e9fddf6","$2e616e7f2b93d8b0$export$832ca188ffb1955d","$2e616e7f2b93d8b0$export$926fc125ff3c666c","$2e616e7f2b93d8b0$export$dd47cc2f828c32ef","$2e616e7f2b93d8b0$export$7dc997d67d2b7f33","$2e616e7f2b93d8b0$export$ad5ddaedc8f405df","$2e616e7f2b93d8b0$export$9545ac307f2a256b","q","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","$2e616e7f2b93d8b0$export$ff497f2be31cc6a","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","$2e616e7f2b93d8b0$export$202e99f82f7f0395","mat","$2e616e7f2b93d8b0$export$71dc54d92bd04b57","$2e616e7f2b93d8b0$export$df3937d3b537df0a","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","$2e616e7f2b93d8b0$export$ddf9c55c9f2be172","sx","sy","sz","$2e616e7f2b93d8b0$export$1def1f860edc4b1f","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","$2e616e7f2b93d8b0$export$2ff2bbe382249af7","yx","zx","zy","$2e616e7f2b93d8b0$export$89b5708c387cac6c","bottom","near","far","rl","tb","nf","$2e616e7f2b93d8b0$export$4cf19729ec9a96b8","fovy","aspect","f","tan","Infinity","$2e616e7f2b93d8b0$export$541149539f3a4684","$2e616e7f2b93d8b0$export$294bba99a6af0c0c","$2e616e7f2b93d8b0$export$58ae211c788e338f","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","$2e616e7f2b93d8b0$export$c5f65ef3eb668f27","lr","bt","$2e616e7f2b93d8b0$export$4f2167e613cfc87b","$2e616e7f2b93d8b0$export$b1d31ea7b4d854e","$2e616e7f2b93d8b0$export$d924e14fd6d9aa66","eye","center","up","x0","y0","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","$2e616e7f2b93d8b0$export$aa67782f4dc9e52c","$2e616e7f2b93d8b0$export$42d51816ce590c93","$2e616e7f2b93d8b0$export$326827e8268e9cdb","$2e616e7f2b93d8b0$export$e16d8520af44a096","$2e616e7f2b93d8b0$export$4e2d2ead65e5f7e3","$2e616e7f2b93d8b0$export$c697bed75648cdb7","$2e616e7f2b93d8b0$export$553579f63bdd7137","$2e616e7f2b93d8b0$export$f2599a5cf1109d8","$2e616e7f2b93d8b0$export$e9bab7fafb253603","a0","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","$2e616e7f2b93d8b0$export$6e3a27864ab166fe","$2e616e7f2b93d8b0$export$f93b5905241a7cca","$b817ce0f5cdadb29$export$185802fd694ee1f5","$b817ce0f5cdadb29$export$9cd59f9826255e47","$b817ce0f5cdadb29$export$f24224f1c91d8156","$b817ce0f5cdadb29$export$a82be99ed2a44a7d","$b817ce0f5cdadb29$export$784d13d8ee351f07","$b817ce0f5cdadb29$export$adaa4cf7ef1b65be","$b817ce0f5cdadb29$export$e16d8520af44a096","$b817ce0f5cdadb29$export$4e2d2ead65e5f7e3","$b817ce0f5cdadb29$export$2060d2db72cce88f","$b817ce0f5cdadb29$export$cd007d971a5a2143","$b817ce0f5cdadb29$export$803ce6b71a0a94b2","ceil","$b817ce0f5cdadb29$export$a3fe094919f356fd","$b817ce0f5cdadb29$export$96ec731ed4dcb222","$b817ce0f5cdadb29$export$8960430cfd85939f","$b817ce0f5cdadb29$export$2077e0241d6afd3c","$b817ce0f5cdadb29$export$dcdf75081b88279d","$b817ce0f5cdadb29$export$19cedf1da84ba854","$b817ce0f5cdadb29$export$9f17032d917177de","$b817ce0f5cdadb29$export$88e6ebb4fe54f538","$b817ce0f5cdadb29$export$ab44e1323ffc8376","$b817ce0f5cdadb29$export$aef51622e549b8b0","$b817ce0f5cdadb29$export$70ae2c07e401031b","$b817ce0f5cdadb29$export$a3295358bff77e","$b817ce0f5cdadb29$export$fc1400facf92c78","$b817ce0f5cdadb29$export$94132a0e348806d4","$b817ce0f5cdadb29$export$bb646b20bb93d339","$b817ce0f5cdadb29$export$3a89f8d6f6bf6c9f","$b817ce0f5cdadb29$export$ae8865616f30561c","factorTimes2","factor1","factor2","factor3","factor4","$b817ce0f5cdadb29$export$b9c5f84610baddaf","inverseFactor","inverseFactorTimesTwo","$b817ce0f5cdadb29$export$4385e60b38654f68","zScale","$b817ce0f5cdadb29$export$5ffbd13800309d59","$b817ce0f5cdadb29$export$f0bfa0a0024626ee","$b817ce0f5cdadb29$export$c32adef9e939ce85","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","$b817ce0f5cdadb29$export$a59c8716592e09af","$b817ce0f5cdadb29$export$cf71e4d4ca4d1cfd","$b817ce0f5cdadb29$export$ea6eae3365de5b9c","$b817ce0f5cdadb29$export$944b09d2ad10b378","mag","cosine","acos","$b817ce0f5cdadb29$export$7f9972325ebfd559","$b817ce0f5cdadb29$export$42d51816ce590c93","$b817ce0f5cdadb29$export$f2599a5cf1109d8","$b817ce0f5cdadb29$export$e9bab7fafb253603","vec","$b817ce0f5cdadb29$export$f93b5905241a7cca","$b817ce0f5cdadb29$export$6e3a27864ab166fe","$b817ce0f5cdadb29$export$159d9494db57879b","$b817ce0f5cdadb29$export$6c4a311cc157c764","$b817ce0f5cdadb29$export$2422cd6c492a8b3a","$b817ce0f5cdadb29$export$99d8dd3f32a3435","$b817ce0f5cdadb29$export$4b80e395e36b5a56","stride","count","arg","$3843f3adc77d8e3a$export$f24224f1c91d8156","$3843f3adc77d8e3a$export$ab44e1323ffc8376","$3612f84116b201a9$export$185802fd694ee1f5","$3612f84116b201a9$export$f0954fd7d5368655","$3612f84116b201a9$export$4286ddefc8f49512","$3612f84116b201a9$export$3f70be5e7d7dc51","out_axis","$3612f84116b201a9$export$b363da9ded343252","dotproduct","$3612f84116b201a9$export$94132a0e348806d4","$3612f84116b201a9$export$2060d2db72cce88f","$3612f84116b201a9$export$a59c8716592e09af","$3612f84116b201a9$export$cf71e4d4ca4d1cfd","$3612f84116b201a9$export$ea6eae3365de5b9c","$3612f84116b201a9$export$fb72b72e8d764d4e","$3612f84116b201a9$export$b310ec824aaee37f","et","exp","$3612f84116b201a9$export$876cb1b29620556f","log","$3612f84116b201a9$export$9c297f60e22e3389","$3612f84116b201a9$export$dcdf75081b88279d","$3612f84116b201a9$export$1544d9bc2995de08","omega","cosom","sinom","scale0","scale1","$3612f84116b201a9$export$4385e60b38654f68","u1","u2","u3","sqrt1MinusU1","sqrtU1","$3612f84116b201a9$export$6897c284b6f9f4dc","invDot","$3612f84116b201a9$export$7679f47e72c62560","$3612f84116b201a9$export$272a1eb8e5a4b55b","fRoot","fTrace","j","k","$3612f84116b201a9$export$7a404a587ea85af","halfToRad","cx","cy","cz","$3612f84116b201a9$export$42d51816ce590c93","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","$3612f84116b201a9$export$9cd59f9826255e47","$3612f84116b201a9$export$a82be99ed2a44a7d","$3612f84116b201a9$export$784d13d8ee351f07","$3612f84116b201a9$export$adaa4cf7ef1b65be","$3612f84116b201a9$export$e16d8520af44a096","$3612f84116b201a9$export$6e3a27864ab166fe","$3612f84116b201a9$export$3a89f8d6f6bf6c9f","$3612f84116b201a9$export$f24224f1c91d8156","$3612f84116b201a9$export$fc1400facf92c78","$3612f84116b201a9$export$ab44e1323ffc8376","$3612f84116b201a9$export$99d8dd3f32a3435","$3612f84116b201a9$export$a3295358bff77e","$3843f3adc77d8e3a$export$fc1400facf92c78","$3612f84116b201a9$export$f2599a5cf1109d8","$3612f84116b201a9$export$e9bab7fafb253603","$3612f84116b201a9$export$72d66f5842c00904","$3612f84116b201a9$export$699b0866ca50f6cb","$3612f84116b201a9$export$937ca0a544b2d712","$d95d21c0e6d616ef$export$185802fd694ee1f5","$d95d21c0e6d616ef$export$9cd59f9826255e47","$d95d21c0e6d616ef$export$a82be99ed2a44a7d","$d95d21c0e6d616ef$export$784d13d8ee351f07","$d95d21c0e6d616ef$export$adaa4cf7ef1b65be","$d95d21c0e6d616ef$export$e16d8520af44a096","$d95d21c0e6d616ef$export$4e2d2ead65e5f7e3","$d95d21c0e6d616ef$export$2060d2db72cce88f","$d95d21c0e6d616ef$export$cd007d971a5a2143","$d95d21c0e6d616ef$export$803ce6b71a0a94b2","$d95d21c0e6d616ef$export$a3fe094919f356fd","$d95d21c0e6d616ef$export$96ec731ed4dcb222","$d95d21c0e6d616ef$export$8960430cfd85939f","$d95d21c0e6d616ef$export$2077e0241d6afd3c","$d95d21c0e6d616ef$export$dcdf75081b88279d","$d95d21c0e6d616ef$export$19cedf1da84ba854","$d95d21c0e6d616ef$export$9f17032d917177de","$d95d21c0e6d616ef$export$88e6ebb4fe54f538","$d95d21c0e6d616ef$export$f24224f1c91d8156","$d95d21c0e6d616ef$export$ab44e1323ffc8376","$d95d21c0e6d616ef$export$aef51622e549b8b0","$d95d21c0e6d616ef$export$70ae2c07e401031b","$d95d21c0e6d616ef$export$a3295358bff77e","$d95d21c0e6d616ef$export$fc1400facf92c78","$d95d21c0e6d616ef$export$94132a0e348806d4","$d95d21c0e6d616ef$export$bb646b20bb93d339","$d95d21c0e6d616ef$export$3a89f8d6f6bf6c9f","$d95d21c0e6d616ef$export$4385e60b38654f68","$d95d21c0e6d616ef$export$b732428d73874bfc","$d95d21c0e6d616ef$export$3e55bc4b3707dfd3","$d95d21c0e6d616ef$export$f0bfa0a0024626ee","$d95d21c0e6d616ef$export$5ffbd13800309d59","$d95d21c0e6d616ef$export$bb628a54ab399bc9","p0","sinC","cosC","$d95d21c0e6d616ef$export$944b09d2ad10b378","$d95d21c0e6d616ef$export$7f9972325ebfd559","$d95d21c0e6d616ef$export$42d51816ce590c93","$d95d21c0e6d616ef$export$f2599a5cf1109d8","$d95d21c0e6d616ef$export$e9bab7fafb253603","$d95d21c0e6d616ef$export$f93b5905241a7cca","$d95d21c0e6d616ef$export$6e3a27864ab166fe","$d95d21c0e6d616ef$export$159d9494db57879b","$d95d21c0e6d616ef$export$6c4a311cc157c764","$d95d21c0e6d616ef$export$2422cd6c492a8b3a","$d95d21c0e6d616ef$export$99d8dd3f32a3435","$d95d21c0e6d616ef$export$4b80e395e36b5a56","$f53429034b23038d$export$5dc878ab9e1f1ddf","canvas","camera","updateCallback","pointerDown","pointerDownPos","pointerPos","followPos","prevFollowPos","phi","theta","touchAction","pointerDownCameraUp","pointerDownRotation","rotation","deltaTime","timeScale","damping","delta","source","ownKeys","getOwnPropertySymbols","sym","$d48ddae4a704ec47$export$2e2bcd8739ae039","speed","decc","prevRotation","velocity","thetaLimitUp","maxLatitude","thetaLimitDown","minLatitude","$3612f84116b201a9$exports","fromEuler","orbit","$b817ce0f5cdadb29$exports","transformQuat","position","distance","$43b584b62e48591b$export$327d24a04cd0dc17","gl","shaderSources","transformFeedbackVaryings","attribLocations","program","createProgram","VERTEX_SHADER","FRAGMENT_SHADER","ndx","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","error","getShaderInfoLog","deleteShader","$43b584b62e48591b$export$1750aa77609e1fb","attachShader","SEPARATE_ATTRIBS","attrib","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","$43b584b62e48591b$export$fc5893f94808dc8c","bufLocNumElmPairs","indices","va","createVertexArray","bindVertexArray","_value","loc","numElem","bindBuffer","ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","indexBuffer","createBuffer","ELEMENT_ARRAY_BUFFER","bufferData","Uint16Array","STATIC_DRAW","$43b584b62e48591b$export$b6ff7cc6c52392fa","sizeOrData","usage","buf","$43b584b62e48591b$export$f4cc01e15531578c","buffers","tf","createTransformFeedback","bindTransformFeedback","TRANSFORM_FEEDBACK","bindBufferBase","TRANSFORM_FEEDBACK_BUFFER","$43b584b62e48591b$export$12eb0ae1f2459d74","fbo","bindFramebuffer","FRAMEBUFFER","viewport","$43b584b62e48591b$export$8b5dc4d905cef78f","minFilter","magFilter","wrapS","wrapT","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","$7bd721fa29249cd1$export$ec4bceef241d2e36","curl","noise","$parcel$interopDefault","locations","a_oldPosition","getAttribLocation","a_oldVelocity","u_deltaTime","getUniformLocation","u_frames","u_velocity","u_noiseStrength","u_curlStrength","NUM_PARTICLES","fill","scale","normalize","fromValues","flat","velocities","positionBuffers","DYNAMIC_DRAW","velocityBuffers","compute1VAO","compute2VAO","transformFeedback1","transformFeedback2","currentRenderState","resultPositionBufferIndex","computeVAO","transformFeedback","nextRenderState","positionBuffer","resultPositionBuffer","frames","enable","RASTERIZER_DISCARD","useProgram","uniform1f","settings","uniform1i","beginTransformFeedback","POINTS","drawArrays","endTransformFeedback","disable","currentState","$6a16e12708036bf3$export$418f4e74cfe71a96","depth","radius","radiusSegments","edgeHalfWidth","edgeHalfHeight","edgeHalfDepth","rs1","totalVertexCount","normals","cornerVerts","cornerNormals","vertex","vertexPool","normalPool","lastVertex","cornerVertNumber","cornerLayout","PIhalf","cornerOffset","cosVa","sinVa","ha","vert1","clone","norm1","vert","norm","j1","vert2","multiply","norm2","flips","lastRowOffset","i1","cornerOffset1","r1","r2","u12","c1","c2","i2","cOffset","cRowOffset","needsFlip","u11","c3","cStartsW","cEndsW","needsFlip1","i3","cStart","cEnd","u4","c4","d3","cStartsD","cEndsD","i4","cStartD","cEndD","needsFlip2","u5","urs1","u1rs1","c5","d4","i5","vertices","_time","WeakMap","_frames","_deltaTime","_isDestroyed","_render","WeakSet","_init","_initEnvMap","_initOrbitControls","_resizeTextures","_updateCameraMatrix","_updateProjectionMatrix","_initTweakpane","_createTweakpaneSlider","$bc87ba5423da39f8$export$df7c18b74ee18f30","pane","oninit","matrix","$2e616e7f2b93d8b0$exports","strength","dispersion","init","displayWidth","displayHeight","needResize","clientWidth","drawingBufferWidth","drawingBufferHeight","resizeTextures","updateProjectionMatrix","fpsGraph","particlesPositionBufferIndex","particles","control","render","run","particleProgram","particleFBO","particleFBOSize","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","DEPTH_TEST","CULL_FACE","BLEND","blendFunc","SRC_ALPHA","DST_ALPHA","uniformMatrix4fv","particleLocations","u_worldMatrix","drawUniforms","u_viewMatrix","u_projectionMatrix","particleVAOs","colorProgram","colorLocations","uniform3f","u_cameraPosition","worldInverseTransposeMatrix","invert","transpose","u_worldInverseTransposeMatrix","activeTexture","TEXTURE0","particleTexture","u_particleTexture","TEXTURE1","envMapTexture","u_envMapTexture","u_refractionStrength","refractionSettings","u_dispersion","capsuleVAO","drawElements","TRIANGLES","capsuleBuffers","UNSIGNED_SHORT","antialias","a_position","a_normal","a_uv","rotate","translate","quadPositions","quadBuffers","quadVAO","capsuleGeometry","normal","clientSize","$d95d21c0e6d616ef$exports","LINEAR","REPEAT","texImage2D","RGBA","UNSIGNED_BYTE","colorAttachements","depthAttachement","createFramebuffer","drawBuffers","attachmentPoint","framebufferTexture2D","DEPTH_ATTACHMENT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","$43b584b62e48591b$export$366d1e3e32f5a700","resize","initEnvMap","updateCameraMatrix","initOrbitControls","initTweakpane","MIRRORED_REPEAT","img","Image","src","URL","$cd52061ee72f568d$exports","bindRenderbuffer","RENDERBUFFER","targetTo","perspective","cameraFolder","createTweakpaneSlider","particlesFolder","refractionFolder","propName","stepSize","slider","getBundleURL","resolve","$3015b282b063971c$var$sketch","$3015b282b063971c$var$resizeTimeoutId","$3015b282b063971c$var$queryString","window","location","search","$3015b282b063971c$var$DEBUG","URLSearchParams","sketch","clearTimeout","setTimeout"],"version":3,"file":"index.40823946.js.map"}